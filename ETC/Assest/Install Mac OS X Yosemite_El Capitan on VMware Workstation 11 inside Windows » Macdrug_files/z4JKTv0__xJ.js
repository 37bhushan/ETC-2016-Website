/*!CK:1147009445!*//*1455155495,*/

if (self.CavalryLogger) { CavalryLogger.start_js(["oNHND"]); }

__d("MercuryGenericConstants",[],function a(b,c,d,e,f,g){c.__markCompiled&&c.__markCompiled();f.exports={MAX_THREAD_NAME_LENGTH:250};},null);
__d('DesktopHscrollUnitEventConstants',[],function a(b,c,d,e,f,g){if(c.__markCompiled)c.__markCompiled();f.exports={HSCROLL_ITEM_INSERTED_EVENT:'DesktopHScrollUnit/itemInserted',HSCROLL_ITEM_SHOWN_EVENT:'DesktopHScrollUnit/itemShown',HSCROLL_ITEM_HIDE_EVENT:'DesktopHScrollUnit/HideIndividualItem',HSCROLL_ITEM_SCROLL_BEFORE_XOUT_EVENT:'DesktopHScrollUnit/scrollItemBeforeXout',HSCROLL_ITEM_UNHIDE_EVENT:'DesktopHScrollUnit/unhideIndividualItem',HSCROLL_LAST_ITEM_NFX_ACTION_TAKEN:'logLastAdXout',HSCROLL_PAGER_ITEM_HIDE_EVENT:'onXoutIndividualItem'};},null);
__d('BrowseClientEventLogger',['Banzai'],function a(b,c,d,e,f,g,h){if(c.__markCompiled)c.__markCompiled();var i='browse_client_event_session',j='21.',k={logData:function(event,l,m,n){if(!event||!l)return;n=n||{};n.event=event;n.client_time=Math.floor(Date.now());n.session_id=l;n.vertical=m;this.allData=this.allData||{};this.processedSessions=this.processedSessions||[];if(this.processedSessions.indexOf(l)!==-1)return;if(!this.allData.sessionid)this.allData.sessionid=[];this.allData.sessionid.push(n);if(event==='window_unloaded'||event==='window_transition_to_LHC'||event==='window_transition_to_home_click'||event==='window_transition_to_fb_page'){this._postBatch(this.allData.sessionid);this.processedSessions.push(l);}},logClick:function(l){l.event='click';this.maybeLogVisiblityEvent(l,true);},maybeLogClientViewEvent:function(l){l.event='client_view';this.maybeLogVisiblityEvent(l);},maybeLogVisiblityEvent:function(l,m){if(!l||!l.xt||l.xt.indexOf(j)!==0)return;var n=JSON.parse(l.xt.substring(3));if(m)n.click_type=l.click_type;var event=l.event;if(event==='vpvd'){if(!l.ft)return;n.vpvd_time=l.ft.vpvd_time_delta;}this.logData(event,n.session_id,n.vertical,n);},_postBatch:function(l){h.post(i,l,{delay:0,retry:true});}};f.exports=k;},null);
__d('NotificationCounter',['Arbiter','ChatConfig','DocumentTitle','JSLogger','UserActivity'],function a(b,c,d,e,f,g,h,i,j,k,l){if(c.__markCompiled)c.__markCompiled();var m={messages:0,notifications:0,requests:0},n={init:function(o){h.subscribe('update_title',this._handleUpdate.bind(this));h.subscribe('jewel/count-updated',this._handleCountUpdate.bind(this));},getCount:function(){var o=0;for(var p in m){var q=Number(m[p]);if(typeof m[p]=='string'&&isNaN(q))return m[p];if(isNaN(q)||q<0){k.create('jewels').error('bad_count',{jewel:p,count:m[p]});continue;}o+=q;}return o;},updateTitle:function(){var o=this.getCount(),p=j.get();p=o?'('+o+') '+p:p;j.set(p,true);},_handleCountUpdate:function(o,p){m[p.jewel]=p.count;this.updateTitle();},_handleUpdate:function(o,p){this.updateTitle();}};f.exports=n;},null);
__d('NotificationSeenState',['NotificationConstants','NotificationUpdates','createObjectFrom'],function a(b,c,d,e,f,g,h,i,j){if(c.__markCompiled)c.__markCompiled();var k={},l=1,m=2,n=0,o=l,p=l|m,q=h.PayloadSourceType.INITIAL_LOAD,r={UNSEEN_AND_UNREAD:n,SEEN_BUT_UNREAD:o,SEEN_AND_READ:p};function s(v){var w=[],x=[];Object.keys(v).forEach(function(y){var z=v[y],aa=k[y];k[y]=z;if(aa===undefined){w.push(y);x.push(y);return;}var ba=aa^z;if(ba&l)w.push(y);if(ba&m)x.push(y);});w.length&&i.didUpdateSeenState(w);x.length&&i.didUpdateReadState(x);}i.subscribe('update-notifications',function(v,w){var x=w.nodes;if(!x||!x.length)return;var y=w.payloadsource,z=h.PayloadSourceType,aa=y==z.ENDPOINT,ba={};w.nodes.forEach(function(ca){var da=ca.alert_id;if(!aa||k[da]===undefined)ba[da]=r[ca.seen_state];});s(ba);});i.subscribe('update-seen',function(v,w){if(!w.seenState)return;var x=[],y={};Object.keys(w.seenState).forEach(function(aa){if(!w.seenState[aa]){x.push(aa);return;}var ba=k[aa];if(ba!==undefined)y[aa]=ba|l;});var z=babelHelpers._extends({},j(x,n),y);s(z);});i.subscribe('update-read',function(v,w){if(!w.readState)return;var x=[],y={};Object.keys(w.readState).forEach(function(aa){if(w.readState[aa]){x.push(aa);return;}var ba=k[aa];if(ba!==undefined){y[aa]=ba&~m;}else if(w.payloadsource==q)y[aa]=o;});var z=babelHelpers._extends({},j(x,p),y);s(z);});function t(v){var w=k[v];return w;}var u={isRead:function(v){return t(v)===p;},isSeen:function(v){return t(v)!==n;},getUnseenCount:function(){return u.getUnseenIDs().length;},getUnseenIDs:function(){return Object.keys(k).filter(function(v){return k[v]===n;});},getUnreadCount:function(){return u.getUnreadIDs().length;},getUnreadIDs:function(){return Object.keys(k).filter(function(v){return k[v]!==p;});}};f.exports=u;},null);
__d("XNotificationsSyncController",["XController"],function a(b,c,d,e,f,g){c.__markCompiled&&c.__markCompiled();f.exports=c("XController").create("\/notifications\/sync\/",{lastSync:{type:"Int",required:true}});},null);
__d('NotificationSync',['Arbiter','AsyncRequest','ChannelConstants','JSLogger','NotificationConstants','NotificationUpdates','XNotificationsSyncController'],function a(b,c,d,e,f,g,h,i,j,k,l,m,n){if(c.__markCompiled)c.__markCompiled();var o=k.create('notifications'),p='channel_reload',q=0;function r(w){var x=m.getserverTime()?m.getserverTime():q,y=n.getURIBuilder().setInt('lastSync',x).getURI();w.setHandler(s).setOption('suppressErrorAlerts',true).setErrorHandler(t).setMethod('GET').setReadOnly(true).setURI(y).setAllowCrossPageTransition(true);}function s(w){var x=w.getPayload();if(x.syncPayload)m.handleUpdate(l.PayloadSourceType.SYNC,x.syncPayload);}function t(w){}function u(){var w=new i();w.setIsBackgroundRequest(true);r(w);w.send();o.bump(p);}var v={setup:function(w){q=w;h.subscribe(j.ON_INVALID_HISTORY,u);}};f.exports=v;},null);
__d('NotificationJewelController',['Arbiter','Event','NotificationConstants','NotificationCounter','NotificationSeenState','NotificationStore','NotificationSync','NotificationUpdates','createObjectFrom','curry'],function a(b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q){if(c.__markCompiled)c.__markCompiled();var r=0;function s(u){h.inform('jewel/count-updated',{jewel:u,count:l.getUnseenIDs().length},h.BEHAVIOR_STATE);}function t(u,v,w,x,y){'use strict';var z=null;if(v.list&&v.unseenNotifs&&v.startTime){z=v.list;w=v.unseenNotifs;x=v.startTime;}else z=v;if(y)m.registerEndpoint(y);k.init();var aa=i.listen(u.getRoot(),'mouseover',function(){aa.remove();aa=null;z.open();});if(u.isOpen()){z.open();}else var ba=u.subscribe('opened',function(){ba.unsubscribe();ba=null;z.open();});var ca=z.pause.bind(z);u.subscribe('opened',function(){setTimeout(ca,0);s(u.name);});u.subscribe('closed',function(){z.unpause();s(u.name);});o.subscribe('seen-state-updated',q(s,u.name));o.handleUpdate(j.PayloadSourceType.INITIAL_LOAD,{seenState:p(w,r)});n.setup(x);s(u.name);}f.exports=t;},null);
__d('NotificationJewelHeaderController',['DOM','Event','NotificationSeenState','NotificationUserActions','NotificationUpdates'],function a(b,c,d,e,f,g,h,i,j,k,l){if(c.__markCompiled)c.__markCompiled();function m(n,o){'use strict';i.listen(n,'click',function(){var p=j.getUnreadIDs();if(p.length)k.markNotificationsAsRead(p);});l.subscribe('read-state-updated',function(){if(o)h.setContent(o,j.getUnreadCount());});}f.exports=m;},null);
__d('NotificationJewelListController',['Bootloader','React','ReactDOM'],function a(b,c,d,e,f,g,h,i,j){if(c.__markCompiled)c.__markCompiled();var k=null,l=null;function m(n,o){'use strict';this.$NotificationJewelListController1=n;this.$NotificationJewelListController2=o;this.$NotificationJewelListController3=false;this.$NotificationJewelListController4=false;}m.prototype.open=function(){'use strict';this.$NotificationJewelListController3=true;this.$NotificationJewelListController5();};m.prototype.pause=function(){'use strict';this.$NotificationJewelListController4=true;this.$NotificationJewelListController5();};m.prototype.unpause=function(){'use strict';this.$NotificationJewelListController4=false;this.$NotificationJewelListController5();};m.prototype.$NotificationJewelListController5=function(){'use strict';if(!k||!l){h.loadModules(["NotificationList.react","NotificationJewelList.react"],(function(n,o){k=n;l=o;this.$NotificationJewelListController6();}).bind(this));}else this.$NotificationJewelListController6();};m.prototype.$NotificationJewelListController6=function(){'use strict';j.render(i.createElement(k,{hasEverBeenOpened:this.$NotificationJewelListController3,paused:this.$NotificationJewelListController4,tracking:this.$NotificationJewelListController2.tracking,negativeTracking:this.$NotificationJewelListController2.negativeTracking,shortenTimestamp:this.$NotificationJewelListController2.shortenTimestamp,businessID:this.$NotificationJewelListController2.businessID,maxHeight:this.$NotificationJewelListController2.maxHeight,useChevron:this.$NotificationJewelListController2.useChevron,chevronType:this.$NotificationJewelListController2.chevronType,numPerPage:5,listRenderer:l,upsell:this.$NotificationJewelListController2.upsell||null,endpoint:this.$NotificationJewelListController2.endpoint}),this.$NotificationJewelListController1);};f.exports=m;},null);
__d('NotificationHiddenState',['NotificationUpdates','NotificationConstants','isEmpty'],function a(b,c,d,e,f,g,h,i,j){if(c.__markCompiled)c.__markCompiled();var k={};h.subscribe('update-notifications',function(m,n){var o=n.nodes,p=n.payloadsource;if(p===i.PayloadSourceType.LIVE_SEND&&o&&o.length){var q={};o.forEach(function(r){var s=r.alert_id;if(k[s])q[s]=false;});if(!j(q)){k=Object.assign(k,q);h.didUpdateHiddenState(Object.keys(q));}}});h.subscribe('update-hidden',function(m,n){if(n.hiddenState){k=Object.assign(k,n.hiddenState);h.didUpdateHiddenState(Object.keys(n.hiddenState));}});var l={isHidden:function(m){if(k[m])return k[m];return false;}};f.exports=l;},null);
__d('NotificationPhotoThumbnail',[],function a(b,c,d,e,f,g){if(c.__markCompiled)c.__markCompiled();function h(j){if(!j.media||!j.style_list||!j.style_list.length)return null;switch(j.style_list[0]){case 'new_album':case 'album':case 'application':case 'photo':case 'video':case 'video_autoplay':case 'video_inline':return j.media.image;default:return null;}}var i={getThumbnail:function(j,k,l){var m;if(j&&j.length){j.some(function(q){m=h(q);if(m)return true;return false;});if(m)return m;}if(l){var n=l.relevant_comments;if(n&&n.length){var o=n[0].attachments;if(o&&o.length){m=h(o[0]);if(m)return m;}}}if(k){var p=k.attachments;if(p&&p.length)return h(p[0]);}return null;}};f.exports=i;},null);
__d('VideoPermalinkURI',[],function a(b,c,d,e,f,g){if(c.__markCompiled)c.__markCompiled();var h={isValid:function(i){return h.parse(i)!==null;},parse:function(i){if(this.isValidLegacy(i)){var j=i.getQueryData();if(j.v)return {video_id:j.v,set_token:j.set};return null;}var k=i.getPath();if(k[k.length-1]==='/')k=k.substring(0,k.length-1);var l=k.split('/');if(l.length>=3&&l[2]==='videos')if(l.length===4&&/^\d+$/.exec(l[3])!==null){return {video_id:l[3],set_token:null};}else if(l.length===5&&/^\d+$/.exec(l[4])!==null)return {video_id:l[4],set_token:l[3]};return null;},isValidLegacy:function(i){var j=i.getPath();if(j[j.length-1]==='/')j=j.substring(0,j.length-1);if(j==='/photo.php'||j==='/force_photo/photo.php'||j==='/photo'||j==='/force_photo/photo/index.php'||j==='/photo/index.php'||j==='/force_photo/photo'||j==='/video.php'||j==='/video/video.php')return true;return false;}};f.exports=h;},null);
__d('NotificationURI',['BusinessURI.brands','URI','isFacebookURI','VideoPermalinkURI'],function a(b,c,d,e,f,g,h,i,j,k){if(c.__markCompiled)c.__markCompiled();var l={localize:function(m){m=h(m);if(!j(m))return m.toString();var n=m.getSubdomain();return m.getUnqualifiedURI().getQualifiedURI().setSubdomain(n).toString();},snowliftable:function(m){if(!m)return false;m=new i(m);var n=m.getQueryData();return j(m)&&(k.isValid(m)||'fbid' in n);},isVaultSetURI:function(m){return this._areEquals(m,'/ajax/vault/sharer_preview.php');},isAlbumDraftRecoveryDialogURI:function(m){return this._areEquals(m,'/ajax/photos/upload/overlay/');},_areEquals:function(m,n){if(!m)return false;m=new i(m);return j(m)&&m.getPath()===n;},_startsWith:function(m,n){if(!m)return false;m=new i(m);return j(m)&&m.getPath().startsWith(n);}};f.exports=l;},null);
__d('List.react',['React','cx','joinClasses'],function a(b,c,d,e,f,g,h,i,j){if(c.__markCompiled)c.__markCompiled();var k=h.PropTypes,l=h.createClass({displayName:'List',propTypes:{border:k.oneOf(['none','light','medium','dark']),spacing:k.oneOf(['none','small','medium','large']),direction:k.oneOf(['vertical','horizontal']),valign:k.oneOf(['baseline','top','middle','bottom']),edgepadding:k.bool},getDefaultProps:function(){return {border:'medium',spacing:'medium',direction:'vertical',valign:'top'};},render:function(){var m=this.props.border,n=this.props.direction,o=this.props.spacing,p=n==='horizontal'&&this.props.valign,q,r,s;q=(n==='vertical'?"_4kg":'')+(n==='horizontal'?' '+"_4ki":'')+(p==='top'?' '+"_509-":'')+(p==='middle'?' '+"_509_":'')+(p==='bottom'?' '+"_50a0":'');if(o!=='none'||m!=='none')r=(m==='none'?"_6-i":'')+(m==='light'?' '+"_4ks":'')+(m==='medium'?' '+"_4kt":'')+(m==='dark'?' '+"_4ku":'');if(o!=='none')s=(!this.props.edgepadding?"_6-h":'')+(o==='small'?' '+"_704":'')+(o==='medium'?' '+"_6-j":'')+(o==='large'?' '+"_703":'');var t=j("uiList",q,r,s);return (h.createElement('ul',babelHelpers._extends({},this.props,{className:j(this.props.className,t)}),this.props.children));}});f.exports=l;},null);
__d('PhotoResizeMath',[],function a(b,c,d,e,f,g){if(c.__markCompiled)c.__markCompiled();var h={getScaledPhotoDimensions:function(i,j,k,l,m){var n=i/j,o=k/l;if(k&&l&&m==='stretch')return {width:k,height:l};if(!k&&l||m==='contain'!==n>=o)return {width:l*n,height:l};if(k)return {width:k,height:k/n};return {width:i,height:j};}};f.exports=h;},null);
__d('PixelzFocus',[],function a(b,c,d,e,f,g){'use strict';if(c.__markCompiled)c.__markCompiled();var h={search:function(i,j){var k=0,l=i.length-1;while(k<=l){var m=k+Math.floor((l-k)/2),n=i[m];if(n>j){l=m-1;}else if(n<j){k=m+1;}else return m;}return Math.min(k,l);},forceSpecificPoint:function(i,j,k){var l=1e-09,m=h.search(i,j-k-l)+1,n=h.search(i,j+k);return i.slice(m,n+1);},findBiggestSets:function(i,j){var k=[],l=-1;for(var m=0;m<i.length;++m){var n=i[m],o=m,p=h.search(i,n+j),q=p-o;if(q>l)k=[];if(q>=l){l=q;k.push({low:o,high:p});}}return k;},getBestSet:function(i,j,k){var l=-1,m=null;for(var n=0;n<j.length;++n){var o=j[n],p=i[o.low],q=i[o.high],r=p+(q-p)/2,s=Math.min(p-(r-k),r+k-q);if(s>l){l=s;m=o;}}return m;},getFocusFromSet:function(i,j){var k=i[j.low],l=i[j.high];return k+(l-k)/2;},clampFocus:function(i,j){var k=j/2,l=1-j/2;if(i<k)return k;if(i>l)return l;return i;},convertFromCenterToCSS:function(i,j){if(Math.abs(1-j)<1e-05)return 0;return (i-j/2)/(1-j);},convertFromCSSToCenter:function(i,j){return i*(1-j)+j/2;},getVisible:function(i,j){if(i<j)return i/j;return j/i;},getHidden:function(i,j){return 1-h.getVisible(i,j);},focusHorizontally:function(i,j){return i<j;},convertVectorFromCenterToCSS:function(i,j,k){var l=h.focusHorizontally(j,k),m;if(l){m=i.x/100;}else m=i.x/100;var n=h.convertFromCenterToCSS(m,h.getVisible(j,k));if(l){return {x:n,y:0};}else return {x:0,y:n};},getCropRect:function(i,j,k){var l=h.focusHorizontally(j,k),m=h.getVisible(j,k);if(l){var n=(1-m)*i.x;return {left:n,top:0,width:m,height:1};}else{var o=(1-m)*i.y;return {left:0,top:o,width:1,height:m};}}};f.exports=h;},null);
__d('loadImage',[],function a(b,c,d,e,f,g){'use strict';if(c.__markCompiled)c.__markCompiled();function h(i,j){var k=new Image();k.onload=function(){j(k.width,k.height,k);};k.src=i;}f.exports=h;},null);
__d('Pixelz.react',['arrayContains','cx','loadImage','joinClasses','React','PhotoResizeMath','PixelzFocus'],function a(b,c,d,e,f,g,h,i,j,k,l,m,n){'use strict';if(c.__markCompiled)c.__markCompiled();var o=l.PropTypes,p=l.createClass({displayName:'Pixelz',propTypes:{width:o.number,height:o.number,resizeMode:o.oneOf(['contain','cover','stretch']),alt:o.string,letterbox:o.bool,borderRadius:o.number,insetBorderColor:o.string,animated:o.bool,upscale:o.bool,cropRect:function(q,r,s){var t=q[r],u='Invalid prop `'+r+'` supplied to `'+s+'`, expected a rectangle with values normalized '+'between 0 and 1.';if(t.left<0||t.top<0||t.width<0||t.height<0||t.left+t.width>1||t.top+t.height>1)return new Error(u);},focus:function(q,r,s){var t=q[r],u='Invalid prop `'+r+'` supplied to `'+s+'`, expected either a {x, y, type} vector where type '+'is `css` or `center` or an array of {x, y} vectors. All the vectors '+'have with values normalized between 0 and 1.';if(Array.isArray(t)){for(var v=0;v<t.length;++v)if(!(t[v].x>=0&&t[v].x<=1)||!(t[v].y>=0&&t[v].y<=1))return new Error(u);}else{if(!t.type)t.type='css';if(!(t.x>=0&&t.x<=1)||!(t.y>=0&&t.y<=1)||!h(['center','css'],t.type))return new Error(u);}}},getDefaultProps:function(){return {resizeMode:'cover',alt:'',letterbox:true,upscale:true,cropRect:{width:1,height:1,top:0,left:0},focus:{x:.5,y:.5,type:'css'}};},getInitialState:function(){return {srcDimensions:{}};},getSrcDimensions:function(){var q=this.props.src,r=this.state.srcDimensions[q];if(r)return r;j(q,(function(s,t){var u={};u[q]={width:s,height:t};this.isMounted()&&this.setState({srcDimensions:u});}).bind(this));return null;},getCropSrcDimensions:function(){var q=this.getSrcDimensions();return {width:q.width*this.props.cropRect.width,height:q.height*this.props.cropRect.height};},getUpscaleCropDimensions:function(){var q=this.getCropSrcDimensions();return m.getScaledPhotoDimensions(q.width,q.height,this.props.width,this.props.height,this.props.resizeMode);},getCropDimensions:function(){var q=this.getUpscaleCropDimensions(),r=this.getCropSrcDimensions();if(!this.props.upscale)return {width:Math.min(q.width,r.width),height:Math.min(q.height,r.height)};return q;},getCropAspectRatio:function(){var q=this.getCropDimensions();return q.width/q.height;},getContainerDimensions:function(){if(this.props.letterbox&&this.props.width&&this.props.height)return {width:this.props.width,height:this.props.height};return this.getCropDimensions();},getContainerAspectRatio:function(){var q=this.getContainerDimensions();return q.width/q.height;},getContainerPosition:function(){return {left:0,top:0};},getFocus:function(){var q=this.props.focus;if(!Array.isArray(q)&&q.type==='css')return {x:q.x,y:q.y};var r=this.getContainerAspectRatio(),s=this.getCropAspectRatio(),t=n.getVisible(r,s),u=n.focusHorizontally(r,s),v;if(!Array.isArray(q)){v=n.convertFromCenterToCSS(u?q.x:q.y,t);}else{var w=q.map(function(z){return u?z.x:z.y;});w.sort();var x=n.findBiggestSets(w,t),y=n.getBestSet(w,x,t);v=n.getFocusFromSet(w,y);}return {x:u?v:.5,y:u?.5:v};},getCropPosition:function(){var q=this.getCropDimensions(),r=this.getContainerDimensions(),s=this.getFocus();return {left:s.x*(r.width-q.width),top:s.y*(r.height-q.height)};},getScaleDimensions:function(){var q=this.getCropDimensions();return {width:q.width/this.props.cropRect.width,height:q.height/this.props.cropRect.height};},getScalePosition:function(){var q=this.getScaleDimensions();return {left:-q.width*this.props.cropRect.left,top:-q.height*this.props.cropRect.top};},getClipCropRectangle:function(){var q=this.getContainerDimensions(),r=this.getCropDimensions(),s=this.getContainerPosition(),t=this.getCropPosition(),u=Math.max(s.left,t.left),v=Math.max(s.top,t.top),w=Math.min(s.top+q.height,t.top+r.height),x=Math.min(s.left+q.width,t.left+r.width);return {left:u,top:v,width:x-u,height:w-v};},getClipCropPosition:function(){var q=this.getClipCropRectangle();return {left:q.left,top:q.top};},getClipCropDimensions:function(){var q=this.getClipCropRectangle();return {width:q.width,height:q.height};},getClipScalePosition:function(){var q=this.getScalePosition(),r=this.getClipCropPosition(),s=this.getCropPosition();return {left:q.left+(s.left-r.left),top:q.top+(s.top-r.top)};},getClipScaleDimensions:function(){return this.getScaleDimensions();},areDimensionsEqual:function(q,r){return q.width===r.width&&q.height===r.height;},shouldAddAllNodesAndStyles:function(){return this.props.animated;},hasCrop:function(){if(this.shouldAddAllNodesAndStyles())return true;var q=this.getContainerDimensions(),r=this.getClipCropDimensions(),s=this.getClipScaleDimensions();if(this.areDimensionsEqual(q,r)||this.areDimensionsEqual(r,s))return false;return true;},hasContainer:function(){if(this.shouldAddAllNodesAndStyles()||this.hasInsetBorder())return true;var q=this.getContainerDimensions(),r=this.getClipScaleDimensions();if(this.areDimensionsEqual(q,r))return false;return true;},hasInsetBorder:function(){return this.shouldAddAllNodesAndStyles()||this.props.insetBorderColor;},applyPositionStyle:function(q,r){if(this.shouldAddAllNodesAndStyles()||r.left)q.left=Math.round(r.left);if(this.shouldAddAllNodesAndStyles()||r.top)q.top=Math.round(r.top);},applyDimensionsStyle:function(q,r){q.width=Math.round(r.width);q.height=Math.round(r.height);},applyBorderRadiusStyle:function(q){if(this.shouldAddAllNodesAndStyles()||this.props.borderRadius)q.borderRadius=this.props.borderRadius||0;},getScaleStyle:function(){var q={},r=this.getClipCropDimensions(),s=this.getClipScaleDimensions();if(this.shouldAddAllNodesAndStyles()||!this.areDimensionsEqual(r,s)){this.applyPositionStyle(q,this.getClipScalePosition());}else this.applyPositionStyle(q,this.getClipCropPosition());this.applyDimensionsStyle(q,this.getClipScaleDimensions());this.applyBorderRadiusStyle(q);return q;},getCropStyle:function(){var q={};this.applyPositionStyle(q,this.getClipCropPosition());this.applyDimensionsStyle(q,this.getClipCropDimensions());this.applyBorderRadiusStyle(q);return q;},getInsetBorderStyle:function(){var q={borderColor:this.props.insetBorderColor||'transparent'};this.applyPositionStyle(q,this.getClipCropPosition());this.applyDimensionsStyle(q,this.getClipCropDimensions());this.applyBorderRadiusStyle(q);return q;},getContainerStyle:function(){var q={};this.applyDimensionsStyle(q,this.getContainerDimensions());this.applyBorderRadiusStyle(q);return q;},getScale:function(){var q=this.getScaleStyle(),r=q.width,s=q.height;q=babelHelpers._extends({},q);delete q.width;delete q.height;return (l.createElement('img',babelHelpers._extends({},this.props,{alt:this.props.alt,className:k(this.props.className,"_56wb"+(this.shouldAddAllNodesAndStyles()?' '+"_56t5":'')),src:this.props.src,style:babelHelpers._extends({},this.props.style||{},q),width:r,height:s})));},getCrop:function(){var q=this.getScale();if(!this.hasCrop())return q;return (l.createElement('div',{className:"_56ma"+(this.shouldAddAllNodesAndStyles()?' '+"_56t5":''),style:this.getCropStyle()},q));},getInsetBorder:function(){if(!this.hasInsetBorder())return null;return (l.createElement('div',{className:"_56lv"+(this.shouldAddAllNodesAndStyles()?' '+"_56t5":''),style:this.getInsetBorderStyle()}));},getContainer:function(){var q=this.getCrop();if(!this.hasContainer())return q;var r=this.getInsetBorder();return (l.createElement('div',{className:"_56jj"+(this.shouldAddAllNodesAndStyles()?' '+"_56t5":''),'data-skipchecker':null,style:this.getContainerStyle()},q,r));},render:function(){var q=this.getSrcDimensions();if(!q)return l.createElement('span',{'data-skipchecker':null});return this.getContainer();}});f.exports=p;},null);
__d('Facepile.react',['joinClasses','Link.react','Pixelz.react','React','List.react','cx'],function a(b,c,d,e,f,g,h,i,j,k,l,m){if(c.__markCompiled)c.__markCompiled();var n=k.PropTypes,o={small:24,medium:32,large:50},p=k.createClass({displayName:'Facepile',propTypes:{className:n.string,onFaceClick:n.func,onComponentDidMount:n.func,profiles:n.arrayOf(n.shape({URL:n.string,name:n.string.isRequired,uniqueID:n.number.isRequired,profilePicURI:n.string.isRequired})).isRequired,size:n.oneOf([28,'small','medium','large']).isRequired},_onFaceClick:function(q,r){if(this.props.onFaceClick)this.props.onFaceClick(q,r);},componentDidMount:function(){if(this.props.onComponentDidMount)this.props.onComponentDidMount();},getPicSize:function(){return o[this.props.size]||this.props.size;},renderFace:function(q,r){var s=this.getPicSize();return (k.createElement('li',{className:"_43q7",key:q.uniqueID,onClick:this._onFaceClick.bind(this,q,r)},k.createElement(i,{href:q.URL,'aria-label':q.name,'data-hover':'tooltip',className:"_2rt_ link",'data-ignoreclass':"_2rt_",'data-tooltip-alignh':'left'},k.createElement(j,{src:q.profilePicURI,width:s,height:s,className:'img'}))));},render:function(){var q=h(this.props.className,"_43qm"+(this.props.size==28?' '+"_3cxu":'')+(this.props.size=='small'?' '+"_43q9":'')+(this.props.size=='medium'?' '+"_43qc":'')+(this.props.size=='large'?' '+"_43qf":''));return (k.createElement('div',{className:q,style:this.props.style},k.createElement(l,{className:"_4cg3",direction:'horizontal',spacing:'none',border:'none'},this.props.profiles.map(this.renderFace))));}});f.exports=p;},null);
__d('NotificationPermissionNotice.react',['Event','Keys','React','ReactLayeredComponentMixin','XUIAmbientNUX.react','cx','fbt'],function a(b,c,d,e,f,g,h,i,j,k,l,m,n){if(c.__markCompiled)c.__markCompiled();var o=[],p=j.PropTypes,q=j.createClass({displayName:'NotificationPermissionNotice',mixins:[k],propTypes:{onHide:p.func.isRequired,shortText:p.bool},componentDidMount:function(){o.push(h.listen(window,'mousedown',this.props.onHide));o.push(h.listen(window,'keydown',(function(event){if(event.keyCode===i.ESC)this.props.onHide();}).bind(this)));},componentWillUnmount:function(){while(o.length>0){var r=o.pop();r.remove();}},renderLayers:function(){var r=this.props.shortText?n._("Click the lock to give Chrome permission to send you desktop notifications."):n._("If you change your mind, click the lock to give Chrome permission to send you desktop notifications.");return {nux:j.createElement(l,{contextRef:(function(){return this.refs.noticeAnchor;}).bind(this),shown:true,position:'below',onCloseButtonClick:this.props.onHide},r)};},render:function(){return (j.createElement('span',{ref:'noticeAnchor',className:"_1_i1"}));}});f.exports=q;},null);
__d('Spotlight',['Arbiter','ArbiterMixin','DOM','JSXDOM','Layer','LayerAutoFocus','LayerTabIsolation','ModalLayer','Vector','classWithMixins','csx','cx','joinClasses','mixin'],function a(b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u){if(c.__markCompiled)c.__markCompiled();var v,w;v=babelHelpers.inherits(x,q(l,u(i)));w=v&&v.prototype;function x(z,aa){'use strict';w.constructor.call(this,z,aa);this.stageMinSize=new p(0,0);this.stagePadding=new p(0,0);}x.prototype._buildWrapper=function(z,aa){'use strict';var ba=t("_n8 _3qx",z.rootClassName);return (k.div({className:ba},k.div({className:"_n9"},aa)));};x.prototype._getDefaultBehaviors=function(){'use strict';return w._getDefaultBehaviors.call(this).concat([y,m,n,o]);};x.prototype.getContentRoot=function(){'use strict';if(!this._content)this._content=j.find(this.getRoot(),"div._n3");return this._content;};x.prototype.configure=function(z){'use strict';if(z.stageMinSize)this.stageMinSize=z.stageMinSize;if(z.stagePadding)this.stagePadding=z.stagePadding;};x.prototype.onContentLoaded=function(){'use strict';this.inform('content-load');};x.prototype.updatePermalink=function(z){'use strict';this.inform('permalinkchange',z);};Object.assign(x.prototype,{stageMinSize:null,stagePadding:null});function y(z){'use strict';this._layer=z;}y.prototype.enable=function(){'use strict';this._subscription=this._layer.subscribe(['show','hide'],function(z,aa){if(z==='show'){h.inform('layer_shown',{type:'Spotlight'});}else h.inform('layer_hidden',{type:'Spotlight'});});};y.prototype.disable=function(){'use strict';this._subscription.unsubscribe();this._subscription=null;};Object.assign(y.prototype,{_subscription:null});f.exports=x;},null);
__d('Spotlight.react',['LayerHideOnBlur','LayerHideOnEscape','ReactLayer','Spotlight'],function a(b,c,d,e,f,g,h,i,j,k){if(c.__markCompiled)c.__markCompiled();var l=j.createClass({getDefaultEnabledBehaviors:function(){return {hideOnBlur:h,hideOnEscape:i};},createLayer:function(m){var n=this.enumerateBehaviors(this.props.behaviors),o={addedBehaviors:n,rootClassName:this.props.rootClassName},p=new k(o,m);p.conditionShow(this.props.shown);if(this.props.onBeforeHide)p.subscribe('beforehide',this.props.onBeforeHide);if(this.props.onHide)p.subscribe('hide',this.props.onHide);return p;},receiveProps:function(m){this.layer.conditionShow(m.shown);}});f.exports=l;},null);
__d('NotificationPermissionRequest.react',['Spotlight.react','React','ReactLayeredComponentMixin','cx'],function a(b,c,d,e,f,g,h,i,j,k){if(c.__markCompiled)c.__markCompiled();var l=i.PropTypes,m=i.createClass({displayName:'NotificationPermissionRequest',mixins:[j],propTypes:{onHide:l.func.isRequired},renderLayers:function(){return {spotlight:i.createElement(h,{shown:true,onHide:this.props.onHide},i.createElement('div',{className:"_n3"}))};},render:function(){return i.createElement('span',null);}});f.exports=m;},null);
__d('FlexibleBlock.react',['LeftRight.react','React','cx','invariant','keyMirror'],function a(b,c,d,e,f,g,h,i,j,k,l){if(c.__markCompiled)c.__markCompiled();var m=l({left:true,right:true});function n(p){!(p.flex&&p.flex in o.FLEX)?k(0):undefined;!(p.children&&p.children.length===2)?k(0):undefined;}var o=i.createClass({displayName:'FlexibleBlock',render:function(){n(this.props);var p,q=this.props.children[0],r=this.props.children[1],s=this.props.flex==m.left,t;if(s){t=q;p=h.DIRECTION.right;}else{t=r;p=h.DIRECTION.left;}var u=i.createElement('div',{className:"_42ef"},t);return (i.createElement(h,babelHelpers._extends({},this.props,{direction:p}),s?u:this.props.children[0],s?this.props.children[1]:u));}});o.FLEX=m;f.exports=o;},null);
__d('ReadToggle.react',['React','cx','emptyFunction','joinClasses'],function a(b,c,d,e,f,g,h,i,j,k){'use strict';if(c.__markCompiled)c.__markCompiled();var l=h.PropTypes,m=h.createClass({displayName:'ReadToggle',propTypes:{isRead:l.bool.isRequired,onClick:l.func,readLabel:l.node,unreadLabel:l.node},getDefaultProps:function(){return {onClick:j};},render:function(){if(this.props.isRead){return (h.createElement('div',{'aria-label':this.props.readLabel,className:this._getClasses(),'data-hover':'tooltip','data-tooltip-alignh':'center',onClick:this.props.onClick}));}else return (h.createElement('div',{'aria-label':this.props.unreadLabel,className:this._getClasses(),'data-hover':'tooltip','data-tooltip-alignh':'center',onClick:this.props.onClick,role:'button',tabIndex:'0'}));},_getClasses:function(){return k(this.props.className,(!this.props.isRead?"_5c9q":'')+(this.props.isRead?' '+"_5c9_":''));}});f.exports=m;},null);
__d('VaultBoxURI',['URI'],function a(b,c,d,e,f,g,h){if(c.__markCompiled)c.__markCompiled();var i={PHOTOS_SYNCED:'photos_synced',isVaultBoxURI:function(j){var k=new RegExp("\/"+i.PHOTOS_SYNCED+"\/?$");return j.getPath().match(k)&&j.getQueryData().hasOwnProperty('view_image');},isVaultArchiveURI:function(j){var k=new RegExp("\/"+i.PHOTOS_SYNCED+"\/?$");return j.getPath().match(k);},getSyncedTabURI:function(){return new h('/me/'+i.PHOTOS_SYNCED).getQualifiedURI();}};f.exports=i;},null);
__d('NotificationListItem.react',['AsyncResponse','BizSiteIdentifier.brands','BanzaiLogger','Banzai','CloseButton.react','Event','FlexibleBlock.react','Image.react','ImageBlock.react','Keys','List.react','NotificationPhotoThumbnail','NotificationTokens','NotificationURI','NotificationUserActions','React','TextWithEntities.react','ReadToggle.react','Timestamp.react','VaultBoxURI','XUIButton.react','PopoverMenu.react','ReactXUIMenu','cx','invariant','fbt'],function a(b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,aa,ba,ca,da,ea,fa,ga){if(c.__markCompiled)c.__markCompiled();var ha=da.Item;function ia(la,ma){return w.createElement('span',{className:'fwb'},la);}function ja(la){return !!(la&&la.id&&!la.is_facebook_app);}var ka=w.createClass({displayName:'NotificationListItem',getInitialState:function(){return {showingOptions:false,negativeFeedbackConfirmation:null,canReportAsSpam:false,spamReportConfirmation:null,sendingFeedback:false,mayUndoHide:false,notifOptionConfirmation:null,isBizSite:i.isBizSite()};},_onKeyDownItem:function(la){if(m.getKeyCode(la.nativeEvent)==q.RETURN)this._markItemRead();},_markItemReadIfUnreadFromReadButton:function(){if(!this.props.isRead)v.setNextIsFromReadButton(true);this._markItemReadIfUnread();},_markItemReadIfUnread:function(){!this.props.isRead&&this._markItemRead();},_markItemRead:function(){v.markNotificationsAsRead([this.props.alert_id]);},_onFeedbackError:function(la){h.defaultErrorHandler(la);this.setState({sendingFeedback:false});},_onHideSuccess:function(la){var ma=la.getPayload();!ma.confirmation?fa(0):undefined;this.setState({negativeFeedbackConfirmation:ma.confirmation,canReportAsSpam:ma.canReportAsSpam,sendingFeedback:false,showingOptions:true});},_onHideAppSuccess:function(la){var ma=la.getPayload(),na=ma.confirmation,oa=ma.canReportAsSpam;!na?fa(0):undefined;this.setState({negativeFeedbackConfirmation:na,canReportAsSpam:oa,mayUndoHide:true,sendingFeedback:false,showingOptions:true});},_onSpamReportSuccess:function(la){var ma=la.getPayload().spamReportConfirmation;this.setState({negativeFeedbackConfirmation:null,spamReportConfirmation:ma,sendingFeedback:false});},_onHide:function(){v.markNotificationAsHidden(this.props.alert_id,this._onHideSuccess,this._onFeedbackError);this.setState({sendingFeedback:true,mayUndoHide:true});},_onShowSuccess:function(){this.setState({notifOptionConfirmation:null,negativeFeedbackConfirmation:null,sendingFeedback:false,showingOptions:false});},_onShow:function(){var la=this.props.negative?this.props.negative.subscription_level:null;v.markNotificationAsVisible(this.props.alert_id,la,this._onShowSuccess,this._onFeedbackError);this.setState({sendingFeedback:true});},_onReportSpam:function(){v.markNotificationAsSpam(this.props.alert_id,this._onSpamReportSuccess,this._onFeedbackError);this.setState({sendingFeedback:true});},_markAppAsHidden:function(){v.markAppAsHidden(this.props.alert_id,this.props.application.id,this._onHideAppSuccess,this._onFeedbackError);this.setState({sendingFeedback:true});},_markAppAsVisible:function(){v.markAppAsVisible(this.props.alert_id,this.props.application.id,(function(){this.setState({negativeFeedbackConfirmation:null,sendingFeedback:false,showingOptions:false,mayUndoHide:false});}).bind(this),this._onFeedbackError);this.setState({sendingFeedback:true});},_renderAttachedImage:function(la){if(la)return (w.createElement(o,{src:la.uri,className:"_42td",'aria-hidden':true}));return w.createElement('span',null);},_getModifiedTrackingString:function(la){return JSON.stringify(babelHelpers._extends({},JSON.parse(this.props.tracking),la));},_onClickCloseButton:function(){if(this.props.useChevron){this.showCloseOptionOnMenuClose=true;}else this.setState({showingOptions:true});},_onCancelNegativeFeedback:function(){this.setState({showingOptions:false});},_getChevron:function(){if(!this.props.menu_options.length)return null;var la="_1_0c"+(' '+"_55m9")+(this.props.chevronType==='persistent'?' '+"_51v8":''),ma=w.createElement(da,null,this.props.menu_options?this.props.menu_options.map((function(oa){return (w.createElement(ha,{onclick:(function(){this._onClickNotifOption(oa.server_action);}).bind(this),key:oa.client_action+oa.server_action},w.createElement('div',{className:"_18qh"},oa.text)));}).bind(this)):null),na=w.createElement('a',null,w.createElement(ca,{alignh:'right',menu:ma,className:la,onShow:this._onChevronShow,onHide:this._onChevronHide},w.createElement('div',{className:"_1_0d"})));return na;},shouldComponentUpdate:function(la,ma){return (this.props.visible!==la.visible||this.props.isRead!==la.isRead||this.props.timestamp!==la.timestamp||this.props.paused!==la.paused||this.state.showingOptions!==ma.showingOptions||this.state.sendingFeedback!==ma.sendingFeedback||this.state.canReportAsSpam!==ma.canReportAsSpam||this.state.spamReportConfirmation!==ma.spamReportConfirmation);},componentWillReceiveProps:function(la){if(this.props.paused&&!la.paused&&!this.props.visible&&this.state.mayUndoHide)this.setState({mayUndoHide:false});},_onChevronHide:function(){this.props.onChevronHide();this._logChevronEvent('close');if(this.showCloseOptionOnMenuClose){this.showCloseOptionOnMenuClose=false;this._turnOff();}},_turnOff:function(){var la=ja(this.props.application)?this._markAppAsHidden:this._onHide;la();},_onChevronShow:function(){this.props.onChevronShow();this._logChevronEvent('open');var la={notif_type:this.props.notif_type};k.post('notif_chevron_on_click',la);},_logChevronEvent:function(la){var ma={event:la,notif_type:this.props.notif_type,notif_id:parseInt(t.untokenizeIDs([this.props.alert_id])[0],10)};j.log('NotifJewelMenuLoggerConfig',ma);},_onNotifOptionSuccess:function(la){this.setState({showingOptions:true,sendingFeedback:false,notifOptionConfirmation:la});},_onClickNotifOption:function(la){this.setState({sendingFeedback:true,mayUndoHide:true});v.sendNotifOption(this.props.alert_id,this._onNotifOptionSuccess,this._onFeedbackError,la);},_undoNotifOption:function(la){this.setState({sendingFeedback:true});v.undoNotifOption(this.props.alert_id,this._onShowSuccess,this._onFeedbackError,la);},render:function(){if(!this.props.visible&&!this.state.mayUndoHide)return w.createElement('li',{className:"_4_62"});var la=this.props.negative,ma=this.props.negativeTracking,na="_33c"+(!this.props.isRead?' '+"_4af":'')+(this.state.showingOptions?' '+"_4ag":'')+(this.state.sendingFeedback?' '+"_4m8s":'');if(this.state.negativeFeedbackConfirmation){var oa=this.state.negativeFeedbackConfirmation,pa=null,qa=null;if(this.state.canReportAsSpam)if(!this.props.useChevron){pa=w.createElement('span',null,w.createElement('span',{className:'mhs'},'Â·'),w.createElement('a',{href:'#',onClick:this._onReportSpam},ga._("Report app for spam")));}else qa=w.createElement(r,{border:'none',spacing:'small',className:"_1v4c"},w.createElement('li',null,w.createElement('a',{href:'#',onClick:this._onReportSpam,className:'mls'},ga._("Report app for spam"))));var ra=ja(this.props.application)?this._markAppAsVisible:this._onShow,sa=!this.props.useChevron?w.createElement('a',{href:'#',onClick:ra,className:'mls'},ga._("Undo")):null;return (w.createElement('li',{className:na,'data-gt':this.props.tracking},w.createElement('div',{className:"_4ai"},w.createElement(x,{interpolator:ia,ranges:oa.ranges,aggregatedranges:oa.aggregated_ranges,text:oa.text}),sa,pa),qa));}var ta=this.state.spamReportConfirmation;if(ta)return (w.createElement('li',{className:na,'data-gt':this.props.tracking},w.createElement('div',{className:"_4ai"},w.createElement(x,{interpolator:ia,ranges:ta.ranges,aggregatedranges:ta.aggregated_ranges,text:ta.text}))));if(this.state.notifOptionConfirmation){oa=this.state.notifOptionConfirmation;return (w.createElement('li',{className:na,'data-gt':this.props.tracking},w.createElement('div',{className:"_4ai"},w.createElement(x,{interpolator:ia,ranges:oa.ranges,aggregatedranges:oa.aggregated_ranges,text:oa.text&&oa.text.text?oa.text.text:''}),w.createElement('a',{href:'#',onClick:(function(){this._undoNotifOption(oa.undo_action);}).bind(this),className:'mls'},ga._("Undo"))),w.createElement(r,{border:'none',spacing:'small',className:"_1v4c"},oa.follow_up_options.map?oa.follow_up_options.map((function(rb){return (w.createElement('li',{key:rb.client_action+rb.server_action},w.createElement('a',{onClick:(function(){this._onClickNotifOption(rb.server_action);}).bind(this),href:'#',className:'mls'},rb.text)));}).bind(this)):null)));}if(this.state.showingOptions&&!this.props.useChevron){var ua=ja(this.props.application)?this._markAppAsHidden:this._onHide;return (w.createElement('li',{className:na,'data-gt':this.props.tracking},w.createElement('div',{className:"_4ai"},w.createElement('div',null,w.createElement(x,{interpolator:ia,ranges:la.confirm_question.ranges,aggregatedranges:la.confirm_question.aggregated_ranges,text:la.confirm_question.text})),w.createElement('div',{className:'mts'},w.createElement(ba,{'data-gt':this._getModifiedTrackingString(ma.confirm),href:{url:'#'},label:la.turn_off,use:'confirm',onClick:ua,disabled:this.state.sendingFeedback}),w.createElement(ba,{'data-gt':this._getModifiedTrackingString(ma.cancel),href:{url:'#'},label:ga._("Keep On"),onClick:this._onCancelNegativeFeedback,disabled:this.state.sendingFeedback})))));}var va=null;if(this.props.title)va=w.createElement(x,{interpolator:ia,ranges:this.props.title.ranges,aggregatedranges:this.props.title.aggregated_ranges,text:this.props.title.text,renderEmoji:true,renderEmoticons:true});var wa=null,xa=null;if(la){var ya=this._onClickCloseButton,za;za=this._getModifiedTrackingString(ma.click);var ab="_4ah"+(' '+"_55m9");wa=w.createElement(l,{className:ab,'data-gt':za,size:'medium',tooltip:la.button_tooltip,onClick:ya,ref:'closeButton'});}var bb=u.localize(this.props.url),cb=null;if(!this.props.noPhotoPreviews)cb=s.getThumbnail(this.props.attachments,this.props.attached_story,this.props.feedback_context);var db=cb&&u.snowliftable(bb),eb=u.isVaultSetURI(bb),fb=u.isAlbumDraftRecoveryDialogURI(bb),gb=(this.props.useChevron?"_55ma":'')+(' '+"_55m9"),hb=w.createElement(y,{className:gb,isRead:!!this.props.isRead,onClick:this._markItemReadIfUnreadFromReadButton,readLabel:ga._("Read"),unreadLabel:ga._("Mark as Read")}),ib=null;if(this.props.useChevron){wa=null;ib=this._getChevron();}var jb=db||eb||fb?bb:this.props.ajaxify_url,kb=null,lb=null,mb=eb?aa.getSyncedTabURI().toString():bb;if(db){kb='theater';}else if(fb){kb='async-post';}else if(eb||jb)kb='dialog';var nb=null,ob=this.props.actors[0];if(ob)nb=w.createElement(o,{src:ob.profile_picture.uri,className:(!this.props.isNotifsPage?"_33h":'')+(this.props.isNotifsPage?' '+"_12u1":'')});var pb=false;this.props.attachments.forEach(function(rb){if(pb)return;pb=rb.style_list.indexOf('notification_target')>=0||rb.style_list.indexOf('question')>=0;if(pb)return;});var qb=w.createElement('div',null,hb,wa,ib);return (w.createElement('li',{className:na,'data-gt':this.props.tracking,onMouseLeave:xa},w.createElement('div',{className:'anchorContainer'},w.createElement('a',{href:mb,ajaxify:jb,className:"_33e"+(this.props.useChevron?' '+"_1_0e":''),rel:kb,onClick:lb,onMouseDown:this._markItemRead,onKeyDown:this._onKeyDownItem},w.createElement(p,null,nb,w.createElement(n,{flex:n.FLEX.left},w.createElement('div',{className:"_4l_v"},va,w.createElement(p,{className:"_33f"+(this.state.isBizSite?' '+"_2g48":'')},w.createElement(o,{className:"_10cu",src:this.props.icon.uri}),w.createElement('span',null,w.createElement(z,{shorten:this.props.shortenTimestamp,time:this.props.timestamp.time,text:this.props.timestamp.text,verbose:this.props.timestamp.verbose,className:"_33g"})))),this._renderAttachedImage(cb)))),qb)));}});f.exports=ka;},null);
__d('NotificationListPropTypes',['React'],function a(b,c,d,e,f,g,h){'use strict';if(c.__markCompiled)c.__markCompiled();var i=h.PropTypes,j={negativeTracking:i.object,tracking:i.string,useChevron:i.bool,chevronType:i.string,notifs:i.object,afterScroll:i.func,onChevronShow:i.func,onChevronHide:i.func,canFetchMore:i.bool,hiddenState:i.object,readState:i.object,showingChevron:i.bool,paused:i.bool,maxHeight:i.number,shouldScroll:i.bool,upsell:i.object};f.exports=j;},null);
__d('NotificationJewelList.react',['Animation','DOMContainer.react','Event','LoadingIndicator.react','NotificationListPropTypes','NotificationListItem.react','React','ReactDOM','ScrollableArea.react','Vector','cx','debounce','fbt','getObjectValues','isEmpty'],function a(b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v){if(c.__markCompiled)c.__markCompiled();var w=160,x=530,y=40,z=64,aa=430,ba=n.createClass({displayName:'NotificationJewelList',propTypes:l,_isLoadingIndicatorVisible:function(){var ca=this.refs.loading;if(!ca)return false;var da=o.findDOMNode(this.refs.scrollable),ea=q.getElementDimensions(da).y;if(ea===0)return false;var fa=q.getElementPosition(da).y+ea,ga=q.getElementPosition(o.findDOMNode(ca)).y;ga-=y;return ga<fa;},_calculateHeight:function(){var ca=q.getViewportDimensions().y,da=Math.min(this.props.maxHeight||x,ca-w);if(this.props.upsell)return Math.max(da-z,0);return da;},_keepOnLoading:function(){if(this.isMounted())this.props.afterScroll(this._isLoadingIndicatorVisible());},_renderItems:function(){return u(this.props.notifs).map((function(ca){var da=ca.alert_id;return (n.createElement(m,babelHelpers._extends({key:da,visible:!this.props.hiddenState[da],isRead:this.props.readState[da],negativeTracking:this.props.negativeTracking,shortenTimestamp:this.props.shortenTimestamp,useChevron:this.props.useChevron,chevronType:this.props.chevronType,onChevronShow:this.props.onChevronShow,onChevronHide:this.props.onChevronHide,paused:this.props.paused,parent:this},ca)));}).bind(this));},componentDidMount:function(){var ca=o.findDOMNode(this.refs.scrollable);j.listen(window,'resize',s((function(){if(!v(this.props.notifs))new h(ca).to('height',this._calculateHeight()+'px').duration(100).go();}).bind(this)));},componentDidUpdate:function(ca){if(this.props.paused&&!ca.paused)if(this.props.shouldScroll&&this.refs.scrollable)this.refs.scrollable.getArea().scrollToTop(false);setTimeout(this._keepOnLoading,0);},render:function(){var ca=this.props.notifs,da=null,ea=null,fa=aa,ga=null;if(!v(ca)){da=n.createElement('ul',{'data-gt':this.props.tracking},this._renderItems());ea=this._calculateHeight();}else if(!this.props.canFetchMore)da=n.createElement('div',{className:"_572e"},t._("No new notifications"));if(this.props.canFetchMore)ga=n.createElement(k,{color:'white',size:'small',ref:'loading',className:"_33i"});var ha=null;if(this.props.upsell){var ia=this.props.upsell.module;ha=n.createElement(ia,this.props.upsell.props);}var ja="_50-t"+(this.props.showingChevron?' '+"_2iy1":'');return (n.createElement('div',{className:ja},n.createElement(p,{ref:'scrollable',width:fa,height:ea,fade:true,persistent:true,onScroll:s(this._keepOnLoading)},da,ga),ha));}});f.exports=ba;},null);
__d('NotificationList.react',['NotificationConstants','NotificationHiddenState','NotificationSeenState','NotificationStore','NotificationUpdates','NotificationUserActions','React','getObjectValues','isEmpty'],function a(b,c,d,e,f,g,h,i,j,k,l,m,n,o,p){if(c.__markCompiled)c.__markCompiled();var q=n.PropTypes,r=h.PayloadSourceType.LIVE_SEND,s=n.createClass({displayName:'NotificationList',propTypes:{businessID:q.string,hasEverBeenOpened:q.bool,maxHeight:q.number,negativeTracking:q.object,paused:q.bool,tracking:q.string,useChevron:q.bool,chevronType:q.string,numPerPage:q.number.isRequired,listRenderer:q.func.isRequired,upsell:q.object,endpoint:q.string},getInitialState:function(){this._currentlyFetching=false;this._pendingNotifs={};this._shouldScroll=false;return {canFetchMore:true,notifs:{},hiddenState:{},readState:{},showingChevron:false};},componentWillMount:function(){k.registerEndpoint(this.props.endpoint);k.setBusinessID(this.props.businessID);this._subscriptions=[l.subscribe('notifications-updated',(function(t,u){if(u.source==r&&!p(u.updates)){this._shouldScroll=true;if(this.props.paused!==false)this._pendingNotifs=babelHelpers._extends({},this._pendingNotifs,u.updates);return;}this._fetchAndUpdate(k.getCount(this.props.endpoint));}).bind(this)),l.subscribe(['hidden-state-updated','read-state-updated'],(function(t,u){if(t=='hidden-state-updated'){if(u.source!==r||!this.props.paused){var v={};Object.keys(u.updates).forEach(function(x){v[x]=i.isHidden(x);});this.setState({hiddenState:babelHelpers._extends({},this.state.hiddenState,v)});}}else{var w={};Object.keys(u.updates).forEach(function(x){w[x]=j.isRead(x);});this.setState({readState:babelHelpers._extends({},this.state.readState,w)});}}).bind(this))];},componentWillUnmount:function(){if(this._subscriptions){while(this._subscriptions.length)this._subscriptions.pop().unsubscribe();this._subscriptions=null;}},_getNotifsWithCurrentOrder:function(t){var u=Object.keys(this.state.notifs),v=Object.keys(t).filter((function(x){return !this.state.notifs[x];}).bind(this));u=u.concat(v);var w={};u.forEach((function(x){if(this._pendingNotifs[x]){if(this.state.notifs[x])w[x]=this.state.notifs[x];}else w[x]=t[x];}).bind(this));return w;},_fetchAndUpdate:function(t){this._currentlyFetching=true;k.getNotifications(t,(function(u){var v=p(this._pendingNotifs)?u:this._getNotifsWithCurrentOrder(u),w={},x={};o(v).forEach(function(y){var z=y.alert_id;if(!this.state||!this.state.readState[z])w[z]=j.isRead(z);if(!this.state||!this.state.hiddenState[z])x[z]=i.isHidden(z);});this._currentlyFetching=false;this.setState({notifs:v,canFetchMore:k.canFetchMore(this.props.endpoint)||k.getCount(this.props.endpoint)!==Object.keys(v).length,readState:babelHelpers._extends({},this.state.readState,w),hiddenState:babelHelpers._extends({},this.state.hiddenState,x)});}).bind(this),this.props.endpoint);},_fetchAndUpdateAll:function(){var t={};Object.keys(this._pendingNotifs).forEach((function(u){var v=i.isHidden(u);if(v!=this.state.hiddenState[u])t[u]=i.isHidden(u);}).bind(this));if(!p(t))this.setState({hiddenState:babelHelpers._extends({},this.state.hiddenState,t)});this._pendingNotifs={};this._fetchAndUpdate(k.getCount(this.props.endpoint));},_fetchNextSet:function(){if(!this._currentlyFetching){var t=Object.keys(this.state.notifs).length;this._fetchAndUpdate(t+this.props.numPerPage);}},_onScrollAndUpdate:function(t){if(this._currentlyFetching||!this.state.canFetchMore)return;if(t)this._fetchNextSet();},_onChevronShow:function(){this.setState({showingChevron:true});},_onChevronHide:function(){this.setState({showingChevron:false});},_updateNotifInContainer:function(t){if(t.length>this.props.numPerPage){this._fetchAndUpdate(t.length);}else this._fetchNextSet();return;},componentDidUpdate:function(t){var u=j.getUnseenIDs();if(!p(this._pendingNotifs))u=u.filter((function(v){return !this._pendingNotifs[v];}).bind(this));if(u.length&&this.props.paused)m.markNotificationsAsSeen(u);if(!t.hasEverBeenOpened&&this.props.hasEverBeenOpened)this._updateNotifInContainer(u);if(t.paused&&!this.props.paused){this._shouldScroll=false;setTimeout(this._fetchAndUpdateAll,0);return;}},render:function(){var t=this.props.listRenderer;return (n.createElement(t,{hasEverBeenOpened:this.props.hasEverBeenOpened,paused:this.props.paused,tracking:this.props.tracking,negativeTracking:this.props.negativeTracking,shortenTimestamp:this.props.shortenTimestamp,businessID:this.props.businessID,maxHeight:this.props.maxHeight,useChevron:this.props.useChevron,chevronType:this.props.chevronType,notifs:this.state.notifs,afterScroll:this._onScrollAndUpdate,onChevronShow:this._onChevronShow,onChevronHide:this._onChevronHide,canFetchMore:this.state.canFetchMore,hiddenState:this.state.hiddenState,readState:this.state.readState,showingChevron:this.state.showingChevron,shouldScroll:this._shouldScroll,upsell:this.props.upsell||null,isRHC:this.props.isRHC}));}});f.exports=s;},null);
__d('legacy:ScrollAwareDOM',['ScrollAwareDOM'],function a(b,c,d,e){if(c.__markCompiled)c.__markCompiled();b.ScrollAwareDOM=c('ScrollAwareDOM');},3);
__d('LinkshimAsyncLink',['$','AsyncSignal','DOM','ErrorUtils','UserAgent_DEPRECATED','LinkshimHandlerConfig'],function a(b,c,d,e,f,g,h,i,j,k,l,m){if(c.__markCompiled)c.__markCompiled();var n={grabTokenFromContextForAnchor:function(o){var p=o;while(!p.getAttribute('data-xt')){if(!p.parentNode){k.reportError(new Error('Missing Tracking Token: LinkshimAsyncLink.grabTokenFromContextFor..'));return;}p=p.parentNode;}var q=p.getAttribute('data-xt'),r=o.href.split('#'),s=r[0].indexOf('?')!==-1;if(!s){o.href+='?xt='+q;}else o.href=r[0]+'&xt='+q+(r[1]||'');},swap:function(o,p){var q=l.ie()<=8;if(q){var r=j.create('wbr',{},null);j.appendContent(o,r);}o.href=p;if(q)j.remove(r);},referrer_log:function(o,p,q){var r=h('meta_referrer');r.content=m.switched_meta_referrer_policy;n.swap(o,p);setTimeout(function(){r.content=m.default_meta_referrer_policy;new i(q,{}).send();},100);}};f.exports=n;},null);
__d('legacy:dom-asynclinkshim',['LinkshimAsyncLink'],function a(b,c,d,e){if(c.__markCompiled)c.__markCompiled();b.LinkshimAsyncLink=c('LinkshimAsyncLink');},3);
__d('Visibility',['TimeSlice','mixInEventEmitter'],function a(b,c,d,e,f,g,h,i){if(c.__markCompiled)c.__markCompiled();var j=undefined,k=undefined;if(typeof document.hidden!=='undefined'){j='hidden';k='visibilitychange';}else if(typeof document.mozHidden!=='undefined'){j='mozHidden';k='mozvisibilitychange';}else if(typeof document.msHidden!=='undefined'){j='msHidden';k='msvisibilitychange';}else if(typeof document.webkitHidden!=='undefined'){j='webkitHidden';k='webkitvisibilitychange';}function l(){return j?document[j]:false;}var m={HIDDEN:'hidden',VISIBLE:'visible',isHidden:l};i(m,{visible:true,hidden:true});if(document.addEventListener&&k)document.addEventListener(k,h.guard(function n(){m.emit(l()?m.HIDDEN:m.VISIBLE);},'visibility change'));f.exports=m;},null);
__d("coalesce",[],function a(b,c,d,e,f,g){if(c.__markCompiled)c.__markCompiled();function h(){for(var i=0;i<arguments.length;++i)if(arguments[i]!=null)return arguments[i];return null;}f.exports=h;},null);
__d('whitelistObjectKeys',[],function a(b,c,d,e,f,g){if(c.__markCompiled)c.__markCompiled();function h(i,j){var k={},l=Array.isArray(j)?j:Object.keys(j);for(var m=0;m<l.length;m++)if(typeof i[l[m]]!=='undefined')k[l[m]]=i[l[m]];return k;}f.exports=h;},null);
__d('HashtagParser',['URLMatcher','getHashtagRegex'],function a(b,c,d,e,f,g,h,i){if(c.__markCompiled)c.__markCompiled();var j=100,k=30,l=/@\[([0-9]+):([0-9]+):((?:[^\\\]]*(?:\\.)*)*)\]/g;function m(ea){var fa=z(ea),ga=0,ha=0;return o(ea).map(function(ia){while(ga<fa.length){var ja=fa[ga],ka=ja.offset-ha;if(ka<ia.offset){ha+=ja.token.length-ja.name.length;ga++;}else break;}return {marker:ia.marker,tag:ia.hashtag,rawOffset:ia.offset+ha,offset:ia.offset};});}function n(ea){return p(ea,u(ea));}function o(ea){var fa=ba(ea);return p(fa,q(ea,fa));}function p(ea,fa){return s(ea).slice(0,k).filter(function(ga){var ha=w(ga.offset,ga.hashtag.length,fa);return !ha&&ga.hashtag.length<=j;});}function q(ea,fa){return v(t(ea),u(fa));}var r=i();function s(ea){var fa=[];ea.replace(r,function(ga,ha,ia,ja,ka){fa.push({marker:ia,hashtag:ja,offset:ka+ha.length});});return fa;}function t(ea){return ca(ea).map(function(fa){return [fa.offset,fa.name.length];});}function u(ea){var fa=[],ga,ha=0;while(ga=h.permissiveMatch(ea)){var ia=ea.indexOf(ga);fa.push([ha+ia,ga.length]);ea=ea.substring(ia+ga.length);ha+=ia+ga.length;}return fa;}function v(ea,fa){var ga=[],ha=0,ia=0,ja=0;while(ha<ea.length&&ia<fa.length)if(ea[ha][0]>fa[ia][0]){ga[ja++]=fa[ia++];}else ga[ja++]=ea[ha++];return ga.concat(ea.slice(ha),fa.slice(ia));}function w(ea,fa,ga){if(!ga)return false;var ha=y(ga,ea);return x(ea,fa,ga,ha)||x(ea,fa,ga,ha+1);}function x(ea,fa,ga,ha){if(!ga[ha])return false;var ia=ga[ha][0],ja=ga[ha][1];return !(ea+fa-1<ia||ea>ia+ja-1);}function y(ea,fa){var ga=0,ha=ea.length-1;while(ga<=ha){var ia=Math.floor((ga+ha)/2),ja=ea[ia][0];if(ja==fa){return ia;}else if(ja<fa){ga=ia+1;}else ha=ia-1;}return ha;}function z(ea){var fa=[];ea.replace(l,function(ga,ha,ia,ja,ka){fa.push({token:ga,id:ha,type:ia,name:ja,offset:ka});});return fa;}function aa(ea){return ea?ea.replace(/\\([^\\])/g,'$1').replace(/\\\\/g,'\\'):null;}function ba(ea){return ea.replace(l,function(fa,ga,ha,ia,ja){return aa(ia);});}function ca(ea){var fa=0,ga=0;return z(ea).map(function(ha){var ia=ea.indexOf(ha.token,ga);ga=ia+1;ia-=fa;var ja=aa(ha.name);fa+=ha.token.length-ja.length;if(ia>=0)return {id:ha.id,name:ja,type:ha.type,offset:ia};});}var da={};da.parse=m;da.parseWithoutMentions=n;f.exports=da;},null);
__d('FullViewLogger',['Banzai','ScriptPath','SubscriptionsHandler','URI'],function a(b,c,d,e,f,g,h,i,j,k){if(c.__markCompiled)c.__markCompiled();l.logFromViewableImpressionTracker=function(m){'use strict';var n=new l();n.subscribeToTrackerEvents(m);};l.prototype.subscribeToTrackerEvents=function(m){'use strict';this.subscriptionsHandler=new j();this.subscriptionsHandler.addSubscriptions(m.addListener('full_view',this.onFullView,this));};l.prototype.onFullView=function(m){'use strict';if(this.$FullViewLogger1())this.$FullViewLogger2(m);var n={token:m.token,fullViewType:m.fullViewType,scriptPath:i.getTopViewEndpoint()};h.post('xtrackable:full_view',n);if(this.$FullViewLogger1())this.$FullViewLogger3(n);};l.prototype.$FullViewLogger1=function(){'use strict';return 0;};l.prototype.$FullViewLogger2=function(m){'use strict';};l.prototype.$FullViewLogger3=function(m){'use strict';};function l(){'use strict';}f.exports=l;},null);
__d('ViewableImpressionHeatmapLogger',['Banzai'],function a(b,c,d,e,f,g,h){if(c.__markCompiled)c.__markCompiled();i.logFromViewableImpressionTracker=function(j,k){'use strict';var l=new i(k);l.subscribeToTrackerEvents(j);};function i(j){'use strict';this.loggingDurationMS=j;this.trackingEntries={};}i.prototype.subscribeToTrackerEvents=function(j){'use strict';this.visibleSubscription=j.addListener('visible',this.onElementVisible,this);this.hiddenSubscription=j.addListener('hidden',this.onElementHidden,this);};i.prototype.onElementVisible=function(j){'use strict';var k=this.getCurrentTimestamp(),l=this.trackingEntries[j.id];if(!l){l=this.createTrackingEntry(j);this.beginTracking(j.id,l);k=l.startedTrackingTS;}l.viewportProgressEvents.push({timestamp:k,percentInViewport:j.percentInViewport.toFixed(2)});};i.prototype.onElementHidden=function(j){'use strict';var k=this.getCurrentTimestamp(),l=this.trackingEntries[j.id];if(!l)return;l.viewportProgressEvents.push({timestamp:k,percentInViewport:0});};i.prototype.onTrackingCompleted=function(j){'use strict';var k=this.trackingEntries[j];k.viewportProgressEvents.push({timestamp:this.getCurrentTimestamp(),percentInViewport:k.tracker.getPercentInViewport().toFixed(2)});if(this.$ViewableImpressionHeatmapLogger1())this.$ViewableImpressionHeatmapLogger2(j,k);this.logToServer(k);delete this.trackingEntries[j];};i.prototype.logToServer=function(j){'use strict';var k=j;delete k.tracker;h.post('xtrackable:heatmap',k);};i.prototype.beginTracking=function(j,k){'use strict';this.trackingEntries[j]=k;setTimeout((function(){return this.onTrackingCompleted(j);}).bind(this),this.loggingDurationMS);};i.prototype.createTrackingEntry=function(j){'use strict';return {tracker:j.tracker,token:j.token,startedTrackingTS:this.getCurrentTimestamp(),viewportProgressEvents:[]};};i.prototype.getCurrentTimestamp=function(){'use strict';return (Date.now()/1000).toFixed(2);};i.prototype.$ViewableImpressionHeatmapLogger1=function(){'use strict';return 0;};i.prototype.$ViewableImpressionHeatmapLogger2=function(j,k){'use strict';var l='Completed tracking for id '+j+' token='+k.token+' startedTrackingTS='+k.startedTrackingTS+'\n';k.viewportProgressEvents.forEach(function(m){l+='% in view: '+m.percentInViewport+' timestamp='+m.timestamp+'\n';});};f.exports=i;},null);
__d('ViewableImpressionUtils',['CSS','cx'],function a(b,c,d,e,f,g,h,i){if(c.__markCompiled)c.__markCompiled();var j={isHorizontallyOffscreen:function(k,l,m){var n=Math.max(l.x,0),o=Math.min(l.x+l.width,m.width);return o-n<l.width||h.hasClass(k,"desktop_hscroll_offscreen");}};f.exports=j;},null);
__d('ViewableImpressionTracker',['Banzai','BrowseClientEventLogger','DOM','FullViewType','NonBlockingIFrame','Style','URI','ViewableImpressionUtils','WebSpeedExperiments','getElementPosition','getViewportDimensions','mixInEventEmitter'],function a(b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s){if(c.__markCompiled)c.__markCompiled();function t(u,v,w){'use strict';this.id=u;this.element=v;this.config=w;this.iframe=null;this.viewableTimeout=null;this.clearSubsequentTimeout=null;this.waitForSubsequent=false;this.waitForLogged=false;this.isNonViewableLogged=false;this.isVisible=false;this.iframeLogged=false;this.banzaiLogged=false;this.topLeftInViewport=false;this.bottomRightInViewport=false;}t.prototype.getID=function(){'use strict';return this.id;};t.prototype.getPercentInViewport=function(){'use strict';var u=r(),v=q(this.element);return this.$ViewableImpressionTracker1(u,v);};t.prototype.$ViewableImpressionTracker1=function(u,v){'use strict';if(v.x<u.width&&v.x+v.width>0&&v.y<u.height&&v.y+v.height>0&&m.get(this.element,'visibility')!=='hidden'&&m.get(this.element,'opacity')!=='0'){var w=Math.max(v.x,0),x=Math.min(v.x+v.width,u.width),y=Math.max(v.y,0),z=Math.min(v.y+v.height,u.height);if(v.height*v.width===0)return 100;if(this.config.require_horizontally_onscreen&&o.isHorizontallyOffscreen(this.element,v,u))return 0;var aa=100*(x-w)*(z-y)/(v.height*v.width);return aa;}return 0;};t.prototype.$ViewableImpressionTracker2=function(u,v){'use strict';if(m.get(this.element,'visibility')==='hidden'||m.get(this.element,'opacity')==='0')return false;var w=v.x,x=v.y,y=v.x+v.width,z=v.y+v.height;this.topLeftInViewport=this.topLeftInViewport||w>=0&&w<=u.width&&x>=0&&x<=u.height;this.bottomRightInViewport=this.bottomRightInViewport||y>=0&&y<=u.width&&z>=0&&z<=u.height;return this.topLeftInViewport&&this.bottomRightInViewport;};t.prototype.$ViewableImpressionTracker3=function(u,v){'use strict';if(this.hasEmittedFullViewEvent)return;if(this.$ViewableImpressionTracker2(u,v)){this.emit('full_view',{tracker:this,id:this.getID(),token:this.getToken(),fullViewType:k.ENTIRE_UNIT});this.hasEmittedFullViewEvent=true;}};t.prototype.onVisible=function(){'use strict';this.isVisible=true;var u=r(),v=q(this.element),w=this.$ViewableImpressionTracker1(u,v),x=w>this.config.pixel_in_percentage;this.emit('visible',{tracker:this,id:this.getID(),token:this.getToken(),percentInViewport:w});this.$ViewableImpressionTracker3(u,v);if(!x){this.$ViewableImpressionTracker4();return;}if(this.isLogged()){this.$ViewableImpressionTracker5();}else this.$ViewableImpressionTracker6();if(!this.waitForLogged&&!this.isLogged()){this.waitForLogged=true;this.viewableTimeout=setTimeout((function(){this.waitForLogged=false;var y=this.getPercentInViewport(),z=y>this.config.pixel_in_percentage;if(!z){this.$ViewableImpressionTracker7();return;}this.logImpression(1,{});this.$ViewableImpressionTracker5();}).bind(this),this.config.duration_in_ms);}};t.prototype.onHidden=function(){'use strict';this.emit('hidden',{id:this.getID(),token:this.getToken()});if(this.config.log_initial_nonviewable&&!this.isLogged()&&!this.isNonViewableLogged){this.logNonViewableImpression();}else if(!this.config.log_initial_nonviewable&&!this.isLogged()&&this.isVisible)this.logNonViewableImpression();this.isVisible=false;if(this.waitForLogged){this.waitForLogged=false;clearTimeout(this.viewableTimeout);}if(this.isLogged()&&!this.waitForSubsequent&&this.config.subsequent_gap_in_ms>=0){this.waitForSubsequent=true;this.clearSubsequentTimeout=setTimeout((function(){this.waitForSubsequent=false;this.reset();if(this.isVisible)this.onVisible();}).bind(this),this.config.subsequent_gap_in_ms);}this.$ViewableImpressionTracker7();};t.prototype.onRemoved=function(){'use strict';this.isVisible=false;};t.prototype.getToken=function(){'use strict';return this.element.getAttribute('data-xt');};t.prototype.logImpression=function(u,v){'use strict';if(this.isLogged())return;var w=this.getToken(),x=Math.floor(Date.now()/1000),y={xt:w,isv:u,cts:x};if(h.isEnabled('xtrackable_clientview_batch')&&this.config.should_batch){this.logWithBanzai(y);}else this.logWithIFrame(Object.assign(y,v));};t.prototype.logNonViewableImpression=function(){'use strict';if(this.config.nonviewableEnabled){var u=this.getToken();h.post('xtrackable:nonviewable',{xt:u});}this.isNonViewableLogged=true;};t.prototype.isLogged=function(){'use strict';return this.iframeLogged||this.banzaiLogged;};t.prototype.reset=function(){'use strict';if(this.iframeLogged)this.iframeLogged=false;if(this.iframe){j.remove(this.iframe);this.iframe=null;}if(this.banzaiLogged)this.banzaiLogged=false;this.isNonViewableLogged=false;this.isVisible=false;this.waitForLogged=false;this.waitForSubsequent=false;};t.prototype.logWithBanzai=function(u){'use strict';this.banzaiLogged=true;i.maybeLogClientViewEvent(u);h.post('xtrackable:clientview_batch',u);};t.prototype.logWithIFrame=function(u){'use strict';this.iframeLogged=true;if(p.non_blocking_tracker){l.loadIFrame(new n(this.config.impressionURL).addQueryData(u).toString());}else{this.iframe=j.create('iframe',{src:new n(this.config.impressionURL).addQueryData(u),width:0,height:0,frameborder:0,scrolling:'no',className:'fbEmuTracking'});this.iframe.setAttribute('aria-hidden','true');j.appendContent(this.element,this.iframe);}};t.prototype.$ViewableImpressionTracker8=function(){'use strict';return 0;};t.prototype.$ViewableImpressionTracker4=function(){'use strict';if(this.$ViewableImpressionTracker8()){m.set(this.element,'background-color','#abab9a');m.set(this.element,'outline','3px solid #abab9a');}};t.prototype.$ViewableImpressionTracker6=function(){'use strict';if(this.$ViewableImpressionTracker8()){m.set(this.element,'background-color','#e4f70a');m.set(this.element,'outline','3px solid #e4f70a');}};t.prototype.$ViewableImpressionTracker7=function(){'use strict';if(this.$ViewableImpressionTracker8()){m.set(this.element,'background-color',null);m.set(this.element,'outline',null);}};t.prototype.$ViewableImpressionTracker5=function(){'use strict';if(this.$ViewableImpressionTracker8()){m.set(this.element,'background-color','#047515');m.set(this.element,'outline','3px solid #047515');}};s(t,{visible:true,hidden:true,full_view:true});f.exports=t;},null);
__d('VisibilityTrackingHelper',['Arbiter','DesktopHscrollUnitEventConstants','getViewportDimensions','Event'],function a(b,c,d,e,f,g,h,i,j,k){if(c.__markCompiled)c.__markCompiled();var l={getEventListeners:function(m){return [k.listen(document,'DOMContentLoaded',m),k.listen(window,'scroll',m),k.listen(window,'resize',m),h.subscribe(i.HSCROLL_ITEM_SHOWN_EVENT,m)];},getViewportInfo:function(){return j();}};f.exports=l;},null);
__d('VisibilityTracking',['Banzai','BrowseClientEventLogger','ErrorUtils','ScriptPath','SubscriptionsHandler','Visibility','VisibilityTrackingHelper','collectDataAttributes','getElementPosition','pageID','throttle'],function a(b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r){if(c.__markCompiled)c.__markCompiled();var s='visibility_tracking',t='[data-vistracking]',u=500,v=50,w=50,x=50,y=50,z={VISIBLE:'visible',HIDDEN:'hidden'},aa={DEFAULT:'default',REMOVED:'removed'},ba={name:z.VISIBLE,cause:aa.DEFAULT},ca={name:z.HIDDEN,cause:aa.DEFAULT},da={name:z.HIDDEN,cause:aa.REMOVED},ea=0;function fa(ga){'use strict';ga=ga||{};if(!ga.bypass_banzai_check&&!h.isEnabled(s))return;this.visibleElementInfo={};this.getDataFromConfig(ga);m.addListener(m.VISIBLE,j.guard(this.fireEvent,'VisibilityTracking:visible',this));if(!this.skipVisibilityHiddenEvents)m.addListener(m.HIDDEN,j.guard(this.clearAllVisibleElements,'VisibilityTracking:hidden',this));k.subscribe(j.guard(this.updateVisibleElements,'VisibilityTracking:scriptPath',this));h.subscribe(h.SHUTDOWN,j.guard(this.onUnload,'VisibilityTracking:banzaiShutdown',this));this.fireEventCallback=r.acrossTransitions(j.guard(this.fireEvent,'VisibilityTracking:fireEventCallback',this),this.timeout,this);this.listeners=new l();n.getEventListeners(this.fireEventCallback).forEach(function(ha){this.listeners.addSubscriptions(ha);},this);if(this.extraInit)j.applyWithGuard(this.extraInit.bind(this));}fa.prototype.getDataFromConfig=function(ga){'use strict';this.config=ga;this.root=ga.root||document.documentElement;this.selector=ga.selector||t;this.timeout=typeof ga.timeout!=='undefined'?ga.timeout:u;this.minOffsetVisibleFromBottom=typeof ga.minOffsetVisibleFromBottom!=='undefined'?ga.minOffsetVisibleFromBottom:v;this.minOffsetVisibleFromTop=typeof ga.minOffsetVisibleFromTop!=='undefined'?ga.minOffsetVisibleFromTop:w;this.minOffsetVisibleFromLeft=typeof ga.minOffsetVisibleFromLeft!=='undefined'?ga.minOffsetVisibleFromLeft:x;this.minOffsetVisibleFromRight=typeof ga.minOffsetVisibleFromRight!=='undefined'?ga.minOffsetVisibleFromRight:y;this.handleAllHiddenEvents=typeof ga.handleAllHiddenEvents!=='undefined'?ga.handleAllHiddenEvents:false;this.handleAllVisibleEvents=typeof ga.handleAllVisibleEvents!=='undefined'?ga.handleAllVisibleEvents:false;this.skipVisibilityHiddenEvents=typeof ga.skipVisibilityHiddenEvents!=='undefined'?ga.skipVisibilityHiddenEvents:false;this.cacheTrackedElements=typeof ga.cacheTrackedElements!=='undefined'?ga.cacheTrackedElements:false;};fa.prototype.getAllTrackedElements=function(){'use strict';if(!this.allTrackedElements){this.allTrackedElements={};if(this.root.querySelectorAll){var ga=this.root.querySelectorAll(this.selector);for(var ha=0;ha<ga.length;ha++){var ia=this.getElementID(ga[ha]);this.allTrackedElements[ia]=ga[ha];}}}return this.allTrackedElements;};fa.prototype.refreshAllTrackedElements=function(){'use strict';delete this.allTrackedElements;return this.getAllTrackedElements();};fa.prototype.getDataToLog=function(ga){'use strict';var ha=Object.assign(o(ga,['gt']).gt,{client_time:Date.now()/1000,time_spent_id:q,script_path:k.getScriptPath()});return ha;};fa.prototype.getElementID=function(ga){'use strict';var ha=ga.$VisibilityTracking1;if(ha)return ha;ga.$VisibilityTracking1=++ea;return ea;};fa.prototype.sendDataToLog=function(ga){'use strict';i.maybeLogVisiblityEvent(ga);h.post(s,ga);};fa.prototype.fireEvent=function(){'use strict';var ga=this.cacheTrackedElements?this.allTrackedElements:this.refreshAllTrackedElements();for(var ha in ga){var ia=ga[ha],ja=n.getViewportInfo(),ka=this.isVisible(ia,ja);if(!ka&&(ha in this.visibleElementInfo||this.handleAllHiddenEvents)){this.handleEvent(ia,ca);}else if(ka&&(!(ha in this.visibleElementInfo)||this.handleAllVisibleEvents))this.handleEvent(ia,ba);}this.clearUntrackedVisibleElements();};fa.prototype.isVisible=function(ga,ha){'use strict';var ia=p(ga);return (ia.x||ia.y||ia.width||ia.height)&&ia.y+ia.height>=this.minOffsetVisibleFromTop&&ia.y<=ha.height-this.minOffsetVisibleFromBottom&&ia.x+ia.width>=this.minOffsetVisibleFromLeft&&ia.x<=ha.width-this.minOffsetVisibleFromRight;};fa.prototype.handleEvent=function(ga,event){'use strict';var ha=this.getElementID(ga),ia=this.getDataToLog(ga),ja;if(event.name===z.VISIBLE){var ka=Math.floor(Date.now()/1000);ja=q.concat(":",ka.toString(),":",this.getElementID(ga).toString());this.visibleElementInfo[ha]={visibility_id:ja,elem:ga};}else if(event.name===z.HIDDEN)if(ha in this.visibleElementInfo){ja=this.visibleElementInfo[ha].visibility_id;delete this.visibleElementInfo[ha];}this.sendDataToLog(Object.assign(ia,{event:event.name,visibility_id:ja}));};fa.prototype.clearUntrackedVisibleElements=function(){'use strict';var ga=this.getAllTrackedElements();for(var ha in this.visibleElementInfo)if(!(ha in ga)){var ia=this.visibleElementInfo[ha];if(ia.elem)this.handleEvent(ia.elem,da);}};fa.prototype.clearAllVisibleElements=function(){'use strict';var ga=this.getAllTrackedElements();for(var ha in ga)if(ha in this.visibleElementInfo)this.handleEvent(ga[ha],ca);this.clearUntrackedVisibleElements();};fa.prototype.updateVisibleElements=function(){'use strict';this.clearAllVisibleElements();this.fireEvent();};fa.prototype.refreshAndFireEvent=function(){'use strict';this.refreshAllTrackedElements();this.fireEventCallback();};fa.prototype.onUnload=function(){'use strict';this.clearAllVisibleElements();if(this.listeners){this.listeners.release();this.listeners=null;}if(this.extraCleanup)j.applyWithGuard(this.extraCleanup.bind(this));};fa.init=function(ga){'use strict';new fa(ga);};fa.EVENT=z;fa.CAUSE=aa;f.exports=fa;},null);
__d('ViewableImpressionEventHandler',['FullViewLogger','ViewableImpressionHeatmapLogger','ViewableImpressionTracker','VisibilityTracking'],function a(b,c,d,e,f,g,h,i,j,k){if(c.__markCompiled)c.__markCompiled();var l,m,n=1;l=babelHelpers.inherits(o,k);m=l&&l.prototype;o.prototype.extraInit=function(){'use strict';this.impressionTrackers={};};o.prototype.getDataFromConfig=function(p){'use strict';m.getDataFromConfig.call(this,p);this.doHeatmapLogging=p.doHeatmapLogging;this.heatmapLoggingDurationMS=p.heatmapLoggingDurationMS;p.impressionURL=p.impressionURL!==undefined?p.impressionURL:'/xti.php';p.nonviewableEnabled=p.nonviewableEnabled!==undefined?p.nonviewableEnabled:false;};o.prototype.getImpressionTracking=function(p){'use strict';var q=this.getElementID(p),r=babelHelpers._extends({},this.getConfigFromElement(p),this.config),s=this.impressionTrackers[q];if(!s){s=new j(q,p,r);this.impressionTrackers[q]=s;if(this.doHeatmapLogging)i.logFromViewableImpressionTracker(s,this.heatmapLoggingDurationMS);if(r.should_log_full_views)h.logFromViewableImpressionTracker(s);}return s;};o.prototype.handleEvent=function(p,event){'use strict';var q=this.getImpressionTracking(p);if(!q)return;if(event.name===k.EVENT.VISIBLE){q.onVisible();if(!this.visibleElementInfo[q.getID()])this.visibleElementInfo[q.getID()]={elem:p};}else if(event.name===k.EVENT.HIDDEN)if(event.cause===k.CAUSE.DEFAULT){q.onHidden();delete this.visibleElementInfo[q.getID()];}else if(event.cause===k.CAUSE.REMOVED){q.onRemoved();delete this.visibleElementInfo[q.getID()];delete this.impressionTrackers[q.getID()];}};o.prototype.getConfigFromElement=function(p){'use strict';return JSON.parse(p.getAttribute('data-xt-vimp'));};o.prototype.getElementID=function(p){'use strict';if(!p.getAttribute('id'))p.setAttribute('id','xt_uniq_'+n++);return p.getAttribute('id');};function o(){'use strict';l.apply(this,arguments);}f.exports=o;},null);
__d('EntstreamInjectWarning',['CSS','DOM'],function a(b,c,d,e,f,g,h,i){if(c.__markCompiled)c.__markCompiled();var j,k={init:function(l){j=l;},showWarning:function(l){if(j){h.show(j);i.setContent(j,l);}}};f.exports=k;},null);
__d('EntstreamStoryDeduper',['CSS','DOM','csx'],function a(b,c,d,e,f,g,h,i,j){if(c.__markCompiled)c.__markCompiled();var k=function(o,p,q,r){var s=i.scry(o,p||"._5jmm").filter(q),t={};for(var u=0;u<s.length;u++){var v=s[u],w=v.getAttribute('data-dedupekey');if(t[w]){r(v);}else t[w]=1;}},l=function(o){return !!o.getAttribute('data-dedupekey');},m=function(o){return l(o)&&h.shown(o);},n={dedupe:function(o,p){k(o,p,l,function(q){return i.remove(q);});},dedupeHide:function(o,p){k(o,p,m,function(q){return h.hide(q);});}};f.exports=n;},null);
__d('AttachmentRelatedShareConstants',[],function a(b,c,d,e,f,g){if(c.__markCompiled)c.__markCompiled();var h={ARTICLE_CLICK:'article_click',VIDEO_CLICK:'video_click',FBVIDEO_CLICK:'fbvideo_click',GAME_CLICK:'game_click',EVENT_DELAY:1000,HIDE_DELAY:100,PHOTO_CLICK:'photo_click',EVENT_JOIN:'event_join'};f.exports=h;},null);
__d("XPubcontentInlinePhotoPivotsEventsController",["XController"],function a(b,c,d,e,f,g){c.__markCompiled&&c.__markCompiled();f.exports=c("XController").create("\/pubcontent\/inline_photo_pivots_chaining\/events\/",{});},null);
__d('EntstreamAttachmentRelatedShare',['Arbiter','AsyncRequest','AttachmentRelatedShareConstants','CSS','DOM','Event','XPubcontentInlinePhotoPivotsEventsController','csx','cx','ge','getOrCreateDOMID','tidyEvent'],function a(b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s){if(c.__markCompiled)c.__markCompiled();var t=2,u=3,v={loadRelatedAttachment:function(w,x,y){var z=null;if(typeof w==="string"){z=q(w);}else z=w;if(!z)return;var aa=m.listen(z,'click',function(){aa.remove();h.inform(j.ARTICLE_CLICK,{attachment:z,global_share_id:x,is_right_click:false,share_id:y});}),ba=m.listen(z,'mousedown',function(event){if(event.which===u||event.button===t){ba.remove();h.inform(j.ARTICLE_CLICK,{attachment:z,global_share_id:x,is_right_click:true});}});},loadInlineStoryPivotAttachment:function(w,x){var y=q(w);if(!y)return;var z=m.listen(y,'click',function(){z.remove();h.inform(j.PHOTO_CLICK,{attachment:y,storyid:x});});},loadRelatedGameAttachment:function(w,x){var y=null;if(typeof w==="string"){y=q(w);}else y=w;if(!y)return;s(m.listen(y,'click',function(){h.inform(j.GAME_CLICK,{attachment:y,global_share_id:x});}));s(m.listen(y,'mousedown',function(event){if(event.which===u||event.button===t)h.inform(j.GAME_CLICK,{attachment:y,global_share_id:x});}));},loadRelatedLSCVideoAttachment:function(w,x){var y=null;if(typeof w==='string'){y=q(w);}else y=w;if(!y)return;var z="^div._4-u2",aa=l.scry(y,z),ba=m.listen(y,'click',function(){ba.remove();h.inform(j.VIDEO_CLICK,{attachment:y,global_share_id:x});});},loadRelatedLSCInlineVideoAttachment:function(w,x){var y=null;if(typeof w==='string'){y=q(w);}else y=w;if(!y)return;m.listen(y,'click',function(){var z="^div._4-u2",aa="_1d8v",ba=l.scry(y,z),ca=ba.length===1?ba[0]:null,da=ca.parentNode,ea=da.previousSibling;while(!ea){da=da.parentNode;ea=da.previousSibling;}if(!k.hasClass(ea,aa)){var fa=l.create('div',{className:aa}),ga=l.insertBefore(ca.parentNode,fa),ha=ga.length>=1?ga[0]:null;}else ha=ea;var ia=r(ha);new i().setURI('/ajax/flash/expand_inline.php').setData({share_id:x,target_div:ia,max_width:470,max_height:264,replace_target_div:true}).setMethod('GET').setReadOnly(true).setRelativeTo(y.parentNode).send();});},loadRelatedEventsPivotAttachment:function(w,x){var y=null;if(typeof w==="string"){y=q(w);}else y=w;if(!y)return;s(m.listen(y,'click',function(){h.inform(j.EVENT_JOIN,{attachment:y,event_id:x});}));},closeButton:function(w,x){m.listen(w,'click',function(){l.remove(x);});},closeButtonPhotoPivots:function(w,x,y,z){m.listen(w,'click',function(){var aa=n.getURIBuilder(),ba={story_id:y,search_query_type:z,event:'hide'};new i().setMethod('POST').setURI(aa.getURI()).setData(ba).send();l.remove(x);});},seeAllLinkPhotoPivots:function(w,x,y){m.listen(w,'click',function(){var z=n.getURIBuilder(),aa={story_id:x,search_query_type:y,event:'see_all'};new i().setMethod('POST').setURI(z.getURI()).setData(aa).send();});},removeOldSuggestions:function(w){var x=q(w);if(!x)return;var y=l.scry(x.parentNode,"._5d73");for(var z=1;z<y.length;z++)l.remove(y[z]);setTimeout(function(){k.show(y[0]);},1000);},showHiddenSuggestions:function(w){var x=m.listen(w,'click',function(){x.remove();var y="^._1ui8",z=l.scry(w,y);if(!z)return;k.hide(z[0]);var aa=z[0].previousSibling;while(aa){k.show(aa);aa=aa.previousSibling;}});}};f.exports=v;},null);
__d('AccessibilityLogger',['AsyncSignal','Cookie'],function a(b,c,d,e,f,g,h,i){if(c.__markCompiled)c.__markCompiled();var j={COOKIE:'a11y',DECAY_MS:6*60*60*1000,DEFAULT:{sr:0,'sr-ts':Date.now(),jk:0,'jk-ts':Date.now(),kb:0,'kb-ts':Date.now(),hcm:0,'hcm-ts':Date.now()},getCookie:function(){var k=j.DEFAULT,l=i.get(j.COOKIE);if(l){l=JSON.parse(l);for(var m in k)if(m in l)k[m]=l[m];}return k;},logKey:function(k,l){var m=j.getCookie();m[k]++;var n=Date.now();if(n-m[k+'-ts']>j.DECAY_MS){new h('/ajax/accessibilitylogging',{eventName:l,times_pressed:m[k]}).send();m[k+'-ts']=n;m[k]=0;}i.set(j.COOKIE,JSON.stringify(m));},logHCM:function(){j.logKey('hcm','hcm_users');},logSRKey:function(){j.logKey('sr','sr_users');},logJKKey:function(){j.logKey('jk','jk_users');},logFocusIn:function(){j.logKey('kb','kb_users');}};f.exports=j;},null);
__d('KeyboardShortcuts',['KeyEventController','Layer','ModalLayer'],function a(b,c,d,e,f,g,h,i,j){if(c.__markCompiled)c.__markCompiled();function k(m,n,o){'use strict';this.key=m;this.handler=n;this.filter=o;this.register();}k.prototype.register=function(){'use strict';this.token=h.registerKey(this.key,this.handler,this.filter);};k.prototype.remove=function(){'use strict';this.token.remove();};var l={_tokens:[[]],register:function(m,n,o){o=o||{};var p=o.allowDefault?n:function(event,t){n.apply(this,arguments);event.prevent();},q=o.baseFilters||[h.defaultFilter],r=function(event,t){for(var u=0,v=q.length;u<v;u++)if(!q[u](event,t))return false;return !o.filter||o.filter(event,t);},s=new k(m,p,r);this._tokens[this._tokens.length-1].push(s);return s;},init:function(){i.subscribe('show',(function(m,n){if(n.hasBehavior(j))this.pushLayer();}).bind(this));i.subscribe('hide',(function(m,n){if(n.hasBehavior(j))this.popLayer();}).bind(this));},pushLayer:function(){var m=this._tokens[this._tokens.length-1];m&&m.forEach(function(n){n.remove();});this._tokens.push([]);},popLayer:function(){var m=this._tokens.length-1;if(m<0)return;var n=this._tokens[m];n.forEach(function(p){p.remove();});this._tokens.pop();var o=this._tokens[m-1];o&&o.forEach(function(p){p.register();});}};l.init();f.exports=l;},null);
__d('LikeConfirmer',['AsyncDialog','AsyncRequest'],function a(b,c,d,e,f,g,h,i){if(c.__markCompiled)c.__markCompiled();var j=false,k=false,l={likeContent:function(){},like:function(m,n){this.likeContent=m;if(k)return;if(j){this.likeContent();}else{var o=new i().setURI('/like/confirm_like.php').setRelativeTo(n);h.send(o,(function(p){k=true;p.subscribe('hide',this.onCloseLikeConfirmDialog.bind(this));p.setCausalElement(n);}).bind(this));}return false;},isShowingConfirmation:function(){return k;},onCloseLikeConfirmDialog:function(){k=false;},likeSkipConfirmation:function(m){j=m;this.likeContent();}};f.exports=l;},null);
__d('FeedBaseKeyboardController',['AccessibilityLogger','Arbiter','AsyncDialog','AsyncRequest','Banzai','BanzaiODS','BanzaiNectar','CSS','DOM','DOMScroll','Event','Focus','KeyboardShortcuts','LikeConfirmer','NavigationMessage','Parent','ReactComposerEvents','ReactComposerIDGenerator','Run','Scroll','SubscriptionsHandler','UITinyViewportAction','Vector','ViewportBounds','csx','emptyFunction','ge','getActiveElement','isAsyncScrollQuery','isElementNode','throttle'],function a(b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,aa,ba,ca,da,ea,fa,ga,ha,ia,ja,ka,la){if(c.__markCompiled)c.__markCompiled();var ma=0;function na(){var pa=ha('pagelet_bluebar');ma=!ca.isTiny()&&pa?pa.offsetTop+pa.offsetHeight:0;}function oa(pa){'use strict';this.root=pa;this.init();}oa.prototype.getStories=function(){'use strict';};oa.prototype.getParentStory=function(pa){'use strict';};oa.prototype.isStory=function(pa){'use strict';};oa.prototype.isHoldoutStory=function(pa){'use strict';};oa.prototype.getHeadline=function(pa){'use strict';};oa.prototype.getPreviousStory=function(pa){'use strict';};oa.prototype.getNextStory=function(pa){'use strict';};oa.prototype.setSelected=function(pa,qa){'use strict';};oa.prototype.clickLike=function(){'use strict';};oa.prototype.clickComment=function(){'use strict';};oa.prototype.clickShare=function(){'use strict';};oa.prototype.clickSeeMore=function(){'use strict';};oa.prototype.clickLeft=function(){'use strict';};oa.prototype.clickRight=function(){'use strict';};oa.prototype.openAttachment=function(){'use strict';};oa.prototype.focusComposer=function(){'use strict';var pa=ha('pagelet_composer');if(!pa)pa=ha('pagelet_group_composer');if(pa){var qa=p.scry(pa,'textarea')[0];if(qa){s.set(qa);q.scrollToTop(true);}else{var ra=p.scry(pa,"div._36bx")[0],sa=ra&&ra.id;if(y.isComposerID(sa)){i.inform(x.ACTIVATE_ATTACHMENT+ra.id);q.scrollToTop(true);}}}};oa.prototype.getScrollOffset=function(){'use strict';return 10;};oa.prototype.getAnimationLength=function(pa){'use strict';return Math.min(Math.abs(da.getElementPosition(pa).y-ea.getTop()-aa.getTop(document.body)),400);};oa.prototype.findTop=function(){'use strict';var pa=this.getStories();for(var qa=0;qa<pa.length;qa++)if(da.getElementPosition(pa[qa]).y>da.getScrollPosition().y)return pa[qa];};oa.prototype.onLeave=function(){'use strict';this.subscriptions&&this.subscriptions.release();};oa.prototype.getHelpDialogRequest=function(){'use strict';if(!this.dialogRequest){this.dialogRequest=new k('/ajax/keyboard_shortcuts');this.dialogRequest.setReadOnly(true);}else if(this.dialogRequest.transport)return null;return this.dialogRequest;};oa.prototype.init=function(){'use strict';z.onLeave(this.onLeave.bind(this));this.subscriptions=new ba();this.subscriptions.addSubscriptions(i.subscribe(v.NAVIGATION_BEGIN,this.onLeave.bind(this)),t.register('j',this.vert.bind(this,1)),t.register('k',this.vert.bind(this,-1)),t.register('l',(function(){var pa=this.getParentStory(ia());u.like((function(){this.setSelected(pa,false);this.clickLike();}).bind(this),ia());}).bind(this),{filter:this.hasActiveStory.bind(this)}),t.register('c',this.clickComment.bind(this),{filter:this.hasActiveStory.bind(this)}),t.register('o',this.openAttachment.bind(this),{filter:this.hasActiveStory.bind(this)}),t.register('p',this.focusComposer.bind(this)),t.register('s',this.clickShare.bind(this),{filter:this.hasActiveStory.bind(this)}),t.register('SLASH',(function(){var pa=this.getHelpDialogRequest();if(pa){pa.setRelativeTo(ia());j.send(pa);}}).bind(this),{filter:function(event,pa){return event.getModifiers().shift;}}),t.register('RETURN',this.clickSeeMore.bind(this),{filter:this.hasExpandableStoryInFocus.bind(this)}),t.register('LEFT',this.clickLeft.bind(this),{filter:this.hasActiveStory.bind(this)}),t.register('RIGHT',this.clickRight.bind(this),{filter:this.hasActiveStory.bind(this)}),r.listen(this.root,'focusin',(function(event){var pa=event.getTarget();if(!this.isStory(pa)){var qa=p.isNodeOfType(pa,['object','embed','iframe']),ra=this.getParentStory(pa),sa=this.selected;if(ra&&!qa&&sa){this.setSelected(ra,true);this.selected=ra;}}}).bind(this)));};oa.prototype.hasActiveStory=function(event,pa){'use strict';var qa=ia();return !(qa&&o.shown(qa))||!!this.getParentStory(qa);};oa.prototype.hasExpandableStoryInFocus=function(event,pa){'use strict';var qa=ia();return !!(qa.getElementsByClassName('text_exposed_root').length&&!qa.getElementsByClassName('text_exposed_root text_exposed').length);};oa.prototype.clickElement=function(pa){'use strict';if(!pa)return;var qa=undefined;for(var ra=arguments.length,sa=Array(ra>1?ra-1:0),ta=1;ta<ra;ta++)sa[ta-1]=arguments[ta];for(var ua=0,va=sa.length;ua<va;ua++){qa=p.scry(pa,sa[ua])[0];if(qa&&o.shown(qa)){qa.click();return;}}};oa.prototype.click=function(){'use strict';for(var pa=arguments.length,qa=Array(pa),ra=0;ra<pa;ra++)qa[ra]=arguments[ra];this.clickElement.apply(this,[this.selected].concat(qa));};oa.prototype.$FeedBaseKeyboardController1=function(){'use strict';if(!this.$FeedBaseKeyboardController2){this.subscriptions.addSubscriptions(r.listen(document,'scroll',(function(){if(this.selected&&!this.scrolling)this.setSelected(null,false);}).bind(this)));this.$FeedBaseKeyboardController2=true;}};oa.prototype.$FeedBaseKeyboardController3=function(){'use strict';if(!this.$FeedBaseKeyboardController4){na();this.subscriptions.addSubscriptions(r.listen(window,'resize',la(na)));this.$FeedBaseKeyboardController4=true;}};oa.prototype.vert=function(pa){'use strict';this.$FeedBaseKeyboardController1();var qa,ra;if(this.selected){if(l.isEnabled('kbshortcuts_feed')){ra=pa>0?'kbshortcuts.scroll_down':'kbshortcuts.scroll_up';m.bumpEntityKey('kbshortcuts_feed',ra);n.log('feed_scroll',ra,{});}h.logJKKey();if(this.selected.id=='pagelet_composer'){qa=pa>0?this.getStories()[0]:null;if(this.isHoldoutStory(qa))qa=this.getPreviousStory(qa);}else if(pa===0){qa=this.selected;}else qa=pa>0?this.getNextStory(this.selected):this.getPreviousStory(this.selected)||ha('pagelet_composer');if(!qa){return;}else if(!ka(qa)){o.removeClass(this.selected,'selectedStorySimple');this.selected=qa;return this.vert(pa);}}if(!qa||w.byClass(qa,'hidden_elem')||!p.contains(document,qa)){qa=this.findTop();if(qa&&pa<0)qa=this.getPreviousStory(qa);if(this.isHoldoutStory(qa))qa=this.getPreviousStory(qa);}if(!qa)return;this.anim&&this.anim.stop();var sa=Date.now()-(this.lastScroll||0)>30,ta=ga;if(pa!==0)ta=this.setFocused.bind(this,qa);if(ja()){sa=false;ta();ta=ga;}this.scrolling=true;this.scrollingTimer&&clearTimeout(this.scrollingTimer);this.$FeedBaseKeyboardController3();this.anim=q.scrollTo(qa,sa?this.getAnimationLength(qa):0,false,da.getViewportDimensions().y-ma-this.getScrollOffset(),0,(function(){this.scrollingTimer=setTimeout((function(){this.scrolling=false;}).bind(this),300);var ua=da.getScrollPosition();ta();if(ua.distanceTo(da.getScrollPosition())!==0)q.scrollTo(ua,0);}).bind(this));this.setSelected(qa,true);this.lastScroll=Date.now();};oa.prototype.setTabindexOnStory=function(pa,qa){'use strict';if(this.isStory(pa))pa.tabIndex=qa;};oa.prototype.setFocused=function(pa){'use strict';if(this.isStory(pa))s.setWithoutOutline(pa);};f.exports=oa;},null);
__d('FacebarResultStoreUtils',['FacebarGlobalOptions','FacebarJSConstants'],function a(b,c,d,e,f,g,h,i){if(c.__markCompiled)c.__markCompiled();var j={getQueryFeatures:function(k){var l={};if(h.enableBootstrapRanking){if(k.raw_text)l.FEATURE_QUERY_LENGTH=k.raw_text.length;if(k.tokens){l.FEATURE_QUERY_TOKENS=k.tokens.length;l.FEATURE_QUERY_TOKEN_LENGTH_SUM=0;for(var m=0;m<k.tokens.length;m++)l.FEATURE_QUERY_TOKEN_LENGTH_SUM+=k.tokens[m].length;}}return l;},addFeatures:function(k,l,m,n,o,p){if(!k.features)return;k.features={FEATURE_QUERY_LENGTH:n.FEATURE_QUERY_LENGTH,FEATURE_QUERY_TOKENS:n.FEATURE_QUERY_TOKENS,FEATURE_QUERY_TOKEN_LENGTH_SUM:n.FEATURE_QUERY_TOKEN_LENGTH_SUM};k.features.FEATURE_IS_EXACT_NAME_MATCH=o;k.features.FEATURE_IS_STOP_WORD_MATCH=p;if(l&&l.length>0){var q=l.split(' ').length,r=0;for(var s=0;s<k.termMatches.length;++s)if(l.search(k.termMatches[s])>=0)r++;k.features.FEATURE_TITLE_TOKEN_MATCH_FRACTION=r/q;}if(m.tokens&&m.tokens.length>0){var t=l.search(m.tokens[0]);k.features.FEATURE_FIRST_TERM_MATCH_POSITION=t;k.features.FEATURE_FIRST_TERM_MATCH_TOKEN=l.substring(0,t+m.tokens[0].length).split(' ').length;k.termMatches.some(function(u){if(u.search(m.tokens[0])===0){k.features.FEATURE_FIRST_TERM_MATCH_TOKEN_FRACTION=m.tokens[0].length/u.length;return true;}return false;});k.features.FEATURE_IN_ORDER_MATCH=1;if(m.tokens.length>1){t=l.search(m.tokens[1]);k.features.FEATURE_SECOND_TERM_MATCH_POSITION=t;k.features.FEATURE_SECOND_TERM_MATCH_TOKEN=l.substring(0,t+m.tokens[1].length).split(' ').length;k.termMatches.some(function(u){if(u.search(m.tokens[1])===0){k.features.FEATURE_FIRST_TERM_MATCH_TOKEN_FRACTION=m.tokens[0].length/u.length;return true;}return false;});if(k.features.FEATURE_SECOND_TERM_MATCH_TOKEN<k.features.FEATURE_FIRST_TERM_MATCH_POSITION)k.features.FEATURE_IN_ORDER_MATCH=0;}}return k;},processEntityResult:function(k,l,m,n,o,p,q,r,s){var t={semantic:l.toString(),structure:[{type:k===i.keywordType?k:'ent:'+k,text:m,uid:l}],type:k,cost:n,cache_id_length:0,features:[]};t.tuid=JSON.stringify({semantic:t.semantic,structure:t.structure});if(h.enableBootstrapRanking){t.termMatches=q[l.toString()];t=this.addFeatures(t,m.toLowerCase(),o,p,r,s);}return t;},getRawTextFromStructured:function(k){var l=k.map(function(m){return m.getText();});return l.join('');},getTextFromResult:function(k){var l=k.structure,m='';l.forEach(function(n){m+=n.text;});return m;}};f.exports=j;},null);
__d('HashtagSearchResultUtils',['FacebarResultStoreUtils','HashtagParser','HashtagSearchResultConfig','URI','fbt'],function a(b,c,d,e,f,g,h,i,j,k,l){if(c.__markCompiled)c.__markCompiled();var m={getHashtagFromQuery:function(n){var o=i.parse(n);if(o&&o.length===1&&o[0].offset===0)return o[0].tag;return false;},makeTypeaheadResult:function(n){var o=l._("Hashtag");return {category:o,path:new k('/hashtag/'+n).toString(),photo:j.image_url,rankType:null,replace_results:j.boost_result?true:false,scaled_score:1,score:0,text:'#'+n,type:'hashtag_exact',uid:'hashtag:'+n};},makeFacebarEntry:function(n){var o=l._("Hashtag");return {category:o,path:new k('/hashtag/'+n).toString(),photo:j.image_url,replace_results:j.boost_result?true:false,text:'#'+n,type:'hashtag_exact',uid:'hashtag:'+n};},makeFacebarResult:function(n){var o=h.processEntityResult('hashtag_exact','hashtag:'+n,'#'+n,j.hashtag_cost);o.parse={display:[{type:'ent:hashtag_exact',uid:'hashtag:'+n}],remTokens:[],suffix:''};o.tags={hashtag:'hashtag'};return o;}};f.exports=m;},null);
__d('ContextualHelpSearchController',['Event','AsyncRequest','DOM','CSS','Focus','Input'],function a(b,c,d,e,f,g,h,i,j,k,l,m){if(c.__markCompiled)c.__markCompiled();var n=400;function o(p,q,r,s,t,u){this._token=null;this._timerID=0;this._lastQuery=null;this.loader=p;this.search_box=q;this.topics_area=r;this.results_area=s;this.clear_button=t;this.typing_listener=h.listen(this.search_box,'keyup',this.setTimer.bind(this));this.clear_listener=h.listen(this.clear_button,'click',this.clearResults.bind(this));if(u==null||u.focusSearchBox==null||u.focusSearchBox)l.set(this.search_box);this.async_request=null;}Object.assign(o.prototype,{source:'contextual_help',clearResults:function(){this.show(this.topics_area);this._lastQuery='';m.reset(this.search_box);l.set(this.search_box);if(this.async_request!==null){this.async_request.abort();this.async_request=null;}k.addClass(this.clear_button,'hidden_elem');},update:function(){var p=m.getValue(this.search_box);if(p===this._lastQuery)return;this._lastQuery=p;if(p===''){this.clearResults();return;}this.show(this.loader);var q={query:p,width:this._width||n,source:this.source};this.async_request=new i('/help/ajax/search/').setData(q).setHandler((function(r){this._update(r);}).bind(this));this.async_request.send();},_update:function(p){this.async_request=null;var q=p.getPayload().results;j.setContent(this.results_area,q);this.show(this.results_area);if(m.getValue(this.search_box)===''){this.clearResults();}else k.removeClass(this.clear_button,'hidden_elem');},setTimer:function(){if(this._timerID!==0)clearTimeout(this._timerID);this._timerID=setTimeout(this.update.bind(this),300);if(this.async_request!=null){this.async_request.abort();this.async_request=null;}},show:function(p){var q=[this.loader,this.topics_area,this.results_area];for(var r=0;r<q.length;r++)k.addClass(q[r],'hidden_elem');k.removeClass(p,'hidden_elem');}});f.exports=o;},null);
__d('BookmarkFeedSorter',['Run'],function a(b,c,d,e,f,g,h){if(c.__markCompiled)c.__markCompiled();var i,j={init:function(k){i=k;h.onLeave(function(){i=null;});},setChecked:function(k){if(i)i.setValue(k);}};f.exports=j;},null);
__d('RequestsJewel',['Animation','AccessibilityLogger','Arbiter','AsyncRequest','AsyncSignal','ChannelConstants','CSS','DOM','Event','LinkController','Parent','ScrollableArea','Vector','MarauderLogger','$','debounce','ge','shield','fbt','JewelQPLogging','requireWeak'],function a(b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,aa,ba){if(c.__markCompiled)c.__markCompiled();var ca=null;ba('FriendBrowserCheckboxController',function(ha){return ca=ha;});var da=530,ea=30,fa=160;Object.assign(ga,{instance:null,getInstance:function(){return ga.instance;},replaceJewelTitle:function(ha,ia){o.setContent(v(ha),ia);},updateFromDOM:function(){if(ga.instance)ga.instance.fromDom();},setInitialHeight:function(){if(ga.instance)ga.instance.setHeight();},maybeLoadJewel:function(){if(ga.instance)ga.instance.maybeLoadJewel();}});function ga(ha,ia,ja){'use strict';var ka=ia;if(typeof ia!=='string'){ka=ia.inbox_folder;ja=ia.do_new_mark_read;}ga.instance=this;this.countNew=0;this.jewel=ha;this.jewelFlyoutCase=ha.getRoot();this.jewelFlyout=x('fbRequestsFlyout');this.newCountSpan=x('newRequestCount');this.folder=ka;this.doNewMarkRead=ja;this.openTimestamp=0;this.$RequestsJewel1={};this.$RequestsJewel2=0;this.shouldClearPredictionAssocOnClick=false;this.$RequestsJewel3=-1;var la=x('requestsMarkReadButton');if(la)p.listen(la,'click',y(this.$RequestsJewel4,this));this.jewel.subscribe('marked-seen',y(this.$RequestsJewel5,this));this.jewel.subscribe('closed',y(this.$RequestsJewel6,this));this.jewel.subscribe('updated',this.$RequestsJewel7.bind(this));this.jewel.subscribe('opened',this.$RequestsJewel8.bind(this));q.registerHandler(this.$RequestsJewel9.bind(this));j.subscribe(m.getArbiterType('jewel_requests_add'),this.$RequestsJewel10.bind(this));j.subscribe(m.getArbiterType('jewel_friending_notifs'),this.$RequestsJewel11.bind(this));j.subscribe(m.getArbiterType('jewel_requests_remove_old'),this.$RequestsJewel12.bind(this));j.subscribe(m.getArbiterType('friend_requests_seen'),this.$RequestsJewel13.bind(this));p.listen(this.jewelFlyout,'submit',(function(na){var oa=r.byClass(na.getTarget(),'objectListItem');if(oa){n.removeClass(oa,'jewelItemNew');n.addClass(oa,'jewelItemResponded');}}).bind(this));var ma=o.find(x('fbRequestsJewel'),'a[rel="toggle"]');p.listen(ma,'focus',(function(na){i.logFocusIn();}).bind(this));this.setupScroll();p.listen(window,'resize',w((function(){this.$RequestsJewel14();}).bind(this)));j.subscribe('pymk-x-out',this.$RequestsJewel15.bind(this));}ga.prototype.setupScroll=function(){'use strict';var ha=o.scry(this.jewelFlyout,'.uiScrollableAreaWrap')[0];if(ha){this.$RequestsJewel16=ha;this.$RequestsJewel17=0;this.$RequestsJewel18=p.listen(ha,'scroll',this.$RequestsJewel19.bind(this),p.Priority.$RequestsJewel20);this.$RequestsJewel15();}};ga.prototype.fromDom=function(){'use strict';o.scry(this.jewelFlyout,'.jewelItemList li.objectListItem').forEach((function(ha){var ia=ha.getAttribute('id');if(ia){var ja=x(ia+'_status'),ka=this.$RequestsJewel21(ia);if(ka.requester)this.$RequestsJewel1[ka.requester]=ia;++this.$RequestsJewel2;}}).bind(this));this.$RequestsJewel22();};ga.prototype.$RequestsJewel23=function(ha){'use strict';var ia=ha.match(/^(\d+)_(\d+)/);return ia?{requester:ia[1],type:ia[2]}:undefined;};ga.prototype.$RequestsJewel21=function(ha){'use strict';var ia=ha?this.$RequestsJewel23(ha):undefined,ja;if(ia&&ia.requester){ja=parseInt(ia.requester,10);if(isNaN(ja))ja=undefined;}var ka;if(ia&&ia.type){ka=parseInt(ia.type,10);if(isNaN(ka))ka=undefined;}return {requester:ja,type:ka};};ga.prototype.$RequestsJewel24=function(){'use strict';if(this.countNew>0)this.countNew-=1;};ga.prototype.$RequestsJewel9=function(ha,event){'use strict';var ia=r.byClass(ha,'jewelItemNew');if(ia&&r.byClass(ia,'fbRequestList')&&r.byClass(ia,'beeperEnabled')){var ja=this.$RequestsJewel23(ia.id);ja&&this.$RequestsJewel5(ja.requester,ja.type);this.$RequestsJewel24();j.inform('jewel/count-updated',{jewel:'requests',count:this.countNew});n.removeClass(ia,'jewelItemNew');}return true;};ga.prototype.$RequestsJewel25=function(){'use strict';return o.scry(this.jewelFlyout,'.uiScrollableArea')[0];};ga.prototype.$RequestsJewel19=function(){'use strict';var ha=o.scry(this.$RequestsJewel16,'.uiMorePager');if(!ha)return;var ia=ha.pop();if(ia){var ja=t.getElementPosition(ia,'viewport').y;if(ja>0)n.addClass(r.byClass(this.$RequestsJewel16,'uiScrollableArea'),'contentAfter');var ka=o.find(ia,'a');if(!ka)return;var la=t.getElementPosition(ka,'viewport').y;if(la==this.$RequestsJewel17)return;var ma=t.getElementPosition(this.$RequestsJewel16,'viewport').y+t.getElementDimensions(this.$RequestsJewel16).y;if(la-300<ma&&la>0){this.$RequestsJewel17=la;var na=ka.getAttribute('ajaxify');if(na){new k(na).setRelativeTo(ka).setStatusElement(r.byClass(ka,'stat_elem')).send();}else ca&&ca.getInstance('jewel').showMore();}}this.$RequestsJewel15();};ga.prototype.$RequestsJewel11=function(ha,ia){'use strict';if(!ia||this.jewel.isOpen())return;if(ia.obj.notif_type!=='friend_confirmed')return;if(x('fbRequestsJewelLoading')){new k().setURI('/ajax/requests/loader/').send();return;}var ja={};ja.reloadcontent=true;new k().setURI('/ajax/requests/loader/').setData(ja).send();};ga.prototype.$RequestsJewel10=function(ha,ia){'use strict';if(!ia)return;var ja=ia.obj.from,ka=ia.obj.suggester,la=this.$RequestsJewel21(this.$RequestsJewel1[ja]).type,ma=la===19&&!ka;if(!ma&&(la||this.jewel.isOpen()))return;if(x('fbRequestsJewelLoading')){new k().setURI('/ajax/requests/loader/').send();}else{var na={};na.reloadcontent=true;new k().setURI('/ajax/requests/loader/').setData(na).send();}};ga.prototype.$RequestsJewel12=function(ha,ia){'use strict';if(!ia||this.jewel.isOpen()||x('fbRequestsJewelLoading')!==null)return;var ja=this.$RequestsJewel1[ia.obj.from],ka=ja&&x(ja);if(ka){if(n.hasClass(ka,'jewelItemNew')){this.$RequestsJewel24();j.inform('jewel/count-updated',{jewel:'requests',count:this.countNew});}if(!n.hasClass(ka,'jewelItemResponded')){o.remove(ka);delete this.$RequestsJewel1[ia.obj.from];--this.$RequestsJewel2;this.$RequestsJewel22();}}};ga.prototype.$RequestsJewel4=function(){'use strict';this.jewel.markSeen();this.$RequestsJewel26();};ga.prototype.$RequestsJewel5=function(ha,ia){'use strict';var ja=o.scry(this.jewelFlyout,'li');new l('/ajax/gigaboxx/endpoint/UpdateLastSeenTime.php',{folder:this.folder,first_item:ja[0].id}).send();var ka=typeof ha!='undefined'&&typeof ia!='undefined'?{requester:ha,type:ia}:{};this.doNewMarkRead&&new l('/ajax/requests/mark_read/',ka).send();};ga.prototype.$RequestsJewel13=function(ha,ia){'use strict';j.inform('jewel/count-updated',{jewel:'requests',count:0});};ga.prototype.$RequestsJewel26=function(ha,ia){'use strict';o.scry(this.jewel.root,'li.jewelItemNew').forEach(function(ja){n.removeClass(ja,'jewelItemNew');});};ga.prototype.$RequestsJewel7=function(ha,ia){'use strict';this.countNew=ia.count;n.conditionClass(this.jewelFlyout,'beeperUnread',this.countNew>0);n.conditionClass(this.jewelFlyoutCase,'showRequests',this.countNew>0);if(this.newCountSpan){var ja=this.countNew==1?z._("{num} NEW REQUEST",[z.param('num',this.countNew)]):z._({"*":"{num} NEW REQUESTS"},[z.param('num',this.countNew,[0])]);o.setContent(this.newCountSpan,ja);}};ga.prototype.$RequestsJewel22=function(){'use strict';o.scry(this.jewelFlyout,'li.empty').forEach((function(ha){n.conditionShow(ha,this.$RequestsJewel2<=0);}).bind(this));};ga.prototype.$RequestsJewel8=function(){'use strict';j.inform('requestsJewel/opened');var ha=x('fbRequestsJewelLoading'),ia=this.$RequestsJewel25();if(!ha&&!ia){this.unhandledRequest=true;}else if(ha){var ja=Date.now();if(this.openTimestamp+5000<ja){this.openTimestamp=ja;new k().setURI('/ajax/requests/loader/').setData({log_impressions:true}).send();}}else{var ka=Object.keys(this.$RequestsJewel1);if(ka.length>0)new k().setURI('/friends/requests/log_impressions').setData({ids:ka.join(','),ref:'jewel'}).send();}ia&&s.poke(ia);aa.onJewelOpened();};ga.prototype.$RequestsJewel6=function(){'use strict';j.inform('requestsJewel/closed');this.$RequestsJewel26();};ga.prototype.$RequestsJewel27=function(){'use strict';return Math.min(Math.max(t.getViewportDimensions().y-fa,ea),da);};ga.prototype.$RequestsJewel14=function(){'use strict';if(this.$RequestsJewel25())new h(this.$RequestsJewel25()).to('height',this.$RequestsJewel27()+'px').duration(100).go();};ga.prototype.$RequestsJewel15=function(){'use strict';var ha=o.scry(this.jewelFlyout,'li.friendBrowserListUnit'),ia=t.getElementPosition(this.$RequestsJewel16,'viewport').y+t.getElementDimensions(this.$RequestsJewel16).y,ja=ha.length-1;while(ja>this.$RequestsJewel3){var ka=t.getElementPosition(ha[ja],'viewport').y;if(ka>0&&ka+t.getElementDimensions(ha[ja]).y<=ia)break;ja-=1;}var la=ja;while(ja>this.$RequestsJewel3){var ma=o.find(ha[ja],'input.friendBrowserID'),na=parseInt(ma.value,10),oa={pymk_id:na,pymk_location:'pymk_jewel'};u.log('regular_pymk_imp',undefined,oa);ja-=1;}this.$RequestsJewel3=Math.max(this.$RequestsJewel3,la);};ga.prototype.setHeight=function(){'use strict';this.$RequestsJewel25().style.height=this.$RequestsJewel27()+'px';};ga.prototype.maybeLoadJewel=function(){'use strict';if(this.unhandledRequest){this.unhandledRequest=false;this.$RequestsJewel8();}};f.exports=ga;},null);
__d('ModalMask',['DOM'],function a(b,c,d,e,f,g,h){if(c.__markCompiled)c.__markCompiled();var i=null,j=0,k={show:function(){j++;if(!i){i=h.create('div',{id:'modalMaskOverlay'});h.appendContent(document.body,i);}},hide:function(){if(j){j--;if(!j&&i){h.remove(i);i=null;}}},getNode:function(){return i;}};f.exports=k;},null);
__d('LitestandChromeHomeCount',['Arbiter','AsyncRequest','CSS','DOM','Event','LitestandMessages','NavigationMessage','Style','UserAgent','WildWildWestJSGating','cx'],function a(b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r){if(c.__markCompiled)c.__markCompiled();var s={},t,u,v=0;function w(){u&&clearTimeout(u);if(t)return;var aa=q.badge_update_time;u=setTimeout(x,aa);}function x(){if(t)return;new i().setURI('/ajax/litestand/newsfeed_count').setHandler(function(aa){if(t)return;z.setCount(aa.getPayload());w();}).setAllowCrossPageTransition(true).send();}function y(aa){o.set(s.wrapNode,'max-width',aa===0?'0':null);j.conditionClass(s.wrapNode,"_461d",aa>0);var ba=aa>s.max?s.max+'+':aa;k.setContent(s.countNode,ba);}var z={init:function(aa){s=aa;l.listen(s.homeNode,'click',function(event){var ba=event.getModifiers(),ca=ba.shift,da=ba.meta,ea=ba.control;if(ca||p.isPlatform('Mac OS X')&&da||p.isPlatform('Windows')&&ea)y(0);});h.subscribe(m.NEWSFEED_LOAD,(function(){t=true;this.setCount(0);}).bind(this));h.subscribe(m.LEAVE_HOME,function(){t=false;w();});w();},setCount:function(aa){y(t?0:aa);if(q.show_badge_bk){h.inform(n.NAVIGATION_COUNT_UPDATE,{key:'nf',count:t?0:aa-v});v=aa;}}};f.exports=z;},null);
__d('runAfterScrollingStops',['Arbiter','Event','Run','debounceAcrossTransitions','emptyFunction'],function a(b,c,d,e,f,g,h,i,j,k,l){if(c.__markCompiled)c.__markCompiled();function m(x,y,z){if(y&&p[y])return;if(!o){h.subscribe('page_transition',w);o=true;}if(!n){x();return;}y&&(p[y]=1);q.push(x);if(!z){if(s){j.onLeave(w);s=false;}r.push(q.length-1);}}var n,o,p={},q=[],r=[],s=true,t=500,u=k(function(){n=false;var x=q;q=[];r=[];p={};for(var y=0,z=x.length;y<z;++y)x[y]();},t);function v(){n=true;u();}function w(){var x=r;r=[];s=true;for(var y=0,z=x.length;y<z;++y)q[x[y]]=l;}i.listen(window,'scroll',v);f.exports=m;},null);
__d('LitestandOffscreenController',['Arbiter','CSS','DOMQuery','Event','getFullScreenElement','NavigationMessage','Run','Scroll','Style','SubscriptionsHandler','Vector','cx','csx','getOrCreateDOMID','queryThenMutateDOM','runAfterScrollingStops','throttle'],function a(b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x){if(c.__markCompiled)c.__markCompiled();var y=1,z=9,aa=10,ba={},ca=false,da,ea,fa,ga,ha=[];function ia(){da&&da.release();da=null;ca=false;}function ja(){ba={};ha=[];}function ka(){if(i.hasClass(document.body,"_5vb_"))return aa;return z;}function la(){ga=ga||r.getViewportDimensions().y;ea=r.getScrollPosition().y;fa=ea+ga;if(y){ea-=ga*y;fa+=ga*y;}for(var ta in ba){var ua=ba[ta];ua.position=r.getElementPosition(ua.element).y;if(!ua.hidden)ua.height=ua.element.offsetHeight;}}function ma(){var ta=[],ua=l();for(var va in ba){var wa=ba[va],xa=wa.position,ya=xa+wa.height<ea,za=xa>fa;if(!ua&&!wa.hidden&&(ya||za)){na(wa);}else if(!ya&&!za){wa.pendingHide=false;if(wa.hidden){if(wa.dirty&&xa<ea){ta.push(va);i.addClass(oa(wa),"_49nu");}else p.apply(wa.element,{height:'',marginBottom:''});i.show(oa(wa));wa.dirty=false;wa.hidden=false;}}}if(!ta.length)return;var ab=0;v(function(){for(var bb=0,cb=ta.length;bb<cb;bb++){var db=ba[ta[bb]];ab+=db.height-oa(db).offsetHeight+p.getFloat(db.element,'marginBottom');}},function(){for(var bb=0,cb=ta.length;bb<cb;bb++){var db=ba[ta[bb]];i.removeClass(oa(db),"_49nu");p.apply(db.element,{height:'',marginBottom:''});}ab&&o.setTop(document.body,o.getTop(document.body)-ab);});}function na(ta){if(!ta.pendingHide){ha.push(ta);ta.pendingHide=true;}}function oa(ta){if(ta.wrapperElement)return ta.wrapperElement;var ua=ta.element;if(ua.firstElementChild)return ta.wrapperElement=ua.firstElementChild;for(var va=0;va<ua.childNodes.length;va++)if(ua.childNodes[va].tagName)return ta.wrapperElement=ua.childNodes[va];}function pa(){var ta=ka()+'px';for(var ua=0;ua<ha.length;ua++){var va=ha[ua];if(j.scry(va.element,"._52fb").length)va.pendingHide=false;if(va&&va.element&&va.pendingHide&&!va.hidden){p.apply(va.element,{height:va.height+'px',marginBottom:ta});i.hide(oa(va));va.hidden=true;va.pendingHide=false;}}ha=[];}function qa(){w(pa,'LitestandOffscreenController/hide');v(la,ma,'LitestandOffscreenController');}function ra(){n.onLeave(ia);da=new q();da.addSubscriptions(h.subscribe(m.NAVIGATION_BEGIN,ja),k.listen(window,'scroll',x(qa)),k.listen(window,'resize',x(function(){ga=null;qa();})));ca=true;}var sa={attachSubstream:function(ta){ca||ra();ba[u(ta)]={element:ta};}};f.exports=sa;},null);
__d('LitestandNewStoryController',['Animation','Arbiter','AsyncRequest','BlueBar','LitestandColumnManager','LitestandMessages','LitestandStream','Style','$','getScrollPosition','queryThenMutateDOM','requestAnimationFrame','setImmediate'],function a(b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t){if(c.__markCompiled)c.__markCompiled();var u=50,v=600,w=500,x,y,z;function aa(){z&&clearTimeout(z);z=null;}function ba(){z=setTimeout(function(){z=null;ca();},w);}function ca(){var ia;r(function(){ia=n.canInsertNewerStories();},function(){if(ia){fa();}else ba();},'LitestandNewStoryController/tryShowingStories');}function da(ia){var ja=new h(ia).from('opacity',0).to('opacity',1).duration(v);ja.go();setTimeout(function(){ja.stop();o.set(ia,'opacity',1);},v+200);}function ea(ia){aa();if(!y)return;var ja=y.nextSibling;if(ia&&ja)var ka=ja.offsetTop;o.apply(y,{height:'',left:'',overflow:'',position:'',width:''});if(ia){var la=ja.offsetTop+u,ma=la-ka,na=q(window);l.adjustVerticalWindowPosition(na,ma);s(function(){l.adjustVerticalWindowPosition(na,ma);da(y);if(x){x.setAtTop();x.show(ma);}});}else da(y);i.inform(m.STORIES_INSERTED);i.inform(m.NEWER_STORIES_INSERTED);t(function(){return i.inform('reflow');});new j().setURI('/ajax/litestand/update_filter_viewtime').setData({section_id:n.getSectionID()}).send();}function fa(){ea(k.hasFixedBlueBar());}function ga(){ea(false);}var ha={waitForDisplay:function(ia){if(!y)y=p(ia);if(n.canInsertNewerStories()){fa();}else ba();},showStoriesNow:function(ia){y=ia;ga();},setNewStoryPill:function(ia){x=ia;}};f.exports=ha;},null);
__d('OnVisible',['Arbiter','DOM','Event','Parent','Run','Vector','ViewportBounds','coalesce','queryThenMutateDOM'],function a(b,c,d,e,f,g,h,i,j,k,l,m,n,o,p){if(c.__markCompiled)c.__markCompiled();var q=[],r,s=0,t=[],u,v,w,x,y;function z(){q.forEach(function(fa){fa.remove();});if(v){v.remove();u.remove();r.unsubscribe();v=u=r=null;}s=0;q.length=0;}function aa(){if(!q.length){z();return;}t.length=0;w=m.getScrollPosition().y;x=m.getViewportDimensions().y;y=n.getTop();for(var fa=0;fa<q.length;++fa){var ga=q[fa];if(isNaN(ga.elementHeight))t.push(fa);ga.elementHeight=m.getElementDimensions(ga.element).y;ga.elementPos=m.getElementPosition(ga.element);ga.hidden=k.byClass(ga.element,'hidden_elem');if(ga.scrollArea){ga.scrollAreaHeight=m.getElementDimensions(ga.scrollArea).y;ga.scrollAreaY=m.getElementPosition(ga.scrollArea).y;}}s=fa;}function ba(){for(var fa=Math.min(q.length,s)-1;fa>=0;--fa){var ga=q[fa];if(!ga.elementPos||ga.removed){q.splice(fa,1);continue;}if(ga.hidden)continue;var ha=w+x+ga.buffer,ia=false;if(ha>ga.elementPos.y){var ja=w+y-ga.buffer,ka=w+y+x+ga.buffer,la=ga.elementPos.y+ga.elementHeight,ma=!ga.strict||ja<ga.elementPos.y&&ka>la;ia=ma;if(ia&&ga.scrollArea){var na=ga.scrollAreaY+ga.scrollAreaHeight+ga.buffer;ia=ga.elementPos.y>ga.scrollAreaY-ga.buffer&&ga.elementPos.y<na;}}if(ga.inverse?!ia:ia){ga.remove();ga.handler(t.indexOf(fa)!==-1);}}}function ca(){da();if(q.length)return;v=j.listen(window,'scroll',da);u=j.listen(window,'resize',da);r=h.subscribe('dom-scroll',da);}function da(){p(aa,ba,'OnVisible/positionCheck');}function ea(fa,ga,ha,ia,ja,ka){'use strict';this.element=fa;this.handler=ga;this.strict=ha;this.buffer=o(ia,300);this.inverse=o(ja,false);this.scrollArea=ka||null;if(this.scrollArea)this.scrollAreaListener=this.$OnVisible1();if(q.length===0)l.onLeave(z);ca();q.push(this);}ea.prototype.remove=function(){'use strict';if(this.removed)return;this.removed=true;if(this.scrollAreaListener)this.scrollAreaListener.remove();};ea.prototype.reset=function(){'use strict';this.elementHeight=null;this.removed=false;if(this.scrollArea)this.scrollAreaListener=this.$OnVisible1();q.indexOf(this)===-1&&q.push(this);ca();};ea.prototype.setBuffer=function(fa){'use strict';this.buffer=fa;da();};ea.prototype.checkBuffer=function(){'use strict';da();};ea.prototype.getElement=function(){'use strict';return this.element;};ea.prototype.$OnVisible1=function(){'use strict';return j.listen(i.find(this.scrollArea,'.uiScrollableAreaWrap'),'scroll',this.checkBuffer);};Object.assign(ea,{checkBuffer:da});f.exports=ea;},null);
__d('LitestandStreamLoader',['$','Arbiter','Bootloader','CSS','DOM','EntstreamStoryDeduper','Event','JSXDOM','LitestandMessages','LitestandOffscreenController','LitestandStoryInsertionStatus','LitestandStream','NavigationMessage','OnVisible','Run','UserActivity','ge','getElementPosition','getOrCreateDOMID','getUnboundedScrollPosition','getViewportDimensions','throttle'],function a(b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,aa,ba,ca){if(c.__markCompiled)c.__markCompiled();var da=0,ea=false,fa={},ga,ha,ia,ja,ka,la,ma=0,na,oa,pa=[],qa=0,ra,sa;function ta(){v.onLeave(ua);da=0;pa=[i.subscribe(t.NAVIGATION_BEGIN,ua),i.subscribe(p.NEWER_STORIES_INSERTED,function(){sa=null;})];pa.push(i.subscribe('layer_shown',function(kb,lb){if(lb&&lb.type==='DialogX')da++;}),i.subscribe('layer_hidden',function(kb,lb){if(lb&&lb.type==='DialogX')da--;}));r.registerBlocker(function(){return da>0;});ea=true;}function ua(){i.inform(p.LEAVE_HOME);ea=false;fa={};oa=null;ma=0;pa.forEach(i.unsubscribe);pa=[];ga&&ga.remove();ka&&clearTimeout(ka);ka=null;ja=null;sa=null;na&&na.remove();na=null;qa=0;}function va(kb){ka&&clearTimeout(ka);ka=setTimeout(function(){ka=null;bb();},kb);}function wa(){if(oa&&ja&&oa.pollIntervalMS&&oa.pollIntervalMS>1000){w.setIdleTime(oa.newStoryIdleTime);va(oa.pollIntervalMS);}}function xa(){ga=new u(l.find(ha,'a'),ib.bind(null),false,oa.bufferPixels);}function ya(){var kb=aa(window).y;return kb>oa.firstPagerScrollBuffer;}function za(){if(ya()){xa();na&&na.remove();na=null;}}function ab(kb){var lb=l.find(ha,'a');n.listen(lb,'click',function(event){ib();na&&na.remove();na=null;event.preventDefault();});var mb=y(ha),nb=ba();if(kb&&mb.y<nb.height){ib();}else if(kb&&!ya()){na=n.listen(window,'scroll',ca(za));}else xa();}function bb(){if(!ja)return;if(!w.isActive(oa.newStoryIdleTime)){w.subscribeOnce(bb);return;}if(w.hasBeenInactive()){w.resetActiveStatus();var kb=oa.pollIntervalMS,lb=Date.now()-w.getLastInActiveEnds();if(lb<kb){va(kb-lb);return;}}if(!s.canInsertNewerStories()){va(oa.pollIntervalMS);return;}cb();}function cb(){if(!ja)return;ka&&clearTimeout(ka);if(!sa){var kb=s.getStreamRoot();sa=o.div({style:{height:0,width:kb.offsetWidth+'px',left:'-10000px',opacity:0,overflow:'hidden',position:'absolute'}});l.prependContent(kb,sa);i.inform(p.NEW_STORIES_CONTAINER_CREATED,sa);}var lb=o.div(null);l.prependContent(sa,lb);j.loadModules(["UIPagelet"],function(mb){mb.loadFromEndpoint('LitestandNewerStoriesPagelet',lb,Object.assign(ja,{cursor:ra,containerID:z(sa)}),{crossPage:true});});}function db(){var kb=z(ha);k.addClass(ha,'async_saving');var lb=gb(),mb=lb.cursor,nb=lb.storiesCount;if(fa[mb])throw new Error('This cursor has been used before, stories will be '+'repeated. Cursor: '+mb);fa[mb]=mb;var ob={cursor:mb,pager_config:ia,pager_id:kb,scroll_count:++ma,feed_stream_id:s.getFeedStreamID(),client_stories_count:nb};j.loadModules(["UIPagelet"],function(pb){pb.loadFromEndpoint(oa.pagerController,z(la),ob,{append:true,automatic:true,usePipe:true,crossPage:oa.crossPage,errorHandler:eb,transportErrorHandler:eb});i.inform(p.STORIES_REQUESTED);});}function eb(kb){var lb=gb();delete fa[lb.cursor];k.removeClass(ha,'async_saving');}function fb(){var kb=hb();if(kb.length){return kb[0].getAttribute('data-cursor');}else return ha&&ha.getAttribute('data-cursor');}function gb(){var kb=hb(),lb={};if(kb.length){lb.cursor=kb[kb.length-1].getAttribute('data-cursor');lb.storiesCount=kb.length;}else{lb.cursor=ha&&ha.getAttribute('data-cursor');lb.storiesCount=0;}return lb;}function hb(){var kb=l.scry(la,s.getStoriesSelector());return kb.filter(function(lb){return lb.getAttribute('data-cursor');});}function ib(){if(ea){db();ga&&ga.remove();ga=null;}}var jb={register:function(kb,lb,mb,nb){ea||ta();oa=babelHelpers._extends({bufferPixels:1000,firstPagerScrollBuffer:100,pagerController:'LitestandMoreStoriesPagelet',pollIntervalMS:null,newStoryIdleTime:60000},lb);ia=mb;la=h(kb);ra=fb();ha=nb;ab(true);wa();},removeOldPager:function(kb,lb){if(kb)l.remove(h(kb));k.show(h(lb));},removeLoadingIndicator:function(kb,lb){var mb=x(kb);if(mb)l.remove(mb);k.show(lb);},moreStoriesInserted:function(kb){i.inform(p.STORIES_INSERTED,{substream_id:kb});var lb=h(kb);q.attachSubstream(lb);},attachNewPager:function(kb){m.dedupeHide(s.getStreamRoot(),s.getStoriesSelector());ha=kb;ha&&ab(false);},setPollerData:function(kb){if(kb){ja=kb;wa();}},headLoadCompleted:function(kb){ra=kb.newCursor;wa();var lb=kb.stories;if(lb&&lb.length>0){for(var mb=lb.length-1;mb>=0;mb--)lb[mb].setAttribute('data-insertion-position',--qa);m.dedupe(s.getStreamRoot(),s.getStoriesSelector());i.inform('Stream/totalHeadLoadedStories',{count:-qa});}},forceNewFetch:cb};f.exports=jb;},null);
__d('ViewableImpressionTracking',['Arbiter','DesktopHscrollUnitEventConstants','ErrorUtils','LitestandMessages','Run','ViewableImpressionEventHandler','ViewableImpressionConfig'],function a(b,c,d,e,f,g,h,i,j,k,l,m,n){if(c.__markCompiled)c.__markCompiled();var o={init:function(){if(m.instance===undefined){m.instance=new m(n);m.instance.listeners.addSubscriptions(h.subscribe([k.STORIES_INSERTED,'AdsRefreshHandler/AdsLoaded','MPPInsights/ChartView','PhotoSnowliftAds/displayUnits','WebMessengerAdsControl/adjustAds',i.HSCROLL_ITEM_INSERTED_EVENT,'WebVideoChannelAds/AdsLoaded'],j.guard(function(){m.instance.refreshAndFireEvent();},'ViewableImpressionTracking')));}l.onLoad(function(){m.instance.refreshAndFireEvent();});}};f.exports=o;},null);
__d('MercuryJewelModuleLoader',['JSResource'],function a(b,c,d,e,f,g,h){if(c.__markCompiled)c.__markCompiled();f.exports=h('MercuryJewel');},null);
__d('AccessibilityShortcut',['AccessibilityLogger','Event','Focus','ge','onEnclosingPageletDestroy','warning'],function a(b,c,d,e,f,g,h,i,j,k,l,m){if(c.__markCompiled)c.__markCompiled();var n={init:function(o,p){var q=i.listen(o,'click',function(r){r.preventDefault();var s=k(p);if(s){j.set(s);h.logSRKey();}else m(s,'Failed to set focus on element with ID: %s',p);});l(o,function(){return q.remove();});}};f.exports=n;},null);
__d('PopoverAsyncMenu',['Bootloader','Event','KeyStatus','PopoverMenu','VirtualCursorStatus','setImmediate'],function a(b,c,d,e,f,g,h,i,j,k,l,m){if(c.__markCompiled)c.__markCompiled();var n,o,p={},q=0;n=babelHelpers.inherits(r,k);o=n&&n.prototype;function r(s,t,u,v,w,x){'use strict';o.constructor.call(this,s,t,null,w);this._endpoint=v;this._endpointData=x||{};this._loadingMenu=u;this._instanceId=q++;p[this._instanceId]=this;this._mouseoverListener=i.listen(t,'mouseover',this.fetchMenu.bind(this));}r.prototype._onLayerInit=function(){'use strict';if(!this._menu&&this._loadingMenu)this.setMenu(this._loadingMenu);this._popover.getLayer().subscribe('key',this._handleKeyEvent.bind(this));this._triggerInfo={isKeyDown:j.isKeyDown(),isVirtualCursorTriggered:l.isVirtualCursorTriggered()};m((function(){return this.fetchMenu();}).bind(this));};r.prototype._onPopoverHide=function(){'use strict';o._onPopoverHide.call(this);this._triggerInfo=null;};r.prototype.fetchMenu=function(){'use strict';if(this._fetched)return;h.loadModules(["AsyncRequest"],(function(s){new s().setURI(this._endpoint).setData(Object.assign({pmid:this._instanceId},this._endpointData)).send();}).bind(this));this._fetched=true;if(this._mouseoverListener){this._mouseoverListener.remove();this._mouseoverListener=null;}};r.prototype._setFocus=function(s){'use strict';var t=this._triggerInfo||{},u=t.isKeyDown,v=t.isVirtualCursorTriggered;this.setInitialFocus(s,u||v);this._triggerInfo=null;};r.setMenu=function(s,t){'use strict';var u=p[s];u.setMenu(t);u._setFocus(t);};r.getInstance=function(s){'use strict';return p[s];};r.getInstanceByTriggerElem=function(s){'use strict';var t=null;Object.keys(p).forEach(function(u){if(p[u]._triggerElem==s)t=p[u];});return t;};f.exports=r;},null);
__d("RenderManager",[],function a(b,c,d,e,f,g){if(c.__markCompiled)c.__markCompiled();function h(i){"use strict";this._isDirty=false;this._obj=i;}h.prototype.dirty=function(){"use strict";if(!this._isDirty){this._isDirty=true;setTimeout(this._doPaint.bind(this),0);}};h.prototype._doPaint=function(){"use strict";this._isDirty=false;this._obj.paint();};f.exports=h;},null);
__d('ViewportTrackingHelper',['Event','Vector','getViewportDimensions'],function a(b,c,d,e,f,g,h,i,j){if(c.__markCompiled)c.__markCompiled();var k={getScrollListener:function(l){return h.listen(window,'scroll',l);},looseIsVisible:function(l,m){if(!l.x&&!l.y&&!l.width&&!l.height)return false;var n=i.getScrollPosition().y,o=j().height,p=o+m-n;return l.y<p;},isVisible:function(l,m){if(!l.x&&!l.y&&!l.width&&!l.height)return false;var n=j().height,o=Math.max(l.y,0),p=Math.min(l.y+l.height,n),q=Math.min(l.height,m);return p-o>=q;},isDescendantOf:function(l,m){if(l===m)return l;while(l&&l.parentNode){if(l.parentNode===m)return l;l=l.parentNode;}return false;}};f.exports=k;},null);
__d('ViewportTracking',['Arbiter','AsyncSignal','Banzai','BanzaiScuba','CSS','CurrentUser','DOM','DOMDimensions','Event','LitestandMessages','NavigationMessage','Run','SubscriptionsHandler','UserActivity','Vector','ViewportTrackingHelper','clickRefAction','collectDataAttributes','cx','debounce','getElementPosition','getViewportDimensions','throttle'],function a(b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,aa,ba,ca,da){if(c.__markCompiled)c.__markCompiled();var ea=97,fa=51,ga='vpv',ha='/feed/feed_tracking/vpv_waterfall_logging',ia=3,ja=2,ka=1,la=0,ma=1,na=2,oa=3,pa=4;function qa(){'use strict';}qa.prototype.init=function(ra){'use strict';this.useBanzai=true;this.viewportHeightRatio=ra.viewport_height_ratio?ra.viewport_height_ratio:.25;this.vpvDebug=!!ra.vpv_debug;this.vpvdDebug=!!ra.vpvd_debug;this.vpvdAnalysis=!!ra.vpvd_analysis;this.useWaterfallLogging=!!ra.waterfall_logging;this.loggedStoryIDs={};this.readStoryIDs={};this.annotatedStoryIDs={};this.minSizeToBeVisible=200;this.minFractionToBeVisibleForTimetracking=.5;this.scrollThrottlingInterval=100;this.mouseThrottlingInterval=100;this.keyboardThrottlingInterval=100;this.minTimeToReportImmediately=500;this.discardVPVDIntervalThreshold=90000;this.active_state_duration=1000;this.height_diff_to_change_state=25;this.focused_state_duration=3500;this.invalidateAllStoriesCache();this.cachedViewportHeight=ca().height;this.isTimetrackingEnabled=0;this.activeStories={};this.userInactiveLock=false;this.userActivityPollerTimeoutID=-1;this._headLoadStoryCount=0;this.getDataFromConfig(ra);if(this.isTimetrackingEnabled){this.lastMouseX=-1;this.lastMouseY=-1;this.lastStreamY=-1;this.latestStreamYChangedTimeStamp=-1;this.userFocus=na;this.latestUserFocus=na;this.latestUserActivity='init';this.focusedStory=null;this.latestFocusedStory=null;this.latestActiveStory=null;this.totalVPVDuration={};}this.isLoose=!!ra.is_loose;this.maxScrollPosition=0;if(ra.tracking_duration_config){this.scrollThrottlingInterval=ra.tracking_duration_config.scroll_throttling_interval;this.mouseThrottlingInterval=ra.tracking_duration_config.mouse_throttling_interval;this.keyboardThrottlingInterval=ra.tracking_duration_config.keyboard_throttling_interval;this.userActivityPollingInterval=ra.tracking_duration_config.user_activity_polling_interval;this.timeToBeConsideredInactive=ra.tracking_duration_config.time_to_be_considered_inactive;this.minFractionToBeVisibleForTimetracking=ra.tracking_duration_config.min_fraction_to_be_visible;this.minTimeToReportImmediately=ra.tracking_duration_config.min_time_to_report_immediately;this.active_state_duration=ra.tracking_duration_config.active_state_duration;this.height_diff_to_change_state=ra.tracking_duration_config.story_height_diff_to_change_state;this.focused_state_duration=ra.tracking_duration_config.focused_state_duration;this.discardVPVDIntervalThreshold=ra.tracking_duration_config.discard_vpvd_interval_threshold;}var sa,ta=aa(this.fireTimer,this.getTimeout(),this);if(this.isLoose){this.minSizeToBeVisible=0;sa=da((function(){this.maxScrollPosition=Math.max(this.maxScrollPosition,v.getScrollPosition().y);ta();}).bind(this));}else sa=ta;this.initialStories=this.getStoriesInView();this.initialStoriesLogged=false;if(this.annotatedVPVLogging)this.initialStories.forEach(this.logAnnotatedVPV,this);if(this.useWaterfallLogging)this.getStoriesInView().forEach(function(xa){this.waterfallLogStep(xa,'100_all_stories_in_view_ignore_height',true);},this);this.vpvHeartBeatInterval=ra.vpv_heartbeat_interval;this.passVPVHeartbeatGK=ra.use_vpv_heartbeat;if(this.passVPVHeartbeatGK){this.intervalCount=1;this.fireTimerCount=1;this.storiesInView=this.initialStories?this.initialStories:this.getStoriesInView();this.vpvHeartBeatIntervalSignal=setInterval((function(){this._sendSignal('interval');}).bind(this),this.vpvHeartBeatInterval);}this.subscriptions=new t();this.subscriptions.addSubscriptions(this._getScrollListener(sa),p.listen(window,'resize',(function(){this.invalidateVisibleStoriesCache();this.cachedViewportHeight=ca().height;sa();}).bind(this)),p.listen(window,'focus',(function(){if(this.isTimetrackingEnabled)this.updateTimeTrackingData(false,'window_focus');}).bind(this)),p.listen(window,'blur',(function(){if(this.isTimetrackingEnabled)this.updateTimeTrackingData(true,'window_blur');}).bind(this)),h.subscribe(r.NAVIGATION_BEGIN,this.cleanup.bind(this)),h.subscribe('Stream/totalHeadLoadedStories',(function(xa,ya){this._headLoadStoryCount=ya.count;}).bind(this)),h.subscribe(q.STORIES_INSERTED,(function(){if(!this.initialStoriesLogged){var xa=this.getStoriesInView();xa.forEach(this.logAnnotatedVPV,this);}else sa();if(this.isTimetrackingEnabled)this.updateTimeTrackingData(false,'stories_inserted');}).bind(this)));if(this.isTimetrackingEnabled){this.updateTimeTrackingData(false,'init');var ua=da((function(event){this.invalidateVisibleStoriesCache();this.handleScroll(event);}).bind(this),this.scrollThrottlingInterval),va=da((function(event){this.handleKeyboard(event);}).bind(this),this.keyboardThrottlingInterval),wa=da((function(event){this.handleMouse(event);}).bind(this),this.mouseThrottlingInterval);this.subscriptions.addSubscriptions(p.listen(window,'scroll',ua),p.listen(document.documentElement,'DOMMouseScroll',ua),p.listen(document.documentElement,'mousewheel',ua));this.subscriptions.addSubscriptions(p.listen(document.documentElement,'keydown',va));this.subscriptions.addSubscriptions(p.listen(document.documentElement,'mouseover',wa),p.listen(document.documentElement,'mousemove',wa));this.subscriptions.addSubscriptions(h.subscribe('Event/stop',(function(xa,ya){this.handleMouse(ya.event);}).bind(this)));this.subscriptions.addSubscriptions(p.listen(document.documentElement,'click',(function(event){this.handleMouse(event);}).bind(this)),h.subscribe('PhotoSnowlift.OPEN',(function(){this.userFocus=oa;this.handleLayers();}).bind(this)),h.subscribe('PhotoSnowlift.CLOSE',(function(){this.userFocus=ma;this.focusedStory=null;this.updateTimeTrackingData(false,'snowlift_close');}).bind(this)));this._userActivityPoller();}s.onLeave(this.cleanup.bind(this));s.onUnload(this.cleanup.bind(this));};qa.prototype._getScrollListener=function(ra){'use strict';return p.listen(window,'scroll',ra);};qa.prototype.cleanup=function(){'use strict';if(this.subscriptions){this.subscriptions.release();this.subscriptions=null;}if(this.isTimetrackingEnabled){clearTimeout(this.userActivityPollerTimeoutID);this.updateTimeTrackingData(true,'cleanup');}if(this.passVPVHeartbeatGK)clearInterval(this.vpvHeartBeatIntervalSignal);if(this.annotatedVPVLogging){var ra=this.getStoriesInView();ra.forEach(this.logAnnotatedVPV,this);}this.initialStories=[];this._headLoadStoryCount=0;};qa.prototype.fireTimer=function(){'use strict';if(this.useWaterfallLogging){var ra=this.getStoriesInViewIgnoreHeight();ra.forEach(function(sa){this.waterfallLogStep(sa,'100_all_stories_in_view_ignore_height');},this);}if(!this.initialStoriesLogged){this.initialStories.forEach(this.markStoryRead,this);this.initialStoriesLogged=true;}this.storiesInView=this.getStoriesInView();this.storiesInView.forEach(this.markStoryRead,this);if(this.passVPVHeartbeatGK)this._sendSignal('fireTimer');};qa.prototype.heartBeatIsEnabled=function(){'use strict';return false;};qa.prototype.getSessionID=function(){'use strict';return null;};qa.prototype._sendSignal=function(ra){'use strict';if(!this.heartBeatIsEnabled())return;var sa=-1;if(ra=='interval'){sa=this.intervalCount++;}else if(ra=='fireTimer')sa=this.fireTimerCount++;var ta=-1,ua=-1,va=-1;if(this.storiesInView.length>0){ta=this.getStoryID(this.storiesInView[0]);ua=this.getQueryID(this.storiesInView[0]);va=this.getFBFeedLocations(this.storiesInView[0]);}var wa=new k('vpv_heartbeat_js');wa.addInteger('qid',ua);wa.addInteger('uid',m.getID());wa.addInteger('firststoryid',ta);wa.addInteger('time',Math.round(Date.now()/1000));wa.addNormal('type',ra);wa.addInteger('count',sa);wa.addInteger('fbfeed_location',va);wa.post();};qa.prototype._userActivityPoller=function(){'use strict';if(!this.userInactiveLock&&!u.isActive(this.timeToBeConsideredInactive)){this.userInactiveLock=true;this.userFocus=na;this.updateTimeTrackingData(false,'user_activity_inactive');u.subscribeOnce((function(){this.userFocus=ma;this.updateTimeTrackingData(false,'user_activity_active');this.userInactiveLock=false;}).bind(this));}this.userActivityPollerTimeoutID=setTimeout(this._userActivityPoller.bind(this),this.userActivityPollingInterval);};qa.prototype.getQueryID=function(ra){'use strict';return -1;};qa.prototype.getFBFeedLocations=function(ra){'use strict';return -1;};qa.prototype.getFBFeedInsertionPosition=function(ra){'use strict';return -1;};qa.prototype.createVPVDTimer=function(ra){'use strict';var sa=document.createElement("Label");sa.setAttribute("for",ra);sa.setAttribute("class",'vpvd_debug_timer');return sa;};qa.prototype.updateVPVDTimer=function(ra){'use strict';var sa=this.activeStories[ra].story,ta=n.scry(sa,'.vpvd_debug_timer');if(!ta.length){ta=[this.createVPVDTimer(sa),this.createVPVDTimer(sa)];var ua=n.scry(sa,'.UFIRow');if(ua.length&&ua[ua.length-1].clientWidth>0){ua[ua.length-1].appendChild(ta[0]);}else sa.appendChild(ta[0]);sa.insertBefore(ta[1],sa.firstChild);}var va=this.totalVPVDuration[ra],wa=Math.floor(va/1000)+'.'+Math.floor(va%1000/100);n.setContent(ta[0],wa);n.setContent(ta[1],wa);};qa.prototype.updateVPVDTimers=function(){'use strict';for(var ra in this.activeStories)if(this.activeStories.hasOwnProperty(ra))this.updateVPVDTimer(ra);};qa.prototype.logVpvdAnalysis=function(ra,sa,ta,ua,va,wa){'use strict';var xa=new k('vpv_duration');xa.addDenorm('qid',this.getQueryID(this.activeStories[ra].story));xa.addDenorm('uid',m.getID());xa.addDenorm('vsid',ra);xa.addInteger('time',Math.round(Date.now()/1000));xa.addInteger('duration',ua);xa.addInteger('total_duration',va);xa.addNormal('story_state',this.activeStories[ra].state);xa.addNormal('is_active_state',ta);xa.addNormal('num_visible_stories',this.numVisibleStories);xa.addInteger('story_height',this.activeStories[ra].story_height);xa.addInteger('story_visible_height',this.activeStories[ra].height);xa.addInteger('state_visible_height',wa);xa.addInteger('total_visible_height',this.totalVisibleHeight);xa.addInteger('total_height',this.totalHeight);xa.addNormal('user_focus',this.latestUserFocus);xa.addNormal('next_user_focus',this.userFocus);xa.addInteger('vpvd',sa);xa.addInteger('accumulated_vpvd',this.activeStories[ra].vpvd);xa.addNormal('user_activity',this.latestUserActivity);xa.addNormal('next_user_activity',this.userActivity);xa.addInteger('story_position_y',this.activeStories[ra].y);xa.addInteger('feed_insertion_position',this.getFBFeedInsertionPosition(this.activeStories[ra].story));xa.addNormal('visible_position',this.activeStories[ra].visible_position);xa.addNormal('is_focused_story',this.activeStories[ra].is_focused);xa.post();};qa.prototype.shouldDiscardStory=function(ra){'use strict';return this.activeStories[ra].height!=this.activeStories[ra].story_height&&this.activeStories[ra].height<this.totalHeight/2;};qa.prototype.calculateTotalHeight=function(){'use strict';this.totalHeight=0;for(var ra in this.activeStories)if(this.activeStories.hasOwnProperty(ra))this.totalHeight+=this.activeStories[ra].height;};qa.prototype.updateVPVDurations=function(ra){'use strict';if(this.latestUserFocus===na||ra-this.latestTimeTrackingTimestamp>this.discardVPVDIntervalThreshold)return;var sa={1:0,2:0,3:0},ta=ra-this.latestTimeTrackingTimestamp>=this.focused_state_duration;this.totalVisibleHeight=0;for(var ua in this.activeStories)if(this.activeStories.hasOwnProperty(ua))if(!(this.latestUserFocus===ma&&ta&&this.shouldDiscardStory(ua))){sa[this.activeStories[ua].state]+=this.activeStories[ua].height;this.totalVisibleHeight+=this.activeStories[ua].height;}var va=0,wa=ra-this.latestTimeTrackingTimestamp;if(this.latestUserFocus===ma){wa=sa[ia]>0?this.focused_state_duration:this.active_state_duration;wa=Math.min(wa,ra-this.latestTimeTrackingTimestamp);va=ra-this.latestTimeTrackingTimestamp-wa;}var xa=0,ya=ia;for(var za=ia;za>=ka;za--)if(sa[za]>0){xa=sa[za];ya=za;break;}var ab=sa[ia]+sa[ja]+sa[ka],bb=0;for(ua in this.activeStories)if(this.activeStories.hasOwnProperty(ua)){if(this.latestUserFocus===ma&&ta&&this.shouldDiscardStory(ua))continue;if(xa>0&&this.activeStories[ua].state>=ya){bb=wa*(this.activeStories[ua].height/xa);if(this.vpvdAnalysis&&wa>0)this.logVpvdAnalysis(ua,bb,true,wa,wa+va,xa);this.activeStories[ua].vpvd+=bb;this.totalVPVDuration[ua]+=bb;}if(ab>0){bb=va*(this.activeStories[ua].height/ab);if(this.vpvdAnalysis&&va>0)this.logVpvdAnalysis(ua,bb,false,va,wa+va,ab);this.activeStories[ua].vpvd+=bb;this.totalVPVDuration[ua]+=bb;}}};qa.prototype.updateActiveStory=function(ra,sa,ta,ua){'use strict';this.activeStories[ra].state=sa;this.activeStories[ra].ts=ta;this.activeStories[ra].height_snapshot=ua[ra].height;this.activeStories[ra].is_focused=this.focusedStory===ua[ra].story;this.activeStories[ra].story_height=ua[ra].story_height;if(this.vpvdAnalysis){this.activeStories[ra].visible_position=ua[ra].visible_position;this.activeStories[ra].y=ua[ra].y;}};qa.prototype.updateActiveStories=function(ra,sa){'use strict';for(var ta in ra)if(ra.hasOwnProperty(ta))if(ta in this.activeStories){this.activeStories[ta].height=ra[ta].height;var ua=ra[ta].height-this.activeStories[ta].height_snapshot;if(this.focusedStory===ra[ta].story){this.updateActiveStory(ta,ia,sa,ra);}else if(ua<=-this.height_diff_to_change_state){this.updateActiveStory(ta,this.shouldDiscardStory(ta)?la:ka,sa,ra);}else if(ua>=this.height_diff_to_change_state||this.activeStories[ta].is_focused||this.activeStories[ta].height===this.activeStories[ta].story_height)this.updateActiveStory(ta,ja,sa,ra);}else{this.activeStories[ta]={evp_ts:sa,story:ra[ta].story,height:ra[ta].height,vpvd:0};if(!this.totalVPVDuration[ta])this.totalVPVDuration[ta]=0;this.updateActiveStory(ta,ja,sa,ra);}};qa.prototype.recordVPVDurations=function(ra,sa){'use strict';for(var ta in this.activeStories)if(this.activeStories.hasOwnProperty(ta))if(sa||!(ta in ra)){if(this.activeStories[ta].vpvd>this.focused_state_duration||this.activeStories[ta].vpvd===this.totalVPVDuration[ta])this.recordTimeStoryWasInView(this.activeStories[ta]);delete this.activeStories[ta];}};qa.prototype.updateTimeTrackingData=function(ra,sa){'use strict';this.userActivity=sa;if(!this.activeStories)this.activeStories={};var ta=Date.now();if(!this.latestTimeTrackingTimestamp)this.latestTimeTrackingTimestamp=ta;var ua=this.getVisibleStoriesFromCache();this.calculateTotalHeight();this.updateVPVDurations(ta);this.updateActiveStories(ua,ta);if(this.vpvdDebug)this.updateVPVDTimers();this.recordVPVDurations(ua,ra);if(ra){this.latestTimeTrackingTimestamp=0;}else this.latestTimeTrackingTimestamp=ta;this.latestUserActivity=this.userActivity;this.latestUserFocus=this.userFocus;if(this.focusedStory)this.latestActiveStory=this.focusedStory;this.latestFocusedStory=this.focusedStory;this.focusedStory=null;};qa.prototype.needsToUpdateTimeTrackingData=function(){'use strict';return !(this.latestUserFocus===this.userFocus&&(this.userFocus===na||this.userFocus===ma&&!this.latestFocusedStory&&!this.focusedStory));};qa.prototype.getfocusedStory=function(ra){'use strict';var sa=this.getVisibleStoriesFromCache();for(var ta in sa)if(sa.hasOwnProperty(ta))if(w.isDescendantOf(ra,sa[ta].story))return sa[ta].story;return null;};qa.prototype.handleLayers=function(){'use strict';if(this.userFocus===oa||this.userFocus===pa){this.focusedStory=this.latestActiveStory;this.updateTimeTrackingData(false,'media_layer');return true;}return false;};qa.prototype.didInteractWithStream=function(ra){'use strict';return w.isDescendantOf(ra,this.getStream())||w.isDescendantOf(this.getStream(),ra);};qa.prototype.handleScroll=function(event){'use strict';if(this.handleLayers())return;var ra=Date.now(),sa=ba(this.getStream()).y;if(sa!=this.lastStreamY||ra-this.latestStreamYChangedTimeStamp<2.5*this.scrollThrottlingInterval||this.didInteractWithStream(event.target)){this.latestStreamYChangedTimeStamp=ra;this.userFocus=ma;}else this.userFocus=na;this.lastStreamY=sa;if(this.userFocus===ma||this.needsToUpdateTimeTrackingData())this.updateTimeTrackingData(false,'scroll');};qa.prototype.handleKeyboard=function(event){'use strict';if(this.handleLayers())return;if(this.didInteractWithStream(event.target)){this.userFocus=ma;this.focusedStory=this.getfocusedStory(event.target);}else if(l.hasClass(event.target,'shareInput')){this.userFocus=ma;this.focusedStory=this.latestActiveStory;}else this.userFocus=na;if(this.userFocus===ma||this.needsToUpdateTimeTrackingData())this.updateTimeTrackingData(false,'keyboard');};qa.prototype.handleMouse=function(event){'use strict';if(this.handleLayers())return;if(event.type!='click'&&event.clientX===this.lastMouseX&&event.clientY===this.lastMouseY)return;if(event.type==='click')this.invalidateVisibleStoriesCache();if(this.didInteractWithStream(event.target)){this.userFocus=ma;this.focusedStory=this.getfocusedStory(event.target);}else this.userFocus=na;this.lastMouseX=event.clientX;this.lastMouseY=event.clientY;if(this.needsToUpdateTimeTrackingData())this.updateTimeTrackingData(false,event.type);};qa.prototype.getStoriesInView=function(){'use strict';var ra=this.getAllStories(),sa=[],ta=false;for(var ua=0;ua<ra.length;ua++){var va=ra[ua],wa=this.getStoryID(va);if(this.hasBeenVisible(wa))continue;if(this.isVisible(va)){if(va.getAttribute('data-insertion-position')===null)va.setAttribute('data-insertion-position',ua-this._headLoadStoryCount);sa.push(va);ta=true;}else if(ta)break;}return sa;};qa.prototype.getStoriesInViewIgnoreHeight=function(){'use strict';var ra=this.getAllStories(),sa=false,ta=[];for(var ua=0;ua<ra.length;ua++){var va=ra[ua];if(this.isVisible(va,false,0)){ta.push(va);sa=true;}else if(sa)break;}return ta;};qa.prototype.getAllStoriesFromCache=function(){'use strict';if(this.cachedAllStories===null)this.cachedAllStories=this.getAllStories();return this.cachedAllStories;};qa.prototype.invalidateAllStoriesCache=function(){'use strict';this.cachedAllStories=null;this.invalidateVisibleStoriesCache();};qa.prototype.getVisibleStoriesFromCache=function(){'use strict';if(this.cachedVisibleStories===null)this.cachedVisibleStories=this.getAllStoriesInView();return this.cachedVisibleStories;};qa.prototype.invalidateVisibleStoriesCache=function(){'use strict';this.cachedVisibleStories=null;};qa.prototype.getAllStoriesInView=function(){'use strict';var ra=this.getAllStoriesFromCache(),sa={},ta=false,ua=0,va=ra.length,wa=1,xa=ra.length;if(this._indexOfLastVisibleStoryOnPreviousPass>va/2){ua=va-1;va=-1;wa=-wa;}for(var ya=ua;ya!=va;ya+=wa){var za=ra[ya],ab=this.getHeightIfVisible(za,false,Math.min(this.minSizeToBeVisible,this.minFractionToBeVisibleForTimetracking*o.getElementDimensions(za).height));if(ab>0||za===this.focusedStory){if(za.getAttribute('data-insertion-position')===null)za.setAttribute('data-insertion-position',ya-this._headLoadStoryCount);var bb=this.getStoryID(za);sa[bb]={story:za,height:ab,story_height:o.getElementDimensions(za).height};ta=true;if(this.vpvdAnalysis){sa[bb].y=ba(za).y;sa[bb].visible_position=ya;xa=Math.min(xa,ya);}}else if(ta){this._indexOfLastVisibleStoryOnPreviousPass=ya-wa;break;}}if(this.vpvdAnalysis){this.numVisibleStories=0;for(bb in sa)if(sa.hasOwnProperty(bb)){sa[bb].visible_position-=xa;this.numVisibleStories++;}}return sa;};qa.prototype.getTimetrackingDataToLog=function(ra){'use strict';var sa={evt:ea,vpvd_start_timestamp:ra.evp_ts,vpvd_time_delta:Math.round(ra.vpvd),story_height:o.getElementDimensions(ra.story).height,viewport_height:this.cachedViewportHeight};return {ft:sa};};qa.prototype.recordTimeStoryWasInView=function(ra){'use strict';if(this.isTimetrackingEnabled&&ra.vpvd>0){var sa=this.getTimetrackingDataToLog(ra),ta=y(ra.story,['ft']);Object.assign(sa.ft,ta.ft);var ua=!!ta.ft.ei&&sa.ft.vpvd_time_delta>this.minTimeToReportImmediately;delete sa.ei;this.sendDataToLog(ra.story,sa,ua);}};qa.prototype.hasBeenVisible=function(ra){'use strict';return ra in this.readStoryIDs;};qa.prototype.isVisible=function(ra,sa,ta){'use strict';return this.getHeightIfVisible(ra,sa,ta)>0;};qa.prototype.getHeightIfVisible=function(ra,sa,ta){'use strict';if(sa===undefined)sa=this.isLoose;if(ta===undefined)ta=this.minSizeToBeVisible;var ua=v.getScrollPosition().y,va=ca().height,wa=ba(ra),xa=o.getElementDimensions(ra),ya=va+this.maxScrollPosition-ua;if(!wa.x&&!wa.y&&!xa.x&&!xa.y)return false;if(sa&&wa.y<ya)return true;var za=Math.max(wa.y,0),ab=Math.min(wa.y+xa.height,va),bb=Math.min(xa.height,ta);return ab-za>=bb?ab-za:0;};qa.prototype.getHeightInViewport=function(ra){'use strict';var sa=ca().height,ta=ba(ra),ua=o.getElementDimensions(ra);if(!ta.x&&!ta.y&&!ua.x&&!ua.y)return false;var va=Math.max(ta.y,0),wa=Math.min(ta.y+ua.height,sa);return wa-va;};qa.prototype.sendDataToLog=function(ra,sa,ta){'use strict';if(this.useBanzai){var ua={};if(ta)ua.delay=3000;var va=this.getSessionID();if(va)sa.ft.session_id=va;if(this.useWaterfallLogging&&sa.ft.evt==fa){sa.ft.should_waterfall_logging=1;sa.ft['interface']='www';var wa=!this.initialStoriesLogged;this.waterfallLogStep(ra,'200_sent_to_banzai',wa);}j.post('feed_tracking',sa,ua);}else x(ga,ra,null,'FORCE',sa);};qa.prototype.waterfallLogStep=function(ra,sa,ta){'use strict';var ua=this.getStoryID(ra);if(this.loggedStoryIDs[sa]&&this.loggedStoryIDs[sa][ua])return;var va=this.getWaterfallData(ra,sa,ta);if(!va.qid)return;new i(ha,va).send();if(!this.loggedStoryIDs[sa])this.loggedStoryIDs[sa]={};this.loggedStoryIDs[sa][ua]=true;};qa.prototype.getWaterfallData=function(ra,sa,ta){'use strict';var ua=this._getDataToLogImpl(ra),va=y(ra,['ft']);Object.assign(ua.ft,va.ft);var wa=ua.ft;wa.height_in_viewport=this.getHeightInViewport(ra);wa.step=sa;wa.is_initial_story=ta?1:0;wa['interface']='www';return wa;};qa.prototype.addSeenClassToStory=function(ra){'use strict';l.addClass(ra,"_50nb");l.removeClass(ra,"_50mx");l.removeClass(ra,"_2z-5");};qa.prototype.markStoryRead=function(ra){'use strict';var sa=this.getStoryID(ra);if(!sa||this.hasBeenVisible(sa))return;this.readStoryIDs[sa]=true;this.annotatedStoryIDs[sa]=true;var ta=this._getDataToLogImpl(ra),ua=y(ra,['ft']);Object.assign(ta.ft,ua.ft);delete ta.ei;this.sendDataToLog(ra,ta,false);l.addClass(ra,"_x72");if(this.vpvDebug)l.addClass(ra,"_5m7s");this.addSeenClassToStory(ra);};qa.prototype.logAnnotatedVPV=function(ra){'use strict';var sa=this.getStoryID(ra);if(!sa||sa in this.annotatedStoryIDs)return;this.annotatedStoryIDs[sa]=true;var ta=this._getDataToLogImpl(ra),ua=y(ra,['ft']);Object.assign(ta.ft,ua.ft);delete ta.ei;ta.ft.vpv_ft_only=1;this.sendDataToLog(ra,ta,false);};qa.prototype._getDataToLogImpl=function(ra){'use strict';var sa=this.getDataToLog(ra);if(!sa.ft)sa.ft={};return sa;};f.exports=qa;},null);
__d('collectSubtreeData',[],function a(b,c,d,e,f,g){if(c.__markCompiled)c.__markCompiled();function h(j,k,l,m,n){if(j.offsetWidth===0&&j.offsetHeight===0)return n;var o={};if(j.getAttribute)for(s=0;s<k.length;s++){u=k[s];var p=j.getAttribute(l[u]);if(p){o[u]={};var q=JSON.parse(p);for(var r in m)if(q[r]!==undefined){o[u][r]=true;if(n[u]===undefined)n[u]={};if(n[u][r]===undefined)n[u][r]=[];if(m[r].length>0)n[u][r].push(m[r]);n[u][r].push('('+q[r]);}}}for(var s=0;s<j.childNodes.length;s++){var t=j.childNodes[s];h(t,k,l,m,n);}for(var u in o)for(var v in o[u]){var w=n[u][v][n[u][v].length-1];if(w.length>0&&w.charAt(0)=='('){n[u][v][n[u][v].length-1]=w.substr(1);}else n[u][v].push(')');}return n;}function i(j,k){var l={};for(var m=0;m<k.length;++m)l[k[m]]='data-'+k[m];var n={tn:"","tn-debug":","},o={};h(j,k,l,n,o);for(var p in o)for(var q in o[p])o[p][q]=o[p][q].join('');return o;}f.exports=i;},null);
__d("isEmail",[],function a(b,c,d,e,f,g){if(c.__markCompiled)c.__markCompiled();var h=/^[\w!#\$%&'\*\+\/\=\?\^`\{\|\}~\-]+(:?\.[\w!#\$%&'\*\+\/\=\?\^`\{\|\}~\-]+)*@(?:[a-z0-9](?:[a-z0-9\-]*[a-z0-9])?\.)+[a-z0-9](?:[a-z0-9\-]*[a-z0-9])?$/i;function i(j){return h.test(j);}f.exports=i;},null);
__d('recordTNTreeData',['collectSubtreeData'],function a(b,c,d,e,f,g,h){if(c.__markCompiled)c.__markCompiled();function i(j,k){var l={},m=h(j,['ft']);for(var n in m.ft){l[n+'_tree']=m.ft[n];if(n==='tn-debug')j.setAttribute('tn-debug_subtree',m.ft[n]);}l.evt_value=j.offsetHeight;if(k)l.offset=Math.max(0,j.offsetTop-k.offsetTop);return l;}f.exports=i;},null);
__d('reportData',['Banzai','SessionName'],function a(b,c,d,e,f,g,h,i){if(c.__markCompiled)c.__markCompiled();var j={retry:true};function k(l,m){m=m||{};var n={ft:m.ft||{},gt:m.gt||{}},o='-',p=[],q='r',r=[Date.now(),0,o,l,o,o,q,b.URI?b.URI.getRequestURI(true,true).getUnqualifiedURI().toString():location.pathname+location.search+location.hash,n,0,0,0,0].concat(p),s=[i.getName(),Date.now(),'act'];h.post('eagle_eye_event',Array.prototype.concat(s,r),j);}f.exports=k;},null);
__d('PagesVoiceBar',['$','Arbiter','AsyncRequest','BlueBar','ChannelConstants','DOM','URI','ViewportBounds'],function a(b,c,d,e,f,g,h,i,j,k,l,m,n,o){if(c.__markCompiled)c.__markCompiled();var p='PagesVoiceBar/initialized',q='PagesVoiceBar/switchVoice',r='page_transition',s='pages_voice_bar_sync',t=null,u=null,v=false,w=false,x=o.addTop(0);function y(ea,fa){new j('/ajax/pages/switch_voice.php').setData(fa).setHandler(function(ga){ca();}).send();}function z(){t=null;}function aa(ea,fa){if(fa.obj.profile_id&&fa.obj.profile_id===t)ca();}function ba(ea){i.subscribe(p,ea);}function ca(){n.getNextURI().go();}var da={initVoiceBar:function(){if(w)return;u=h('pagesVoiceBarContent');i.subscribe(q,y);i.subscribe(r,z);i.subscribe(l.getArbiterType(s),aa);w=true;v=m.contains(k.getBar(),u);i.inform(p,null,i.BEHAVIOR_STATE);},update:function(ea,fa){ba(function(){t=fa;m.setContent(u,ea);var ga=u.offsetHeight;if(!v&&x.getSize()!==ga){x.remove();x=o.addTop(o.getTop()+ga);}});}};f.exports=da;},null);
__d("XPrivacyCheckupSpawnDialogController",["XController"],function a(b,c,d,e,f,g){c.__markCompiled&&c.__markCompiled();f.exports=c("XController").create("\/privacy\/checkup\/dialog\/show\/",{source:{type:"Enum",enumType:1}});},null);
__d("XPrivacyRemindersDismissController",["XController"],function a(b,c,d,e,f,g){c.__markCompiled&&c.__markCompiled();f.exports=c("XController").create("\/privacy\/reminders\/dismiss\/",{type:{type:"String",required:true},log_plite:{type:"Bool",defaultValue:false}});},null);
__d('PrivacyLiteFlyout',['Animation','Arbiter','ArbiterMixin','AsyncDialog','AsyncRequest','Banzai','CSS','DOM','Ease','Event','PrivacyConst','Style','SubscriptionsHandler','Toggler','XPrivacyCheckupSpawnDialogController','XPrivacyRemindersDismissController','csx','cx','ge','getOrCreateDOMID'],function a(b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,aa){if(c.__markCompiled)c.__markCompiled();var ba='PrivacyLiteFlyout/expandingSection',ca={},da={};function ea(ja,ka,la){var ma=ka?0:ja.offsetHeight;s.set(ja,'height',ma+'px');s.set(ja,'overflow','hidden');n.show(ja);var na=ka?ja.scrollHeight:0,oa=aa(ja);ca[oa]&&ca[oa].stop();ca[oa]=new h(ja).to('height',na).ondone(function(){ca[oa]=null;s.set(ja,'height','');s.set(ja,'overflow','');na||n.hide(ja);la();}).duration(Math.abs(na-ma)*1.5).ease(p.sineOut).go();}function fa(ja){var event='other_section';switch(ja){case 'who_can_see':case 'who_can_contact':case 'how_to_stop':event=ja;break;}return event;}var ga=null,ha=false,ia=babelHelpers._extends({loadBody:function(){this._loadBody(false);},loadBodyFromMegaphone:function(){this._loadBody(true);},_loadBody:function(ja){if(!ha&&z('fbPrivacyLiteFlyoutLoading')){ha=true;new l('/ajax/privacy/privacy_lite/loader').setData({from_megaphone:ja}).send();}},_addListener:function(ja,event,ka){return q.listen(ja,'click',function(){m.post('privacy_lite',{event:event,exit_point:ka});});},addLoggingElem:function(ja,event,ka){this._loggingElements=this._loggingElements||[];var la=this._loggingElements.length,ma={elem:ja,event:event,exit:ka};this._loggingElements[la]=ma;},registerSettingsAndBasicsLinkLogging:function(ja,event,ka,la){var ma=o.scry(ja,"._5cw0")[0],na=o.scry(ja,"._3djx")[0];if(ma){this._settingsLinkListener&&this._settingsLinkListener.release();this._settingsLinkListener=this._addListener(ma,event,ka);}if(na){this._privacyBasicsLinkListener&&this._privacyBasicsLinkListener.release();this._privacyBasicsLinkListener=this._addListener(na,event,la);}},_subscribeListeners:function(){this._loggingElements&&this._loggingElements.forEach(function(ja){this._subscriptions&&this._subscriptions.addSubscriptions(this._addListener(ja.elem,ja.event,ja.exit));},this);},renderBody:function(ja,ka){var la=z('fbPrivacyLiteFlyoutLoading');if(la){o.replace(la,ja);ia.registerCallback(function(){ia.inform('load',null,i.BEHAVIOR_STATE);},ka);}},hideCleanup:function(ja){i.inform(ba);o.scry(ja,"._2va0").forEach(function(ka){n.removeClass(ka,"_2va0");});},registerFlyoutToggler:function(ja,ka,la){ga=ka;var ma=u.createInstance(ja);ma.setSticky(false);u.listen(['show','hide'],ka,(function(na){ia.inform(na);var oa=na==='show';if(!oa){ia.hideCleanup(ja);ma.hide();this._subscriptions&&this._subscriptions.release();this._subscriptions=null;i.inform('layer_hidden',{type:'PrivacyShortcutsFlyout'});}else{i.inform('layer_shown',{type:'PrivacyShortcutsFlyout'});if(la){la.start(this);la=null;}i.subscribeOnce(ba,(function(){this._subscriptions&&this._subscriptions.release();this._subscriptions=new t();this._subscribeListeners();}).bind(this));m.post('privacy_lite',{event:'show_flyout',exit_point:null});}}).bind(this));},isFlyoutVisible:function(){return ga&&u.getActive()===ga;},exists:function(){return !!o.scry(document.body,"._59fc")[0];},setFlyoutVisible:function(ja){ja?u.show(ga):u.hide(ga);},showSection:function(ja){var ka=da[ja];if(!ka)return;if(!ka.sublist_container){ia.inform('expanded',ja,i.BEHAVIOR_STATE);return;}var la=ka.chevron,ma=ka.sublist_container;i.inform(ba,la);if(ia.inform('expand',ja)!==false){n.removeClass(la,"_9or");n.addClass(la,"_9os");ea(ma,true,function(){ia.inform('expanded',ja);});}},hideSection:function(ja,ka,la){var ma=da[ja],na=ma.chevron,oa=ma.sublist_container;if(la===na)return;if(ia.inform('collapse',ja)!==false){n.addClass(na,"_9or");n.removeClass(na,"_9os");ea(oa,false,function(){ia.inform('collapsed',ja);});}},toggleSection:function(ja){var ka=da[ja].chevron;u.getInstance(ka).hide();if(n.hasClass(ka,"_9or")){ia.showSection(ja);m.post('privacy_lite',{event:fa(ja)+'_expand',exit_point:null});new l('/ajax/privacy/privacy_lite/log_section_expand').setData({section:ja}).send();}else{ia.hideSection(ja);m.post('privacy_lite',{event:fa(ja)+'_collapse',exit_point:null});}},registerSection:function(ja,ka){da[ja]=ka;if(ka.sublist_container){i.subscribe(ba,ia.hideSection.bind(null,ja));q.listen(ka.section_block,'click',ia.toggleSection.bind(null,ja));}ia.inform(ja);},registerInlineHelpOnAudienceChangeNewSelector:function(ja,ka,la,ma){ja=ja.getInstance();ja.subscribe('changed',(function(na){this._registerInlineHelpOnAudienceChange(ka,la,ma,ja.getSelectedBaseValue());}).bind(this));},registerSelectorLogging:function(ja,ka,la,ma){ja=ja.getInstance();ja.subscribe('open',function(){m.post('privacy_lite',{event:ka,exit_point:null});});ja.subscribe('close',function(){m.post('privacy_lite',{event:la,exit_point:null});});ja.subscribe('changed',function(){m.post('privacy_lite',{event:ma,exit_point:null});});},_registerInlineHelpOnAudienceChange:function(ja,ka,la,ma){var na=o.find(ja,"._9o_"),oa=o.find(ja,"._2v9_");if(la){var pa=o.find(ja,"._5n9w"),qa=ma==r.BaseValue.EVERYONE;n.conditionShow(pa,qa);n.conditionShow(na,!qa);if(pa&&qa){var ra=w.getURIBuilder().setString('type','delta_everyone').setBool('log_plite',true).getURI();new l(ra).send();}}else n.show(na);n.hide(oa);if(ka)new l('/ajax/privacy/privacy_lite/kill_intro').send();},registerInlineHelpXOutOnClick:function(ja,ka,la){q.listen(ja,'click',function(){n.addClass(ka,"_9p0");});},registerBlockUnhideOnFocus:function(ja,ka){q.listen(ja,'focus',(function(la){n.show(la);m.post('privacy_lite',{event:'block_user_input_click',exit_point:null});}).bind(this,ka));},registerPrivacyCheckupListener:function(ja){q.listen(ja,'click',(function(){this.setFlyoutVisible(false);k.send(new l(v.getURIBuilder().setEnum('source','plite').getURI()));m.post('privacy_lite',{event:'exit_flyout',exit_point:'privacy_checkup'});}).bind(this));},displayPrivacyCheckup:function(ja){ja.show();}},j);f.exports=ia;},null);
__d('PrivacyLiteFlyoutHelp',['Arbiter','AsyncRequest','Banzai','ContextualHelpSearchController','CSS','DOM','Event','Parent','csx','cx'],function a(b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q){if(c.__markCompiled)c.__markCompiled();var r,s;function t(u,v,w,x,y){this._width=315;s=m.find(v,'input');var z=m.create('div');k.call(this,u,s,z,w,x,{focusSearchBox:false});r=o.bySelector(v,"._8-a");n.listen(y,'click',(function(){this._hideSearch(this);j.post('privacy_lite',{event:'plite_search_collapse',exit_point:null});}).bind(this));h.subscribe('PrivacyLiteFlyout/expandingSection',this._hideSearch.bind(this));var aa=m.scry(r,"._d1r")[0];aa&&n.listen(aa,'click',(function(){l.addClass(r,"_aw6");s.focus();j.post('privacy_lite',{event:'plite_search_expand',exit_point:null});if(!this.suggestedResults)new i('/ajax/privacy/privacy_lite/help_suggestions').setHandler((function(ba){var ca=ba.getPayload().searchSuggestions,da=m.find(r,"._4_8m");m.setContent(da,ca);l.addClass(r,"_4_8l");}).bind(this)).send();}).bind(this));}Object.assign(t.prototype,k.prototype,{source:'privacy_shortcuts',_hideSearch:function(){this.clearResults();l.removeClass(r,"_aw6");},show:function(u){if(u===this.topics_area){l.removeClass(r,"_aw7");return;}else if(u===this.loader){l.addClass(r,"_aw7");l.hide(this.results_area);}else l.hide(this.loader);l.show(u);}});f.exports=t;},null);
__d('ViewasChromeBar',['Arbiter','AsyncRequest','CSS','DOM','Event','Focus','ModalMask','PageTransitionsRegistrar','Parent','csx','cx'],function a(b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r){if(c.__markCompiled)c.__markCompiled();var s='ViewasChromeBar/initialized',t=null,u=false;function v(y){h.subscribe(s,y);}function w(y){j.addClass(y,"_7g7");var z=k.find(y,"._7g0");m.set(k.find(z,'.textInput'));}var x={initChromeBar:function(y){if(u)return;t=y;u=true;h.inform(s,null,h.BEHAVIOR_STATE);},update:function(y,z){v(function(){k.setContent(t,y);if(z)new i('/ajax/privacy/glasgow/viewas_bar_flyout_open').send();});},registerSpecificModeOnClick:function(y){l.listen(y,'click',w.bind(null,p.bySelector(y,"._7f-")));},registerFlyoutModalMask:function(){n.show();o.registerHandler(n.hide,10);}};f.exports=x;},null);
__d("StoryTopicMap",[],function a(b,c,d,e,f,g){if(c.__markCompiled)c.__markCompiled();var h={},i={registerTopics:function(j,k){h[j]=k;},getTopicsForFTID:function(j){return h[j]||[];}};f.exports=i;},null);
__d('SearchFunnelTypeaheadLogger',['Arbiter','Banzai','DOM','Event','PageEvents','PageTransitions','SubscriptionsHandler','URI','csx'],function a(b,c,d,e,f,g,h,i,j,k,l,m,n,o,p){if(c.__markCompiled)c.__markCompiled();var q='search_funnel',r='search_end_to_end',s={focus:'entrant',render:'results_displayed',keydown:'interaction',select:'search'},t,u={init:function(v,w){if(!v||!w)return;this._isColdStart=true;this._sampleRates=w;this._core=v.getCore();this._data=v.getData();this._view=v.getView();this._handler=new n();this.log=this.log.bind(this);this.onKeydown=this.onKeydown.bind(this);this.onSelect=this.onSelect.bind(this);this.onTypeaheadImpression=this.onTypeaheadImpression.bind(this);this._transitionInProgress=true;this.onTypeaheadImpression();},onTypeaheadImpression:function(v){this._initTime=this._getInitTime();this.e2eMarkers=[];if(this._transitionInProgress&&j.scry(document.body,"._4d3w").length===0)this.log('impression',{funnel_path:o.getNextURI().path});this.reset();this._handler.addSubscriptions(this._core.subscribeOnce('focus',this.log),this._view.subscribeOnce('render',this.log),this._view.subscribeOnce('select',this.onSelect));k.listen(this._core.getElement(),'keydown',this.onKeydown);m.registerHandler((function(){this._transitionInProgress=true;}).bind(this));m.registerCompletionCallback(this.onTypeaheadImpression);},onKeydown:function(event){if(!this._sawKeydown){this._sawKeydown=true;this.log('keydown',event);}},onSelect:function(event,v){v.funnel_data={selected_position:v.selected.globalIndex,selected_type:v.selected.type};if(v.selected.isNullState){v.funnel_data.interaction_type='null_state';}else if(v.selected.isSingleState){v.funnel_data.interaction_type='single_state';}else v.funnel_data.interaction_type='typed';this._endToEndPath=o.getMostRecentURI().path;t=null;h.subscribe('BigPipe/init',(function(event,w){if(!w.arbiter)return;var x={arbiter:w.arbiter,event:l.AJAXPIPE_ONLOAD,markers:this.e2eMarkers,init_time:this._initTime,from_path:this._endToEndPath};setTimeout((function(){this.setupE2EPerfLogging(x);}).bind(this),0);}).bind(this));this.log(event,v);},reset:function(){this._handler.release();this._handler.engage();this._sawKeydown=false;this._transitionInProgress=false;},log:function(v,w){if(s[v])v=s[v];this.e2eMarkers.push({event:v,time:String(Date.now()-this._initTime)});if(!this._sampleRates[v])return;w=w||{};w.funnel_data=w.funnel_data||{};w.funnel_data.sample_rate=this._sampleRates[v];w.funnel_data.current_event_time=Date.now();if(this._prevTime&&this._prevEvt){w.funnel_data.previous_event_time=this._prevTime;w.funnel_data.previous_event=this._prevEvt;}this._prevTime=w.funnel_data.current_event_time;this._prevEvt=v;i.post(q,{funnel_data:w.funnel_data,path:w.funnel_path||m.getMostRecentURI().path,stage:v},i.VITAL);},setupE2EPerfLogging:function(v){return v.arbiter.subscribeOnce(v.event,(function(w){if(t)return;t=true;v.markers.push({event:'end',time:String(Date.now()-v.init_time)});i.post(r,{from_path:this._endToEndPath,to_path:o.getNextURI().path,markers:v.markers,cold_start:this._isColdStart},i.VITAL);this._isColdStart=false;}).bind(this));},_getInitTime:function(){if(window.ExitTime)return window.ExitTime;var v=window.performance||window.msPerformance;if(!v||!v.timing)return;return v.timing.navigationStart;}};f.exports=u;},null);
__d('SearchSingleState',['fbt'],function a(b,c,d,e,f,g,h){if(c.__markCompiled)c.__markCompiled();function i(k,l,m,n){return {classNames:'grammar',groupIndex:0,indexInGroup:k,path:l,text:m,type:'grammar',uid:n};}var j={getSuggestions:function(k,l,m){if(m==='ent:user'){return this.getSuggestionsForUser(k,l);}else if(m==='ent:page'){return this.getSuggestionsForPage(k,l);}else if(m==='ent:app'){return this.getSuggestionsForApp(k,l);}else if(m==='ent:group')return this.getSuggestionsForGroup(k,l);},getSuggestionsForUser:function(k,l){return [i(0,'/search/'+k+'/photos-of',h._("photos of {full name}",[h.param('full name',l)]),'photos_of_user'),i(1,'/search/'+k+'/friends',h._("friends of {full name}",[h.param('full name',l)]),'friends_of_user'),i(2,'/search/'+k+'/pages-liked',h._("favorite pages of {full name}",[h.param('full name',l)]),'pages_liked_user'),i(3,'/search/str/'+l+'/users-named',h._("find all people named \"{full name}\"",[h.param('full name',l)]),'people_named_text')];},getSuggestionsForPage:function(k,l){return [i(0,'/search/'+k+'/photos-of',h._("photos of {name of page}",[h.param('name of page',l)]),'photos_of_page'),i(1,'/search/'+k+'/likers',h._("people who like {name of page}",[h.param('name of page',l)]),'page_likers'),i(2,'/search/str/'+l+'/pages-named',h._("find all pages named \"{name of page}\"",[h.param('name of page',l)]),'pages_named_text')];},getSuggestionsForGroup:function(k,l){return [i(0,'/search/'+k+'/members',h._("{name of group} members",[h.param('name of group',l)]),'members_of_group'),i(1,'/search/'+k+'/photos-in',h._("photos in {name of groups}",[h.param('name of groups',l)]),'photos_in_group'),i(2,'/search/'+k+'/creators',h._("{name of group} creators",[h.param('name of group',l)]),'creators_of_group'),i(3,'/search/'+k+'/admins',h._("{name of group} administrators",[h.param('name of group',l)]),'admins_of_group')];},getSuggestionsForApp:function(k,l){return [i(0,'/search/'+k+'/apps-similar-to',h._("apps similar to {name of app}",[h.param('name of app',l)]),'similar_apps'),i(1,'/search/'+k+'/app-users',h._("people who use {name of app}",[h.param('name of app',l)]),'app_users'),i(2,'/search/str/'+l+'/pages-named',h._("find all apps named \"{name of page}\"",[h.param('name of page',l)]),'apps_named_text')];}};f.exports=j;},null);
__d('SearchDataSource',['Event','Arbiter','AsyncResponse','DataSource','HashtagSearchResultUtils','createArrayFromMixed','PageTransitionsRegistrar','SearchBootstrapCache','SearchSingleState','UnicodeCJK','FacebarJSConstants','Map','SearchRegion','debounce','errorCode'],function a(b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v){if(c.__markCompiled)c.__markCompiled();var w,x,y=100,z='/typeahead/search/facebar/nullstate/';w=babelHelpers.inherits(aa,k);x=w&&w.prototype;function aa(ba){'use strict';ba.headerflags=new s();if(t.sgp_routing)ba.headerflags.set('X-FB-Replay-Search-Region','SGP');x.constructor.call(this,ba);this._token=ba.token||'';this._lazyonload=ba.lazyonload===false?false:true;this._extraTypes=ba.extraTypes;this._buckets=ba.buckets;this._noMultiFetch=ba.noMultiFetch||false;this._nullStateConfig=ba.nullStateConfig||{};var ca=ba.maxResults||8;this._numResults={min:3,max:ca};this.recordingRoute=ba.recordingRoute||'non_banzai';this._enabledHashtag=ba.enabledHashtag||false;this.logBackendQueriesWindow=ba.logBackendQueriesWindow||25;this._genTime=ba.genTime;this._bootstrapError=false;this._hasKeywordBootstrap=ba.hasKeywordBootstrap||false;this._addJoinedTermsMatching=ba.addJoinedTermsMatching||false;this._useBootstrapCache=ba.useBootstrapCache||false;this.cacheUnicodeMatch.setConfigs({prefix_hangul_conjoining_jamo:true,prefix_kana_drop_trailing_latin:ba.cjkDropLatinInCjTokens,prefix_kana_hiragana_to_katakana:ba.cjkUiCacheHiraganaToKatakana,search_i18n_prefix_arabic_normalization:ba.arabicNormalization});this.backendUnicodeMatch.setConfigs({prefix_kana_drop_trailing_latin:ba.cjkDropLatinInCjTokens});}aa.prototype.init=function(){'use strict';x.init.call(this);this._leanPayload=null;this._bootstrapRequestsPending=0;this._criticalOnly=true;this._updateMaxResults();var ba=u(this._updateMaxResults,y,this,true);h.listen(window,'resize',ba);if(this._nullStateConfig.prefetchNullState)this.fetchNullState('');if(this._nullStateConfig.singleState)i.subscribe('page_transition',this.handlePageTransition.bind(this));if(this._nullStateConfig.prefetchNullState||this._nullStateConfig.singleState)i.subscribe('search/updateNullState',this.updateNullState.bind(this));if(this._nullStateConfig.recent)i.subscribe('search/refreshRecentSearchesNullstate',this.refreshRecentSearches.bind(this));};aa.prototype.refreshRecentSearches=function(){'use strict';this.nullStateData=null;};aa.prototype.handlePageTransition=function(){'use strict';this.nullStateParams={};};aa.prototype.updateNullState=function(event,ba){'use strict';this.nullStateParams=ba;this.fetchNullState();};aa.prototype.markResultsAsNullState=function(ba){'use strict';if(ba)for(var ca=ba,da=Array.isArray(ca),ea=0,ca=da?ca:ca[typeof Symbol==='function'?Symbol.iterator:'@@iterator']();;){var fa;if(da){if(ea>=ca.length)break;fa=ca[ea++];}else{ea=ca.next();if(ea.done)break;fa=ea.value;}var ga=fa;ga.isNullState=true;}};aa.prototype.markResultsAsSingleState=function(ba){'use strict';if(ba)for(var ca=ba,da=Array.isArray(ca),ea=0,ca=da?ca:ca[typeof Symbol==='function'?Symbol.iterator:'@@iterator']();;){var fa;if(da){if(ea>=ca.length)break;fa=ca[ea++];}else{ea=ca.next();if(ea.done)break;fa=ea.value;}var ga=fa;ga.isSingleState=true;}};aa.prototype.fetchNullState=function(ba){'use strict';this.lastNullOrSingleStateFetchStartTime=Date.now();if(!this._nullStateConfig.hasNullState)return;var ca=null;if(this.nullStateParams&&this.nullStateParams.uid){this.nullStateParams.query=ba||'';ca=this._fetchDataForSingleState();this.markResultsAsNullState(ca);}else{ca=this._fetchDataForNullState();this.markResultsAsSingleState(ca);}if(ca)this.inform('respond',{value:this.nullStateParams?this.nullStateParams.query:'',results:ca,isAsync:false,nullState:true});};aa.prototype._fetchDataForSingleState=function(){'use strict';if(this.nullStateDataWithProfile&&this.nullStateParams.uid===this.nullStateDataWithProfile.profileID)return this.nullStateDataWithProfile.data;if(this.nullStateParams.type==='ent:app'||this.nullStateParams.type==='ent:group'||this.nullStateParams.type==='ent:page'){this.fetch(z,{profile_id:this.nullStateParams.uid,ent_type:this.nullStateParams.type},{singleState:true});this.nullStateDataWithProfile={profileID:this.nullStateParams.uid};return;}var ba=p.getSuggestions(this.nullStateParams.uid,this.nullStateParams.text,this.nullStateParams.type);if(!ba)return this._fetchDataForNullState();this.nullStateDataWithProfile={data:ba,profileID:this.nullStateParams.uid};return ba;};aa.prototype._shouldRefreshNullState=function(){'use strict';if(!this._nullStateConfig.recent)return false;var ba=window.location.href;if(!ba)return false;if(ba.contains('allactivity')&&ba.contains('log_filter=search'))return true;return false;};aa.prototype._fetchDataForNullState=function(){'use strict';if(this.nullStateData&&!this._shouldRefreshNullState()){this.markResultsAsNullState(this.nullStateData);setTimeout((function(){this.inform('respond',{value:'',results:this.nullStateData,isAsync:true,nullState:true});}).bind(this),0);return;}if(!this.fetchingNullState){this.fetchingNullState=true;this.fetch(z,{value:""},{nullState:true,value:''});}return null;};aa.prototype.dirty=function(){'use strict';x.dirty.call(this);this._bootstrapError=false;this._fetchOnUseRequests=[];};aa.prototype.asyncErrorHandler=function(ba,ca){'use strict';if(ca.nullState)this.fetchingNullState=false;if(ca.bootstrap)this._bootstrapError=true;this.inform('fetchError',{response:ba,fetch_context:ca});if(window.Dialog&&window.Dialog.getCurrent()==null&&ba.getError()==1400003)j.verboseErrorHandler(ba);};aa.prototype.fetch=function(ba,ca,da){'use strict';da=da||{};da.fetch_start=Date.now();var ea=n.getMostRecentURI().path;ca=babelHelpers._extends({},ca,{path:ea});x.fetch.call(this,ba,ca,da);};aa.prototype.fetchHandler=function(ba,ca){'use strict';if(ca.nullState){this.fetchingNullState=false;this.nullStateData=ba.getPayload().entries;this.markResultsAsNullState(this.nullStateData);this.inform('respond',{value:'',results:this.nullStateData,isAsync:true,nullState:true});return;}if(ca.singleState){this.nullStateDataWithProfile.data=ba.getPayload().entries;this.markResultsAsSingleState(this.nullStateDataWithProfile.data);this.inform('respond',{results:this.nullStateDataWithProfile.data,isAsync:true,value:this.nullStateParams?this.nullStateParams.query:'',nullState:true});return;}var da=ba.getPayload(),ea=babelHelpers._extends({fetch_end:Date.now()},ca),fa=ea.value?i.BEHAVIOR_EVENT:i.BEHAVIOR_PERSISTENT;this.inform('beginFetchHandler',{response:ba});if(ca.bootstrap){this._bootstrapError=false;if(ca.cacheKey!=null)o.set(ba,ca);}if(ca.type=='lean'){this._leanPayload=da;this._processLean();}else{if(da.coeff2_ts)ea.coeff2_ts=da.coeff2_ts;x.fetchHandler.call(this,ba,ca);if(ca.bootstrap&&!ba.getRequest().getData().no_cache)ea.browserCacheHit=da.timestamp<this._genTime;if(ca.bootstrap&&!da.no_data&&this._bootstrapRequestsPending>0){ca.bootstrap=false;--this._bootstrapRequestsPending;!this._bootstrapRequestsPending&&this._bootstrapPostProcess();}if(da.no_data||da.stale||da.token!==this._token){var ga=babelHelpers._extends({},ba.getRequest().getData());if(ga.lazy){delete ga.lazy;ga.token=this._token;this._fetchOnUse(ga,ca);}}}this.inform('endpointStats',{info:ea,response:ba},fa);if(ca&&!!ca.value)this.inform('completeFetch',{response:ba,stats:ea});};aa.prototype.respond=function(ba,ca,da){'use strict';this.inform('respondValidUids',ca);this.inform('reorderResults',ca);var ea=this.buildData(ca,ba);ea.forEach(function(fa,ga){fa.origIndex=ga;fa.fromCache=!da;});this.inform('respond',{value:ba,results:ea,isAsync:!!da});return ea;};aa.prototype.buildData=function(ba,ca){'use strict';if(!ba||ba.length===0)return [];var da=ba.map(this.getEntry,this);da.length=Math.min(da.length,this._maxResults);return da;};aa.prototype.fetchLean=function(){'use strict';this._fetchLean();};aa.prototype._isQueryTooShort=function(ba){'use strict';return ba.length<this._minQueryLength&&!this._performShortQuery&&!q.hasIdeoOrSyll(ba);};aa.prototype.shouldFetchMoreResults=function(ba){'use strict';return ba.length<this._maxResults;};aa.prototype._bootstrapPostProcess=function(){'use strict';var ba=0;for(var ca in this._data)if(this._data.hasOwnProperty(ca))ba++;this.inform('bootstrapped',{time:Date.now(),size:ba},i.BEHAVIOR_PERSISTENT);this._processLean();};aa.prototype._processLean=function(){'use strict';if(this._leanPayload){var ba,ca=this._leanPayload.entries;for(var da in ca){ba=this.getEntry(da);if(ba)ba.index=ca[da];}this.setExclusions(this._leanPayload.blocked);this._leanPayload=null;}};aa.prototype._updateMaxResults=function(){'use strict';var ba=window.innerHeight||document.documentElement.clientHeight;this.setMaxResults(Math.max(this._numResults.min,Math.min(this._numResults.max,Math.ceil(2+(ba-370)/56))));};aa.prototype._bootstrapFetch=function(ba,ca){'use strict';var da=babelHelpers._extends({},ca,this.bootstrapData);if(this._criticalOnly&&this._lazyonload)da.lazy=1;var ea={bootstrap:true,type:ba};if(this._useBootstrapCache){o.get(da,ea,this.bootstrapEndpoint,this.fetchHandler.bind(this),this.fetch.bind(this));}else this.fetch(this.bootstrapEndpoint,da,ea);++this._bootstrapRequestsPending;};aa.prototype._fetchOnUse=function(ba,ca){'use strict';for(var da in this.bootstrapData)!ba.hasOwnProperty(da)&&(ba[da]=this.bootstrapData[da]);if(this._criticalOnly){this._fetchOnUseRequests.push({args:ba,ctx:ca});}else this.fetch(this.bootstrapEndpoint,ba,ca);};aa.prototype._fetchLean=function(){'use strict';var ba={no_cache:1};ba.options=m(ba.options);ba.options.push('lean');this._fetchOnUse(ba,{type:'lean'});};aa.prototype.bootstrap=function(ba){'use strict';if(!ba){this._criticalOnly=false;this._flushFetchOnUseRequests();}if(this._bootstrapped)return;var ca={filter:['event'],no_cache:1};this._fetchOnUse(ca,{type:'event'});var da=['app','page','group','friendlist'];da=da.concat(this._extraTypes||[]);var ea=[];if(this._hasKeywordBootstrap)ea.push(r.keywordType);if(this._noMultiFetch){da.push('user');da=da.concat(ea);this._bootstrapFetch('user',{filter:da});}else{this._bootstrapFetch('other',{filter:da});if(this._buckets){for(var fa=0;fa<this._buckets.length;++fa){var ga={filter:['user'],buckets:this._buckets[fa]};this._bootstrapFetch('user',ga);}}else this._bootstrapFetch('user',{filter:['user']});if(ea.length>0)this._bootstrapFetch('keyword',{filter:ea});}this._fetchLean();this._bootstrapped=true;};aa.prototype.getBootstrapError=function(){'use strict';return this._bootstrapError;};aa.prototype._flushFetchOnUseRequests=function(){'use strict';var ba=this._fetchOnUseRequests.length;for(var ca=0;ca<ba;++ca){var da=this._fetchOnUseRequests[ca];this.fetch(this.bootstrapEndpoint,da.args,da.ctx);}if(ba>0)this.inform('extra_bootstrap',{time:Date.now()},i.BEHAVIOR_PERSISTENT);this._fetchOnUseRequests=[];};aa.prototype.onLoad=function(ba,ca){'use strict';this.inform('onload',{time:Date.now()},i.BEHAVIOR_PERSISTENT);if(ba)setTimeout(this.bootstrap.bind(this,ca),0);};aa.prototype.mergeUids=function(ba,ca,da,ea){'use strict';var fa=this.getDynamicHashtagResult(ea);if(ea&&fa&&ca.indexOf(fa)<=0)ca.unshift(fa);var ga=da[0]?this.getEntry(da[0]):null,ha=ca[0]?this.getEntry(ca[0]):null,ia=ga&&ga.replace_results?ga:null;ia=!ia&&ha&&ha.replace_results?ha:ia;var ja=x.mergeUids.call(this,ba,ca,da,ea);if(ia){this.inform('backend_topreplace',{});return this.deduplicateByKey([ia.uid].concat(ja));}return ja;};aa.prototype.getTextToIndexFromFields=function(ba,ca){'use strict';var da=[],ea=ba.tokenVersion==="v2";for(var fa=0;fa<ca.length;++fa){if(ea&&(ca[fa]==="text"||ca[fa]==="alias"))continue;var ga=ba[ca[fa]];if(ga){ga=ga.join?ga.join(' '):ga;da.push(ga);if(ca[fa]=='text'&&this._addJoinedTermsMatching){ga=ga.toLowerCase();ga=ga.replace(/ /g,'');da.push(ga);}}}return da.join(' ');};aa.prototype.getDynamicHashtagResult=function(ba){'use strict';if(!ba||!this._enabledHashtag)return;var ca=l.getHashtagFromQuery(ba);if(!ca)return;var da='hashtag:'+ca,ea=this.getEntry(da);if(!ea)this.processEntries([l.makeTypeaheadResult(ca)],ba);return da;};f.exports=aa;},null);
__d('legacy:SearchDataSource',['SearchDataSource'],function a(b,c,d,e){if(c.__markCompiled)c.__markCompiled();b.SearchDataSource=c('SearchDataSource');},3);
__d('SearchTypeaheadCore',['Arbiter','DOM','Event','Input','Keys','Parent','ScriptPath','TypeaheadCore'],function a(b,c,d,e,f,g,h,i,j,k,l,m,n,o){if(c.__markCompiled)c.__markCompiled();var p,q;p=babelHelpers.inherits(r,o);q=p&&p.prototype;function r(s){'use strict';q.constructor.call(this,s);}r.prototype.init=function(s,t,u){'use strict';q.init.call(this,s,t,u);var v=m.byTag(u,'form'),w=this.reset.bind(this);h.subscribe('pre_page_transition',function(event,y){var z=/^\/search/,aa=z.test(y.from.path),ba=z.test(y.to.path);if(aa&&!ba)setTimeout(w,0);});if(v){var x=i.find(v,'input.search_sid_input');j.listen(v,'submit',(function(){if(this.data&&this.data.queryData)x.value=this.data.queryData.sid;setTimeout(w,0);}).bind(this),j.Priority.URGENT);}};r.prototype.select=function(){'use strict';this.reset();this.element.focus();setTimeout((function(){this.element.blur();}).bind(this),0);n.setClickPointInfo({click:'Search'});};r.prototype.handleTab=function(event){'use strict';var s=this.view.getQuerySuggestion(this.value);if(s){k.setValue(this.element,s);this.checkValue();event.kill();}else q.handleTab.call(this,event);};r.prototype.getSearchType=function(){'use strict';return 'regular';};r.prototype.focus=function(){'use strict';q.focus.call(this);if(this.getValue().length===0||this.element.getAttribute('singlestate')==='true')this.data.fetchNullState(this.getValue());};r.prototype.keyup=function(event){'use strict';if(this.getValue().length===0&&j.getKeyCode(event)===l.ESC)return;if(this.getValue().length===0)this.data.fetchNullState(this.getValue());this.element.setAttribute('singlestate',false);};f.exports=r;},null);
__d('legacy:SearchTypeaheadCore',['SearchTypeaheadCore'],function a(b,c,d,e){if(c.__markCompiled)c.__markCompiled();b.SearchTypeaheadCore=c('SearchTypeaheadCore');},3);
__d('SearchPeopleFriendsOf',['TokenizeUtil','URI','fbt'],function a(b,c,d,e,f,g,h,i,j){if(c.__markCompiled)c.__markCompiled();function k(l,m){'use strict';this.friendsOfUri=l;this.placementStrategy=m.placement_strategy;this.placementParams=m.placement_params;this.triggerStrategy=m.trigger_strategy;this.triggerParams=m.trigger_params;}k.prototype.injectInto=function(l,m){'use strict';if(!l||l.length===0||!this.$SearchPeopleFriendsOf1(l,m))return;if(l[0].type!=="user")return;var n=this.createFindAllFriendsOf(l[0].text,l[0].uid);this.$SearchPeopleFriendsOf2(n,l);};k.prototype.$SearchPeopleFriendsOf2=function(l,m){'use strict';var n=this.$SearchPeopleFriendsOf3(m);if(n==='last'){var o=m.filter(function(p){return p.type==='user';}).length;n=o;}m.splice(n,0,l);};k.prototype.$SearchPeopleFriendsOf1=function(l,m){'use strict';var n=this.$SearchPeopleFriendsOf4(this.triggerStrategy);return n(l,this.triggerParams,m);};k.prototype.$SearchPeopleFriendsOf3=function(l){'use strict';var m=this.$SearchPeopleFriendsOf4(this.placementStrategy);return m(l,this.placementParams);};k.prototype.$SearchPeopleFriendsOf4=function(l){'use strict';return this["$SearchPeopleFriendsOf_"+l];};k.prototype.$SearchPeopleFriendsOf5=function(l,m,n){'use strict';return false;};k.prototype.$SearchPeopleFriendsOf6=function(l,m,n){'use strict';return true;};k.prototype.$SearchPeopleFriendsOf7=function(l,m,n){'use strict';var o=parseInt(m,10),p=0;for(var q=0;q<l.length;q++){var r=l[q];if(r.type==='user'&&r.index_rank==-1)p++;if(p>o)return false;}return true;};k.prototype.$SearchPeopleFriendsOf8=function(l,m,n){'use strict';var o=parseInt(m,10),p=h.tokenize(n);p=p.map(function(x){return x.toLowerCase();});var q=0;for(var r=0;r<l.length;r++){var s=l[r];if(s.type!=='user'||s.index_rank!=-1)continue;var t=h.tokenize(s.text);t=t.map(function(x){return x.toLowerCase();});if(t.length<p.length)continue;var u=true;for(var v=0;v<p.length-1;v++)if(p[v]!==t[v]){u=false;break;}var w=p.length-1;if(u&&t[w].startsWith(p[w])){q++;if(q>=o)return false;}}return true;};k.prototype.$SearchPeopleFriendsOf9=function(l,m){'use strict';return "last";};k.prototype.$SearchPeopleFriendsOf10=function(l,m){'use strict';return 1;};k.prototype.createFindAllFriendsOf=function(l,m){'use strict';var n=j._("{name}'s Friends",[j.param('name',l)]),o=new i(this.friendsOfUri).addQueryData({q:"",init:'psm',fofid:m}).toString();return {uid:'people_search',type:'user',text:n,classNames:'seeAllUser',photo:'/images/search_typeahead/people_see_more.png',logType:'grammar',path:o};};f.exports=k;},null);
__d('SearchPeopleSeeMore',['TokenizeUtil','URI','fbt','invariant'],function a(b,c,d,e,f,g,h,i,j,k){if(c.__markCompiled)c.__markCompiled();function l(m,n){'use strict';var o=n.placement,p=n.strategy,q=n.min_users,r=n.query_to_show;this.seeMoreUri=m;this.placement=o;this.strategy=p;this.min_users=q;this.query_to_show=r;}l.prototype.injectInto=function(m,n){'use strict';if(!m||m.length===0)return;var o=this.$SearchPeopleSeeMore1(m,n);if(!o)return;var p=this.createFindAllPeopleResult(o);this.$SearchPeopleSeeMore2(p,m);};l.prototype.$SearchPeopleSeeMore1=function(m,n){'use strict';if(this.strategy==='disabled')return null;if(m[0].type!=='user')return null;var o=m.filter(function(s){return s.type==='user';});if(o.length<this.min_users){return null;}else if(o.length>this.min_users)o=o.slice(0,this.min_users);var p,q=o[0];switch(this.strategy){case 'all_identical':var r=o.every((function(s){return this.$SearchPeopleSeeMore3(q.text,s.text);}).bind(this));p=r?q.text:null;break;case 'top_results_prefix':p=o.reduce((function(s,t){return this.$SearchPeopleSeeMore4(s,t.text);}).bind(this),q.text);break;default:k(0);}if(!p)return null;return this.query_to_show==='common'?p:n;};l.prototype.$SearchPeopleSeeMore2=function(m,n){'use strict';if(this.placement==='last'){var o=n.filter(function(q){return q.type==='user';}).length;n.splice(o,0,m);}else{var p=parseInt(this.placement,10);n.splice(p,0,m);}};l.prototype.createFindAllPeopleResult=function(m){'use strict';var n=j._("Find all people named \"{query}\"",[j.param('query',m.toLowerCase())]),o=new i(this.seeMoreUri).addQueryData({q:m,init:'psm'}).toString();return {uid:'people_search',type:'user',text:n,classNames:'seeAllUser',photo:'/images/search_typeahead/people_see_more.png',path:o};};l.prototype.$SearchPeopleSeeMore3=function(m,n){'use strict';if(m===n)return true;var o=h.tokenize(m),p=h.tokenize(n);if(o.length!==p.length)return false;return o.every(function(q,r){return q===p[r];});};l.prototype.$SearchPeopleSeeMore4=function(m,n){'use strict';if(!m||!n)return;if(m===n)return m;var o=h.tokenize(m),p=h.tokenize(n),q=[];for(var r=0;r<o.length&&r<p.length;r++)if(o[r]===p[r]){q.push(o[r]);}else break;if(q.length===0)return null;return q.join(' ');};f.exports=l;},null);
__d('SearchTypeaheadView',['Arbiter','ContextualLayerUpdateOnScroll','ContextualTypeaheadView','DOM','SearchPeopleFriendsOf','SearchPeopleFriendsOfOptions','SearchPeopleSeeMore','SearchPeopleSeeMoreOptions','URI','cx','fbt','goURI','isEmail'],function a(b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t){if(c.__markCompiled)c.__markCompiled();var u,v;u=babelHelpers.inherits(w,j);v=u&&u.prototype;function w(y,z){'use strict';v.constructor.call(this,y,z);this._peopleSeeMore=new n(this.getSeeMoreEndpoint('',true),o);this._peopleFriendsOf=new l(this.getSeeMoreEndpoint('',true),m);}w.prototype.initializeLayer=function(){'use strict';v.initializeLayer.call(this);this.layer.setOffsetY(-1);this.layer.enableBehavior(i);};w.prototype.ignoreClick=function(event){'use strict';event.prevent();};w.prototype.render=function(y,z,aa){'use strict';if(!z)return;if(this._bucketize)z=x(z);if(this.showPeopleSeeMore&&y)this._peopleSeeMore.injectInto(z,y);if(this.showPeopleFriendsOf&&y)this._peopleFriendsOf.injectInto(z,y);var ba={results:z,value:y};this.inform('finalResultsReordering',ba);return v.render.call(this,y,ba.results,aa);};w.prototype.disableBucketization=function(){'use strict';this._bucketize=false;};w.prototype.buildBuckets=function(y,z){'use strict';var aa=z.length,ba=0,ca;for(ca=0;ca<aa;++ca)if(z[ca].type=='user')ba++;this._redirectToUsersResultsPage=this.showFilterResults&&ba===aa;this.setWebSuggLoggingParams(y,z);if(!y&&this.showFindPeople)z.unshift(this.buildFindPeople());if(this._bucketize)z=v.buildBuckets.call(this,y,z);if(y&&this._shouldShowSeeMore){z.push(this.buildSeeMore(y,aa));if(t(y)&&ba<1)z.push(this.buildInvite(y));}return z;};w.prototype.buildFindPeople=function(){'use strict';var y=r._("Find people");return {classNames:'seeAllUser seeAllUserNullState',logType:'grammar',path:this.getSeeMoreEndpoint(null,true),photo:'/images/search_typeahead/people_see_more.png',text:y,type:'no_header'};};w.prototype.buildSeeMore=function(y,z){'use strict';var aa=this.getSeeMoreText(y,z),ba=this.getSeeMoreSubtext(z),ca,da,ea,fa='',ga='',ha='';if(this.showseemorev2){da='seeMoreV2';ea='calltoactionV2';ha=k.create('span',{className:'simpleSearchSeeMoreRowRedesignIcon'});}else{da='seeMore';ea='calltoaction';fa=k.create('span',{className:'arrow'});ga=k.create('span',{className:'subtext'},[ba]);}ca=k.create('li',{className:ea},[ha,k.create('a',{href:this.getSeeMoreEndpoint(y),rel:'ignore'},[k.create('span',{className:'text'},[k.create('span',{className:da},aa),fa,ga])])]);ca.setAttribute('aria-label',aa);return {uid:'search',node:ca,search:true};};w.prototype.getSeeMoreText=function(y,z){'use strict';if(this.showKeywordResultsPage)return r._("Search for {query}",[r.param('query',y)]);if(z<=0)return r._("See results for {query}",[r.param('query',y)]);if(this._redirectToUsersResultsPage)return r._("Filter results for {query}",[r.param('query',y)]);if(this.showseemorev2){var aa=k.create('b',{},y);return r._("Find more results for {query}",[r.param('query',aa)]);}else return r._(["See more results for {query}","44e6d113d67af68d7209174cf9420c3d"],[r.param('query',y)]);};w.prototype.getSeeMoreSubtext=function(y){'use strict';if(y===0)return r._("No results to display");if(y===1)return r._("Displaying top result");return r._({"*":"Displaying top {number} results"},[r.param('number',y,[0])]);};w.prototype.buildInvite=function(y){'use strict';var z=r._("Invite {query} to Facebook",[r.param('query',y)]),aa=k.create('li',{className:'calltoaction'},[k.create('a',{href:this.getInviteEndpoint(y),rel:'ignore'},[k.create('span',{className:'text'},[k.create('span',{className:'invite'},[z])])])]);aa.setAttribute('aria-label',z);return {uid:'invite',node:aa,search:true};};w.prototype.searchPageQueryData=function(y){'use strict';return babelHelpers._extends({q:y},this.queryData||{});};w.prototype.searchPageTypeData=function(y){'use strict';return this._redirectToUsersResultsPage||y?{type:"users"}:{};};w.prototype.select=function(y){'use strict';var z=this.index,aa=this.results[z];if(!aa||aa.type=='header')return;var ba=this.items[z],ca=k.scry(ba,'a')[0];v.select.call(this,y);if(ca&&ca.href)if(ca.target=='_blank'){window.open(ca.href);}else s(ca.href);};w.prototype.setSid=function(y){'use strict';this.queryData.tas=y;};w.prototype.getSeeMoreEndpoint=function(y,z){'use strict';return new p(this.seeMoreEndpoint).addQueryData(this.searchPageQueryData(y)).addQueryData(this.searchPageTypeData(z)).toString();};w.prototype.getInviteEndpoint=function(y){'use strict';return new p('/invite.php').addQueryData({email_list:y});};w.prototype.show=function(){'use strict';if(!this.isVisible()){h.inform('layer_shown',{type:'SearchTypeahead'});this.searchBtns=this.searchBtns||k.scry(this.typeahead,'button.reDesignedBtn');if(this.searchBtns[0])CSS.addClass(this.searchBtns[0],"btnSelected");v.show.call(this);}};w.prototype.hide=function(){'use strict';if(this.isVisible()){h.inform('layer_hidden',{type:'SearchTypeahead'});this.searchBtns=this.searchBtns||k.scry(this.typeahead,'button.reDesignedBtn');if(this.searchBtns[0]&&CSS.hasClass(this.searchBtns[0],"btnSelected"))CSS.removeClass(this.searchBtns[0],"btnSelected");v.hide.call(this);}};w.prototype.getQuerySuggestion=function(y){'use strict';var z=this.results[this.index],aa=z&&z.type!='header'?z.text.toLowerCase():'';return aa==y.toLowerCase()?'':aa;};w.prototype.setWebSuggLoggingParams=function(y,z){'use strict';var aa=0,ba=0;for(var ca=0;ca<z.length;ca++)if(z[ca].type==='websuggestion'){if(ba===0)ba=ca+1;var da='FR'+(ca-aa)+'AS'+aa,ea=ca+1;z[ca].path+='&wssk='+da+'&wssp='+ea+'&wspq='+encodeURIComponent(y);z[ca].path+='&wssrc='+z[ca].websuggestion_source;aa++;}var fa='&wssc='+z.length+'-'+y.length+'&wsbp='+aa+'-'+ba;for(ca=0;ca<z.length;ca++)if(z[ca].type==='websuggestion')z[ca].path+=fa;};function x(y){var z,aa,ba,ca,da=[],ea={};aa=y.length;for(z=0;z<aa;z++){ba=y[z];ca=ba.render_type||ba.type;if(!ea.hasOwnProperty(ca)){ea[ca]=da.length;da.push([]);}da[ea[ca]].push(ba);}var fa=[];aa=da.length;for(z=0;z<aa;++z){ba=da[z][0];ca=ba.render_type||ba.type;fa=fa.concat(da[z]);}return fa;}Object.assign(w.prototype,{_shouldShowSeeMore:true,_bucketize:true,queryData:{init:'quick'}});f.exports=w;},null);
__d('legacy:SearchTypeaheadView',['SearchTypeaheadView'],function a(b,c,d,e){if(c.__markCompiled)c.__markCompiled();b.SearchTypeaheadView=c('SearchTypeaheadView');},3);
__d('QueryHistory',[],function a(b,c,d,e,f,g){if(c.__markCompiled)c.__markCompiled();var h={},i={set:function(j,k){h[this._key(j)]=k;},get:function(j){return h[this._key(j)];},_key:function(j){return 'uri-'+j.getQualifiedURI().toString();}};f.exports=i;},null);
__d('SearchTypeaheadRecorder',['AsyncRequest','Banzai','BanzaiNectar','BanzaiScuba','CurrentUser','Event','FacebarGlobalOptions','Keys','TokenizeUtil','Vector','clickRefAction','mapObject','ge','throttle','whitelistObjectKeys'],function a(b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v){if(c.__markCompiled)c.__markCompiled();var w={WAITING:'WAITING',SUCCESS:'SUCCESS',NO_RESULTS:'NO_RESULTS',ERROR:'ERROR'};function x(z){'use strict';this.init(z);this.initEvents(z);}x.prototype.init=function(z){'use strict';this.core=z.getCore();this.data=z.getData();this.view=z.getView();this.element=this.core.getElement();this.initTime=Date.now();this._onloadTime=0;this._extraRecorder=[];this.performanceTimings={};this.allFromSingleState=false;this.allFromNullState=false;var aa=t('search_first_focus');this.initStartTime=aa&&aa.value;this.bootstrapStats={bootstrapped:0};this.type="legacy_search";this._reset();};x.prototype._reset=function(){'use strict';this.stats={};this.avgStats={};this.appendStats={};this._backspacing=false;this.backendQueries=[];this.backendQueriesStatus={};this._topreplace=false;this._inflightRequests={};var z=Math.random().toString();this.data.setQueryData({sid:z});this.view.setSid(z);this.recordStat('sid',z);this.recordStat('keypressed',0);};x.prototype.initEvents=function(){'use strict';this.core.subscribe('focus',(function(event){if(!this.stats.session_start_time){this.recordStat('session_start_time',Date.now());var z=new Date(),aa=z.getTimezoneOffset(),ba=Date.now()-aa*60*1000;this.recordStat('session_start_time_user_timezone',ba);}}).bind(this));this.core.subscribe('blur',(function(event){var z=Date.now();for(var aa in this._inflightRequests){var ba=this._inflightRequests[aa],ca=z-ba;this.recordAvgStat('search_endpoint_ms_from_js',ca);}this.recordStat('session_end_time',z);this.submit();}).bind(this));this.view.subscribe('select',(function(z,aa){this.recordSelectInfo(aa);}).bind(this));this.view.subscribe('render',(function(z,aa){this.recordRender(aa);}).bind(this));this.data.subscribe('logPerformanceTiming',(function(z,aa){this.performanceTimings[aa.field]=aa.value;}).bind(this));this.data.subscribe('activity',(function(z,aa){this.recordStat('pending_request',aa.activity);}).bind(this));this.data.subscribe('respondValidUids',(function(z,aa){this.validUids=aa.slice(0);}).bind(this));this.data.subscribe('beforeQuery',(function(z,aa){if(!aa.value){this.query='';this.results=[];this.data.lastNullOrSingleStateFetchStartTime=Date.now();return;}if(!this.stats.first_query_time)this.recordStat('first_query_time',Date.now());this.query=aa.value;if(!this.queryStartTime)this.queryStartTime=[];this.queryStartTime[this.query]=Date.now();this.recordCountStat('num_queries');}).bind(this));this.data.subscribe('queryEndpoint',(function(z,aa){this.recordCountStat('num_search_ajax_requests');this.recordAvgStat('endpoint_query_length',aa.value.length);this._inflightRequests[aa.value]=Date.now();}).bind(this));this.data.subscribe('onload',(function(z,aa){this._onloadTime=aa.time;}).bind(this));this.data.subscribe('bootstrapped',(function(z,aa){this.bootstrapStats.endTime=aa.time;this.bootstrapStats.bootstrapped=1;}).bind(this));this.core.subscribe('recordFunction',(function(z,aa){this._extraRecorder.push(aa);}).bind(this));this.data.subscribe('endpointStats',(function(z,aa){var ba=aa.info,ca=ba.fetch_end-ba.fetch_start;if(ba.value){this.recordAvgStat('search_endpoint_ms_from_js',ca);}else this.bootstrapStats[ba.type]=ca;if(ba.coeff2_ts)this.bootstrapStats.coeff2_ts=ba.coeff2_ts;if(typeof ba.browserCacheHit!='undefined')this.recordCountStat(ba.browserCacheHit?'bootstrap_cachehits':'bootstrap_cachemisses');if(this._inflightRequests[ba.value])delete this._inflightRequests[ba.value];}).bind(this));this.data.subscribe('fetchComplete',(function(z,aa){var ba=aa.entries,ca=aa.value;if(ca&&this.backendQueriesStatus[ca]){this._addDurationForBackendQuery(this.backendQueriesStatus[ca]);this.backendQueriesStatus[ca].status=ba&&ba.length>0?w.SUCCESS:w.NO_RESULTS;}}).bind(this));this.data.subscribe('fetchError',(function(z,aa){var ba=aa.fetch_context,ca=ba.value;if(ba.bootstrap||!ca)return;if(this.backendQueriesStatus[ca]){this.backendQueriesStatus[ca].status=w.ERROR;this._addDurationForBackendQuery(this.backendQueriesStatus[ca]);}}).bind(this));this.data.subscribe('query',(function(z,aa){this.recordAvgStat('num_results_from_cache',aa.results.length);}).bind(this));this.data.subscribe('backend_topreplace',(function(z,aa){if(false===this._topreplace){this.recordStat("backend_topreplace",1);this._topreplace=true;}}).bind(this));this.data.subscribe('completeFetch',(function(z,aa){if(this.core.scubaInfo){var ba=aa.response,ca={recv:aa.stats.fetch_end-aa.stats.fetch_start,render:Date.now()-aa.stats.fetch_start,payload_size:JSON.stringify(ba).length};if(!ba.payload.entities)ba.payload.entities=this.buildResults();this.logToScuba(ba,ca,this.core.scubaInfo,this.query,this.type);}}).bind(this));this.data.subscribe('completeCacheFetch',u((function(z,aa){if(this.core.scubaInfo)this.logToScuba({},{},this.core.scubaInfo,this.query,this.type);}).bind(this),500));m.listen(this.element,'keydown',(function(event){this.recordStat('keypressed',1);this.recordCountStat('count_keys_pressed');if(m.getKeyCode(event)==o.BACKSPACE){if(!this._backspacing&&this.query){this._backspacing=true;this.recordAppendStat('before_backspace_queries',this.query);}}else this._backspacing=false;}).bind(this));this.data.subscribe('beforeFetch',(function(z,aa){var ba=aa.request.data.value;if(!ba)return;this.backendQueries.push(ba);this.backendQueriesStatus[ba]={status:w.WAITING,start_time:Date.now()};}).bind(this));};x.prototype.recordStat=function(z,aa){'use strict';this.stats[z]=aa;};x.prototype.recordCountStat=function(z){'use strict';var aa=this.stats[z];this.stats[z]=aa?aa+1:1;};x.prototype.recordAvgStat=function(z,aa){'use strict';if(this.avgStats[z]){this.avgStats[z][0]+=aa;++this.avgStats[z][1];}else this.avgStats[z]=[aa,1];};x.prototype.recordAppendStat=function(z,aa){'use strict';if(!this.appendStats.hasOwnProperty(z))this.appendStats[z]=[];this.appendStats[z].push(aa);};x.prototype.recordRender=function(z){'use strict';this.results=z.filter(function(ja){return ja.uid!='search'&&ja.type!='disabled_result'&&ja.type!='header';}).map(function(ja){return babelHelpers._extends({},ja);});var aa=null;if(this.queryStartTime)aa=this.queryStartTime[this.query];var ba=this.results.every(function(ja){return ja.fromCache;}),ca=this.results.every(function(ja){return ja.isFromGSEF||ja.fromCache;}),da=this.results.every(function(ja){return ja.isNullState;}),ea=this.results.every(function(ja){return ja.isSingleState;}),fa=this.results.every(function(ja){return ja.exactMatchKeyword;});this.allFromSingleState=ea;this.allFromNullState=da;if(this.results.length&&this.data.lastNullOrSingleStateFetchStartTime&&da){this.recordStat('time_render_null_state',Date.now()-this.data.lastNullOrSingleStateFetchStartTime);this.data.lastNullOrSingleStateFetchStartTime=null;}else if(this.data.lastNullOrSingleStateFetchStartTime&&this.results.length&&ea){this.recordStat('time_render_single_state',Date.now()-this.data.lastNullOrSingleStateFetchStartTime);}else if(aa){var ga=Date.now()-aa;if(fa){this.recordAppendStat('times_render_gs_echo',ga);}else this.recordAppendStat(ba?'times_render_local':'times_render_remote',ga);if(!ba&&ca)this.recordAppendStat('time_render_gs_early_fetch',ga);}this.data.lastNullOrSingleStateFetchStartTime=null;var ha=q.getViewportDimensions();this.recordStat('window_size_width',ha.x);this.recordStat('window_size_height',ha.y);if(this.results.length>0&&!this.stats.first_result_time)this.recordStat('first_result_time',Date.now());var ia='typed';if(this.allFromNullState){ia='nullstate';}else if(this.allFromSingleState)ia='singlestate';this.recordStat('last_state',ia);};x.prototype.recordSelectInfo=function(z){'use strict';var aa=z.selected,ba=z.index;if(aa.groupIndex!==undefined)ba=z.index-aa.groupIndex-1;var ca={href:aa.path},da=aa.dataGT?{gt:JSON.parse(aa.dataGT)}:{};r('click',ca,null,null,da);if(aa.uid=='search'||aa.uid=='people_search'){this.recordStat('selected_search',1);}else if(aa.uid=='invite'){this.recordStat('selected_invite',1);}else{var ea=aa.log_type||aa.rankType||aa.render_type||aa.type,fa=ea=='friend'?'user':ea;this.recordStat('selected_'+fa,1);this.recordStat('selected_position',ba);this.recordStat('selected_type',ea);this.recordStat('selected_name_length',aa.text.length);this.recordStat('selected_id',aa.uid);this.recordStat('selected_degree',aa.bootstrapped?1:2);this.recordStat('selected_recent_search',aa.recent_search);var ga=p.parse(this.data.getTextToIndex(aa)).tokens,ha=y(ga,this.query);if(ha)this.recordStat('matched_terms',ha);}var ia={};this._extraRecorder.forEach((function(ja){ja(z,this.results,ia);}).bind(this));this.recordStat('extra_select_info',JSON.stringify(ia));this.recordStat('selected_with_mouse',z.clicked?1:0);};x.prototype._addDurationForBackendQuery=function(z){'use strict';if(z.start_time){z.duration=Date.now()-z.start_time;delete z.start_time;}};x.prototype._dataToSubmit=function(){'use strict';this.recordStat('candidate_results',this.buildResults());this.recordStat('query',this.query);this.recordStat('init_time',this.initTime);if(this.initStartTime){this.recordStat('init_start_time',this.initStartTime);this.recordStat('onload_time',this._onloadTime);this.initStartTime=0;}this.recordStat('bootstrapped',this.bootstrapStats.bootstrapped);if(this.bootstrapStats.endTime){this.recordStat('bootstrapped_time',this.bootstrapStats.endTime);this.recordStat('user_bootstrap_ms',this.bootstrapStats.user);this.recordStat('other_bootstrap_ms',this.bootstrapStats.other);this.bootstrapStats.endTime=0;}var z=this.data.getBootstrapError();if(z)this.recordStat('bootstrap_error',1);this.recordStat('coeff2_ts',this.bootstrapStats.coeff2_ts);this.recordStat('max_results',this.data._maxResults);if(this.backendQueries.length>0){if(this.backendQueries.length>this.data.logBackendQueriesWindow)this.backendQueries=this.backendQueries.slice(this.backendQueries.length-this.data.logBackendQueriesWindow);this.recordStat('backend_queries',this.backendQueries);var aa=v(this.backendQueriesStatus,this.backendQueries);s(aa,this._addDurationForBackendQuery,this);this.recordStat('backend_queries_status',aa);}if(n.taSessionLoggingSample){var ba=[];this.results.forEach(function(ga){ba.push([ga.text||'',ga.category||'',ga.subtext||'']);});this.recordStat('raw_suggestions_text',ba);}var ca=this.stats;for(var da in this.avgStats){var ea=this.avgStats[da];ca[da]=ea[0]/ea[1];}for(var fa in this.appendStats)ca[fa]=JSON.stringify(this.appendStats[fa]);return ca;};x.prototype.buildResults=function(){'use strict';var z=(this.results||[]).map((function(aa,ba){var ca=p.parse(this.data.getTextToIndex(aa)).tokens,da=aa.rankType||aa.render_type||aa.type,ea=aa.bootstrapped?1:0,fa=aa.s_token||'',ga=typeof aa.index=='undefined'?100:aa.index,ha=y(ca,this.query)||this.query,ia=aa.index_rank,ja=aa.match_type,ka=aa.l_type,la=aa.vertical_type,ma=aa.prefix_match,na=aa.prefix_length,oa=aa.text,pa=aa.category,qa=aa.subtext,ra=aa.fromCache,sa=aa.isNullState,ta=aa.isSingleState;if(typeof aa.groupIndex=='number')return [aa.groupIndex,aa.indexInGroup,aa.uid,da,ea,fa,ha,ia,ja,ma,na,aa.origIndex,ka,la,oa,pa,qa,ga,ra,sa,ta];return [0,ba,aa.uid,da,ea,fa,ha,ia,ja,ma,na,aa.origIndex,ka,la,oa,pa,qa,ga,ra,sa,ta];}).bind(this));return JSON.stringify(z);};x.prototype.submit=function(){'use strict';var z=this._dataToSubmit();switch(this.data.recordingRoute){case 'banzai_vital':i.post(this._banzaiRoute,z,{delay:0,retry:true});break;default:this.submitThroughAsyncRequest(z);}this._reset();};x.prototype.addLatencyToSample=function(z,aa,ba,ca){'use strict';z.addInteger(ca+'query_start',ba.queryStart);z.addInteger(ca+'query_end',ba.queryEnd);z.addInteger(ca+'keypress_query_end',ba.keyPressToQueryEnd);z.addInteger(ca+'render',ba.render);z.addInteger(ca+'keypress_render',ba.keyPressToRender);aa[ca+'query_start']=ba.queryStart;aa[ca+'query_end']=ba.queryEnd;aa[ca+'keypress_query_end']=ba.keyPressToQueryEnd;aa[ca+'render']=ba.render;aa[ca+'keypress_render']=ba.keyPressToRender;};x.prototype.logToScuba=function(z,aa,ba,ca,da){'use strict';var ea={},fa=new k('search_facebar_js',null,{addBrowserFields:true,addPredictedGeographyFields:true,addUser:true,addSearchVersion:true,addGatekeepers:{facebarGKs:true}});fa.addInteger('sample_rate',ba.sample_rate);ea.sample_rate=ba.sample_rate;fa.addNormal('site',ba.site);ea.site=ba.site;fa.addDenorm('query',ca);ea.query=ca;var ga=z.payload||{};if(ga.entities){fa.addInteger('num_entities',ga.entities.length);ea.num_entities=ga.entities.length;}Object.keys(this.performanceTimings).forEach((function(ia){fa.addInteger(ia,this.performanceTimings[ia]);ea[ia]=this.performanceTimings[ia];}).bind(this),this);if(ga.results||ga.entries){var ha=(ga.results||ga.entries).length;fa.addInteger('num_results',ha);ea.num_results=ha;}if(ga.gzipped_payload_size!==undefined){fa.addInteger('gzipped_payload_size',ga.gzipped_payload_size);ea.gzipped_payload_size=ga.gzipped_payload_size;}if(aa.recv&&aa.render>aa.recv){fa.addInteger('time_render',aa.render-aa.recv);ea.time_render=aa.render-aa.recv;fa.addInteger('time_js_async',aa.recv);ea.time_js_async=aa.recv;}if(aa.payload_size){fa.addInteger('payload_size',aa.payload_size);ea.payload_size=aa.payload_size;}if(this.stats.time_render_null_state&&(!ca||ca.length===0)){fa.addInteger('time_render_null_state',this.stats.time_render_null_state);ea.time_render_null_state=this.stats.time_render_null_state;}fa.addInteger('query_id',z.queryId);ea.query_id=z.queryId;fa.addDenorm('user_id',l.getID());ea.user_id=l.getID();fa.addDenorm('session_id',this.stats.sid);ea.session_id=this.stats.sid;fa.addNormal('typeahead_type',da);ea.typeahead_type=da;if(aa.remoteQueryLatencies){this.addLatencyToSample(fa,ea,aa.remoteQueryLatencies,'remote_');fa.addInteger('remote_keypress_query_dispatch',aa.remoteQueryLatencies.keyPressToQueryDispatch);ea.remote_keypress_query_dispatch=aa.remoteQueryLatencies.keyPressToQueryDispatch;fa.addInteger('remote_keypress_query_start',aa.remoteQueryLatencies.keyPressToQueryStart);ea.remote_keypress_query_start=aa.remoteQueryLatencies.keyPressToQueryStart;fa.addNormal('inflight_requests',aa.remoteQueryLatencies.inflightRequests);fa.addInteger('inflight_requests',aa.remoteQueryLatencies.inflightRequests);ea.inflight_requests=aa.remoteQueryLatencies.inflightRequests;fa.addNormal('waiting_queries',aa.remoteQueryLatencies.waitingQueries);fa.addInteger('waiting_queries',aa.remoteQueryLatencies.waitingQueries);ea.waiting_queries=aa.remoteQueryLatencies.waitingQueries;}if(aa.cacheQueryLatencies)this.addLatencyToSample(fa,ea,aa.cacheQueryLatencies,'cache_');fa.post();j.log('search_facebar_js','typeahead',ea);};x.prototype.submitThroughAsyncRequest=function(z){'use strict';if(Object.keys(z).length>0)new h().setURI(this._endPoint).setMethod('POST').setData({stats:z}).setOption('handleErrorAfterUnload',true).setErrorHandler((function(aa){z.retry=true;new h().setURI(this._endPoint).setMethod('POST').setData({stats:z}).setOption('asynchronous_DEPRECATED',false).send();}).bind(this)).send();};var y=function(z,aa){if(!z||!aa)return;var ba=p.parse(aa);if(ba.flatValue[ba.flatValue.length-1]===' ')return ba.flatValue;var ca=ba.tokens[ba.tokens.length-1],da={};z.forEach(function(ia){da[ia]=(da[ia]||0)+1;});var ea={},fa=ba.tokens.slice(0,ba.tokens.length-1);fa.forEach(function(ia){ea[ia]=(ea[ia]||0)+1;});for(var ga=0;ga<z.length;++ga){var ha=z[ga];if(ha.indexOf(ca)===0&&da[ha]-(ea[ha]||0)>0){fa.push(ha);return fa.join(' ');}}return undefined;};Object.assign(x.prototype,{_endPoint:'/ajax/typeahead/record_metrics.php',_banzaiRoute:'search'});f.exports=x;},null);
__d('TypeaheadSearchRecorderBasic',['SearchTypeaheadRecorder','emptyFunction'],function a(b,c,d,e,f,g,h,i){if(c.__markCompiled)c.__markCompiled();function j(k){'use strict';this._typeahead=k;}j.prototype.enable=function(){'use strict';new h(this._typeahead);};Object.assign(j.prototype,{disable:i});f.exports=j;},null);
__d('legacy:SearchRecorderBasicTypeaheadBehavior',['TypeaheadSearchRecorderBasic'],function a(b,c,d,e,f,g,h){if(c.__markCompiled)c.__markCompiled();if(!b.TypeaheadBehaviors)b.TypeaheadBehaviors={};b.TypeaheadBehaviors.searchRecorderBasic=function(i){i.enableBehavior(h);};},3);
__d('SearchTypeaheadRenderer',['BadgeHelper','DOM','Locale','TokenizeUtil','TypeaheadFacepile','URI','UnicodeBidi','WWWBase','fbt'],function a(b,c,d,e,f,g,h,i,j,k,l,m,n,o,p){if(c.__markCompiled)c.__markCompiled();var q=' \u00B7 ',r=false;function s(t,u){var v=[],w=t.photos||t.photo;if(w){if(w instanceof Array){w=l.render(w);}else w=i.create('img',{alt:'',src:w});v.push(w);}var x;if(t.text){var y=t.alias,z=this.value,aa=t.text,ba=n.isDirectionRTL(aa.toString()),ca=j.isRTL(),da=ba&&!ca?'rtl':!ba&&ca?'ltr':'';x=[aa];if(y&&k.isQueryMatch(z,y)&&!k.isQueryMatch(z,aa))x.push(i.create('span',{className:'alias'},[' \xB7 '+y]));if(t.is_verified){x.push(h.renderBadge('xsmall','verified'));}else if(t.is_work_user)x.push(h.renderBadge('xsmall','work'));if(t.badge){x.push(i.create('span',{className:''},' \xB7 '));var ea=[t.badge];x.push(i.create('span',{className:'unSeenPosts'},ea));}v.push(i.create('span',{className:'text',dir:da},x));}if(t.category){var fa=[t.category];if(t.is_external)fa.push(i.create('span',{className:'arrow'}));var ga=t.message?'preCategory':'category';v.push(i.create('span',{className:ga},fa));}if(t.message)v.push(i.create('span',{className:'category'},[t.message]));var ha=t.subtextOverride||t.subtext;if(ha){var ia=[ha];if(t.saved_context){var ja=i.create('span',{className:'saved'},[t.saved_context]);ia.unshift(ja,q);}v.push(i.create('span',{className:'subtext'},ia));}var ka=t.classNames||t.type||'',la=t.is_external?'_blank':'',ma=!t.song&&t.path||'';if(ma){if(!/^https?\:\/\//.test(ma))ma=o.uri+ma.substr(1);ma+=(ma.indexOf('?')>0?'&':'?')+'ref=ts&fref=ts';}var na=i.create('a',{href:ma,rel:'ignore',target:la},v),oa=null;if(t.type==='header'){var pa=null,qa=null;if(t.uid==='recent'){qa=new m('/profile.php');qa.setQueryData({sk:'allactivity',log_filter:'search'});pa=p._("EDIT");}else if(t.uid==='pymk'){qa=new m('/find-friends/browser/');pa=p._("SEE ALL");}if(qa){oa=i.create('a',{href:qa,className:'typeaheadHeaderRightLink'},pa);na.setAttribute('class','typeaheadHeaderLeftLink');ka+=' typeaheadHeader';}}var ra=i.create('li',{className:ka},[na,oa]);if(t.text){ra.setAttribute('title',t.text);ra.setAttribute('aria-label',t.text);}if(this.showupadatedsuggestions&&!r){s.className+=' updatedSuggestionRows';r=true;}return ra;}s.className='search';f.exports=s;},null);
__d('legacy:SearchTypeaheadRenderer',['SearchTypeaheadRenderer'],function a(b,c,d,e){if(c.__markCompiled)c.__markCompiled();if(!b.TypeaheadRenderers)b.TypeaheadRenderers={};b.TypeaheadRenderers.search=c('SearchTypeaheadRenderer');},3);
__d('TypeaheadShowLoadingIndicator',['CSS'],function a(b,c,d,e,f,g,h){if(c.__markCompiled)c.__markCompiled();function i(j){'use strict';this._typeahead=j;}i.prototype.enable=function(){'use strict';this._subscription=this._typeahead.subscribe('loading',(function(j,k){h.conditionClass(this._typeahead.getElement(),'typeaheadLoading',k.loading);h.conditionClass(this._typeahead.getView().getElement(),'typeaheadViewLoading',k.loading);}).bind(this));};i.prototype.disable=function(){'use strict';this._typeahead.unsubscribe(this._subscription);this._subscription=null;};Object.assign(i.prototype,{_subscription:null});f.exports=i;},null);
__d('legacy:ShowLoadingIndicatorTypeaheadBehavior',['TypeaheadShowLoadingIndicator'],function a(b,c,d,e,f,g,h){if(c.__markCompiled)c.__markCompiled();if(!b.TypeaheadBehaviors)b.TypeaheadBehaviors={};b.TypeaheadBehaviors.showLoadingIndicator=function(i){i.enableBehavior(h);};},3);
void 0;
__d('SimpleSearchNavigation',['Arbiter','DOMQuery','Input','QueryHistory','URI'],function a(b,c,d,e,f,g,h,i,j,k,l){if(c.__markCompiled)c.__markCompiled();var m=null,n=null,o={registerInput:function(p,q){n=i.scry(p,'input')[0];if(m)this._updateTitle(m,q);h.subscribe('page_transition',(function(r,s){this._updateTitle(k.get(s.uri));}).bind(this));},_updateTitle:function(p,q){if(n){j.setValue(n,p||'');n.setAttribute('singlestate',p&&q);n.blur();}},setPageTitle:function(p,q){k.set(l.getNextURI(),p);if(n){this._updateTitle(p,q);}else m=p;var r={};h.inform('search/updateNullState',r,h.BEHAVIOR_STATE);},setPageQuery:function(p){h.inform('search/updateNullState',p,h.BEHAVIOR_STATE);}};f.exports=o;},null);
__d("XSearchFacebarSurveyController",["XController"],function a(b,c,d,e,f,g){c.__markCompiled&&c.__markCompiled();f.exports=c("XController").create("\/search\/facebar_survey\/",{id:{type:"String",required:true},query:{type:"String"},session_id:{type:"String",required:true},on_session_start:{type:"Exists",defaultValue:false},result_selected:{type:"Exists",defaultValue:false}});},null);
__d('AbandonedSessionSurvey',['AsyncRequest','SubscriptionsHandler','XSearchFacebarSurveyController','getOrCreateDOMID'],function a(b,c,d,e,f,g,h,i,j,k){if(c.__markCompiled)c.__markCompiled();function l(m){'use strict';this.core=m.getCore();this.data=m.getData();this.view=m.getView();this.tryToSubmitSurvey=this.tryToSubmitSurvey.bind(this);this.subscriptionsHandler=new i();}l.prototype.enable=function(){'use strict';this.subscriptionsHandler.addSubscriptions(this.core.subscribe('focus',(function(){this.searchBoxFocused=true;this.resultSelected=false;}).bind(this)),this.data.subscribe('beforeQuery',(function(m,n){this.query=n.value||'';}).bind(this)),this.view.subscribe('select',(function(){this.resultSelected=true;this.tryToSubmitSurvey();}).bind(this)),this.core.subscribe('blur',this.tryToSubmitSurvey));};l.prototype.disable=function(){'use strict';this.subscriptionsHandler.release();this.request&&this.request.abort();};l.prototype.tryToSubmitSurvey=function(){'use strict';if(this.searchBoxFocused){this.openSurvey();this.resultSelected=false;this.searchBoxFocused=false;}};l.prototype.openSurvey=function(){'use strict';if(this.openedSurvey)return;this.openedSurvey=true;var m=this.core.element;if(m==null)m=this.core.getElement();var n=this.normalizeValue(this.query),o=j.getURIBuilder().setString('id',k(m)).setString('query',n!=null?n:'').setString('session_id',this.data.queryData.sid).setExists('result_selected',this.resultSelected);this.request=new h().setMethod('post').setAllowCrossPageTransition(true).setURI(o.getURI());this.request.send();};l.prototype.normalizeValue=function(m){'use strict';return String(m).trim().replace(/\s+/g,' ').replace(/[\u200E|\u200F|\u202a|\u202b|\u202c]/g,'').toLowerCase();};f.exports=l;},null);
__d('TypeaheadSearchFilter',['Arbiter'],function a(b,c,d,e,f,g,h){if(c.__markCompiled)c.__markCompiled();function i(j){'use strict';this._typeahead=j;}i.prototype.enable=function(){'use strict';var j=this._typeahead,k=j.getView().seeMoreEndpoint;this._subscriptions=[h.subscribe('search/typeahead/updateFilter',function(l,m){if(m.filter_type=='web')j.getView().queryData.form='FBKBFR';j.getView().queryData.type=m.filter_type;}),h.subscribe('search/typeahead/updateSeeMoreEndpoint',function(l,m){j.getView().seeMoreEndpoint=m;}),h.subscribe('page_transition',function(l,m){if(j.getView().queryData.form)delete j.getView().queryData.form;delete j.getView().queryData.type;j.getView().seeMoreEndpoint=k;},h.SUBSCRIBE_NEW)];};i.prototype.disable=function(){'use strict';this._subscriptions.forEach(function(j){j.unsubscribe();});this._subscriptions=null;};Object.assign(i.prototype,{_subscription:null});f.exports=i;},null);
__d('legacy:SearchFilterTypeaheadBehavior',['TypeaheadSearchFilter'],function a(b,c,d,e,f,g,h){if(c.__markCompiled)c.__markCompiled();if(!b.TypeaheadBehaviors)b.TypeaheadBehaviors={};b.TypeaheadBehaviors.initFilters=function(i){i.enableBehavior(h);};},3);
__d('TypeaheadDetectQueryLocale',[],function a(b,c,d,e,f,g){if(c.__markCompiled)c.__markCompiled();function h(i){'use strict';this._typeahead=i;this._data=i.getData();this._queryCache={'':this._data.queryCache,ja_JP:{},zh_TW:{}};}h.prototype.enable=function(){'use strict';this._previousLocale='';this._reset=this._typeahead.subscribe('reset',this._swapQueryCache.bind(this,''));this._beforeQuery=this._data.subscribe('beforeQuery',(function(i,j){var k=j.value;if(k===''){this._swapQueryCache('');return;}var l=null,m=k.charCodeAt(k.length-1);if(12352<=m&&m<=12543){l='ja_JP';}else if(12544<=m&&m<=12735)l='zh_TW';this._swapQueryCache(l);}).bind(this));};h.prototype.disable=function(){'use strict';this._swapQueryCache('');this._data.unsubscribe(this._beforeQuery);this._typeahead.ubsubscribe(this._reset);};h.prototype._swapQueryCache=function(i){'use strict';if(i===null||i===this._previousLocale)return;this._data.queryCache=this._queryCache[i];this._data.setQueryData({query_locale:i});this._previousLocale=i;};f.exports=h;},null);
__d('TypeaheadExcludeBootstrapFromQueryCache',[],function a(b,c,d,e,f,g){if(c.__markCompiled)c.__markCompiled();function h(i){'use strict';this._data=i.getData();}h.prototype.enable=function(){'use strict';this._buildingQueryCache=false;this._buildQueryCache=this._data.subscribe('buildQueryCache',(function(){this._buildingQueryCache=true;}).bind(this));this._mergeUids=this._data.subscribe('mergeUids',(function(i,j){if(this._buildingQueryCache)j.local_uids.splice(0,j.local_uids.length);}).bind(this));this._fetchComplete=this._data.subscribe('fetchComplete',(function(){this._buildingQueryCache=false;}).bind(this));};h.prototype.disable=function(){'use strict';this._data.unsubscribe(this._buildQueryCache);this._data.unsubscribe(this._mergeUids);this._data.unsubscribe(this._fetchComplete);};f.exports=h;},null);
__d('TypeaheadRecentSearchUpdater',['Arbiter'],function a(b,c,d,e,f,g,h){if(c.__markCompiled)c.__markCompiled();function i(j){'use strict';this.view=j.getView();}i.prototype.enable=function(){'use strict';this.updaterSubscription=this.view.subscribe('select',function(){h.inform('search/refreshRecentSearchesNullstate',{},h.BEHAVIOR_STATE);});};i.prototype.disable=function(){'use strict';this.view.unsubscribe(this.updaterSubscription);};f.exports=i;},null);
__d('FeedAdsGapRuleViolationDetection',['Banzai','CSS','csx','cx','DOM','ge','isEmpty'],function a(b,c,d,e,f,g,h,i,j,k,l,m,n){if(c.__markCompiled)c.__markCompiled();var o='ei',p='qid',q='gap rule violation',r='non violating ads gap',s='first position violation',t='feed load',u='first position invalidation',v='spacing invalidation',w=[],x=[],y=[],z={},aa={},ba={registerFeedStories:function(ca,da){if(ca.containerID=='substream_0'){w=[];x=[];}var ea=m(ca.containerID);if(!ea)return;z=babelHelpers._extends({},ca.demoAdChecks,z);var fa=l.scry(ea,"div._5jmm").map(this._convertStoryNodeToObject).filter(function(ha){return ha!==null;});if(ca.isLoggingEnabled&&fa.length!==0)this._logFeedLoad();if(ca.isNewerStories){w=fa.concat(w);}else w=w.concat(fa);for(var ga in ca.minGaps)if(ca.minGaps.hasOwnProperty(ga))aa[ga]=ca.minGaps[ga];if(n(z)){if(ca.isLoggingEnabled||ca.isFirstPosInvalidationEnabled)this._checkFirstPosViolation(ca,ea);if(ca.isLoggingEnabled||ca.isGapRuleInvalidationEnabled)this._checkGapRuleViolation(ca);}},_convertStoryNodeToObject:function(ca){if(i.hasClass(ca,"_170y"))return null;var da=ca.getAttribute('data-dedupekey');if(z[da])return null;var ea=l.scry(ca,"div._hye"),fa=l.scry(ca,"li._170x"),ga=[];if(ea.length!==0){ga=ea.map(function(ja){return ja.getAttribute('data-ft');}).filter(function(ja){return ja!==null;});}else if(fa.length!==0){ga=fa.map(function(ja){return ja.getAttribute('data-ft');}).filter(function(ja){return ja!==null;});}else if(ca.getAttribute('data-ft'))ga=[ca.getAttribute('data-ft')];if(!ga.length)return null;var ha=JSON.parse(ga[0]),ia={dataFTArray:ga,dedupKey:da,isSponsored:!!ha[o],height:ca.offsetHeight,qid:parseInt(ha[p],10),nodeID:ca.id};return ia;},_checkFirstPosViolation:function(ca,da){while(w.length>0&&w[0].isSponsored){var ea={ftArray:w[0].dataFTArray,qid:w[0].qid,nodeid:w[0].nodeID,firstStoryType:ca.firstStoryType},fa=l.scry(da,'.uiBoxRed')[0];if(fa){var ga=fa.textContent||fa.innerText;if(ga)ea.error_msg=ga;}if(ca.isLoggingEnabled&&!(w[0].dedupKey in y)){this._logFirstPosViolation(ea);y[w[0].dedupKey]=ea;}if(ca.isFirstPosInvalidationEnabled){this._invalidateFirstPosAd(ea);w.splice(0,1);}else break;}},_getMinGap:function(ca,da,ea){var fa=Math.min(ca?ca:Number.MAX_VALUE,da?da:Number.MAX_VALUE);return fa!==Number.MAX_VALUE?fa:ea;},_getStoryDedupKeysJSONString:function(ca,da){var ea=[];for(var fa=ca;fa<=da;fa++)ea.push(w[fa].dedupKey);return JSON.stringify(ea);},_getIdxOfStoryToSwap:function(ca,da){if(da>=w.length-ca)return -1;for(var ea=ca+1;ea<w.length&&da>0;ea++){if(!w[ea].isSponsored){da--;}else return -1;if(da===0)return ea;}return -1;},_checkGapRuleViolation:function(ca){var da=null,ea=null,fa=0;for(var ga=0;ga<w.length;ga++){var ha=w[ga];fa+=ha.height;if(ha.isSponsored){fa-=ha.height;var ia=false,ja=false;if(da!==null){var ka=ga-da,la=null,ma=this._getMinGap(aa[ea.dedupKey],aa[ha.dedupKey],ca.defaultMinGap);if(ka<ma){la=q;}else la=r;var na={ftArray_A:ea.dataFTArray,ftArray_B:ha.dataFTArray,dist:ka,pdist:fa,pos:ga+1,qid_A:ea.qid,qid_B:ha.qid,event_type:la,nodeid:ha.nodeID,dedupKeys:this._getStoryDedupKeysJSONString(da,ga)};if(ca.isLoggingEnabled)if(!(ha.dedupKey in x)||x[ha.dedupKey].event_type!==la){this._logAdsGapEvent(na);x[ha.dedupKey]=na;}if(ca.isGapRuleInvalidationEnabled&&la==q){var oa=-1;if(ca.isSwapOnGapRuleViolationEnabled)oa=this._getIdxOfStoryToSwap(ga,ma-ka);if(oa>0){this._shiftAdBelowOrganicStory(ha.nodeID,w[oa].nodeID);var pa=w[ga];w.splice(ga,1);w.splice(oa,0,pa);if(ca.isLoggingEnabled){var qa={ft:w[oa].dataFTArray[0],dist:oa-ga,qid:w[oa].qid,event_type:'ad_swap'};h.post('feed_ads_gap_rule_violation',qa);}ja=true;ha=w[ga];fa+=ha.height;}else if(ca.isGapRuleInvalidationEnabled){this._invalidateGapRuleViolatedAd(na);ia=true;w.splice(ga--,1);}}}if(!ia&&!ja){da=ga;ea=ha;fa=0;}}}},_logFirstPosViolation:function(ca){var da={ft:ca.ftArray[0],event_type:s,intValues:{qid:ca.qid},first_story_type:ca.firstStoryType};if(ca.error_msg)da.error_msg=ca.error_msg;h.post('feed_ads_gap_rule_violation',da);},_logAdsGapEvent:function(ca){var da={ft_A:ca.ftArray_A[0],ft_B:ca.ftArray_B[0],event_type:ca.event_type,intValues:{dist:ca.dist,pdist:ca.pdist,pos:ca.pos,qid_A:ca.qid_A,qid_B:ca.qid_B},dedup_keys:ca.dedupKeys};h.post('feed_ads_gap_rule_violation',da);},_logFeedLoad:function(){var ca={event_type:t};h.post('feed_ads_gap_rule_violation',ca);},_invalidateFirstPosAd:function(ca){i.hide(m(ca.nodeid));var da={ft_array:ca.ftArray,event_type:u};h.post('feed_ads_gap_rule_violation',da);},_invalidateGapRuleViolatedAd:function(ca){var da=m(ca.nodeid);da&&i.hide(da);var ea={ft_array_A:ca.ftArray_A,ft_array_B:ca.ftArray_B,event_type:v};h.post('feed_ads_gap_rule_violation',ea);},_shiftAdBelowOrganicStory:function(ca,da){var ea=m(ca),fa=m(da);ea&&fa&&l.insertAfter(fa,ea);}};f.exports=ba;},null);
__d('FeedErrorDetection',['Banzai','DOM','csx','ge'],function a(b,c,d,e,f,g,h,i,j,k){if(c.__markCompiled)c.__markCompiled();var l=0,m={},n=false,o=false;function p(event,r,s,t){var u={event:event,shouldLogDetail:r,site:'www'};if(r){u.intValues=s;u.normalValues=t;}h.post('feed_error_detection',u,{delay:0});}var q={registerFeedStories:function(r,s){if(r=='substream_0'){l=0;m={};n=false;o=false;}var t=i.scry(k(r),"._5jmm"),u=t.length;if(!u&&!n){if(!o){o=true;return;}if(!l){p('empty_feed_js',s,{},{});}else p('end_of_feed_js',s,s?{stories_count:l}:{},{});n=true;return;}o=false;for(var v=0;v<u;v++){var w=t[v],x=w.getAttribute('data-dedupekey'),y=w.getAttribute('data-ft');if(!x||!y)continue;if(x in m){var z={};if(s)z={dedupKey:x,ft_A:y,ft_B:m[x]};p('duplicate_stories',s,{},{dup_field:z});}else{m[x]=y;l++;}}}};f.exports=q;},null);
__d('StoryPositionTracking',['DOM','LitestandStream','csx','ge'],function a(b,c,d,e,f,g,h,i,j,k){if(c.__markCompiled)c.__markCompiled();var l=0;function m(p,q){var r=JSON.parse(p.getAttribute('data-ft'));if(r){r.insertion_position=q;p.setAttribute('data-ft',JSON.stringify(r));}}function n(p){return h.scry(p,"._5jmm");}var o={registerNewStories:function(p){if(p=='substream_0')l=0;var q=n(k(p)),r=q.length;for(var s=0;s<r;s++)m(q[s],l++);},updateAllStories:function(){var p=n(i.getStreamRoot()),q=p.length;l=0;for(var r=0;r<q;r++)m(p[r],l++);}};f.exports=o;},null);
__d('StreamViewportTracking',['DOM','DOMDimensions','ViewportTracking','ge','recordTNTreeData'],function a(b,c,d,e,f,g,h,i,j,k,l){if(c.__markCompiled)c.__markCompiled();var m,n,o=51;m=babelHelpers.inherits(p,j);n=m&&m.prototype;p.prototype.init=function(q,r){'use strict';if(r)this.$StreamViewportTracking1=r;n.init.call(this,q);this.initSubscriptions();};p.prototype.initSubscriptions=function(){'use strict';};p.prototype.getDataFromConfig=function(q){'use strict';this.isTimetrackingEnabled=1;this.timeout=q.record_delay;};p.prototype.getTimeout=function(){'use strict';return this.timeout;};p.prototype.getStorySelector=function(){'use strict';return '.uiStreamStory';};p.prototype.getAllStories=function(){'use strict';var q=h.scry(this.getStream(),this.getStorySelector());return q.filter(function(r){return r.getAttribute('data-ft');});};p.prototype.getStoryID=function(q){'use strict';var r=JSON.parse(q.getAttribute('data-ft'));return r.mf_story_key;};p.prototype.getQueryID=function(q){'use strict';var r=JSON.parse(q.getAttribute('data-ft'));return r.qid;};p.prototype.getFBFeedLocations=function(q){'use strict';var r=JSON.parse(q.getAttribute('data-ft'));return r.fbfeed_location;};p.prototype.getFBFeedInsertionPosition=function(q){'use strict';var r=JSON.parse(q.getAttribute('data-ft'));return r.insertion_position;};p.prototype.getDataToLog=function(q){'use strict';var r={},s=this.getStream();r=l(q,s);var t=q.getAttribute('data-insertion-position');if(t!==null)r.inspos=t;r.evt=o;r.vpv_time=Math.round(Date.now()/1000);var u=h.scry(q,".fbStoryAttachmentImage")[0];if(u){var v=i.getElementDimensions(u);r.story_image_height=v.height;r.story_image_width=v.width;}return {ft:r};};p.prototype.getStream=function(){'use strict';if(this.$StreamViewportTracking1)return this.$StreamViewportTracking1;return k('home_stream');};p.prototype.heartBeatIsEnabled=function(){'use strict';return true;};p.init=function(q,r){'use strict';p.instance=new p();p.instance.init(q,r);};p.getInstance=function(){'use strict';return p.instance;};function p(){'use strict';m.apply(this,arguments);}f.exports=p;},null);
__d('FbFeedAttachmentRelatedShare',['Arbiter','AttachmentRelatedShareConstants','DOMQuery','Event','tidyEvent','csx'],function a(b,c,d,e,f,g,h,i,j,k,l,m){if(c.__markCompiled)c.__markCompiled();var n={loadRelatedAttachment:function(o,p){l(k.listen(o,'click',function(){h.inform(i.ARTICLE_CLICK,{attachment:o,global_share_id:p});}));},loadRelatedGameAttachment:function(o,p){l(k.listen(o,'click',function(){h.inform(i.GAME_CLICK,{attachment:o,global_share_id:p});}));},loadRelatedAttachmentForStream:function(o){var p=function(event,q){var r=event.getTarget();if(r.getAttribute('target')!=='_blank')return;var s="^div._5pbx",t="^div._5pc9",u=j.scry(r,s)[0]||j.scry(r,t)[0];if(!u)return;h.inform(i.ARTICLE_CLICK,{attachment:u,global_share_id:0,link_url:r.getAttribute('href'),is_right_click:q});};l(k.listen(o,'click',function(event){p(event,false);}));l(k.listen(o,'mousedown',function(event){if(event.which==3||event.button==2)p(event,true);}));}};f.exports=n;},null);
__d('FbFeedCommentUFIScroller',['DOMScroll','containsNode','ge'],function a(b,c,d,e,f,g,h,i,j){if(c.__markCompiled)c.__markCompiled();var k={reveal:function(l){if(l){var m=j('content');if(m&&i(m,l))h.ensureVisible(l,null,60,250);}}};f.exports=k;},null);
__d('FbFeedHighlight',['JSXDOM','CSS','DOM','DOMScroll','cx'],function a(b,c,d,e,f,g,h,i,j,k,l){if(c.__markCompiled)c.__markCompiled();var m=1000,n=1000,o=null;function p(){return (h.div({className:"_1usz"},h.div({className:"_1us-"}),h.div({className:"_1us_"}),h.div({className:"_1ut0"}),h.div({className:"_1ut1"})));}var q={highlightAndScrollTo:function(r){q.highlight(r);q.scrollTo(r);},highlightSingle:function(r){var s=p();j.appendContent(r,s);setTimeout(function(){if(o)j.remove(o);o=s;i.addClass(r,"_1ut2");},0);setTimeout(function(){i.removeClass(r,"_1ut2");setTimeout(function(){j.remove(s);if(s==o)o=null;},m+n);},m+n);},highlight:function(r){var s=q.highlightPermanent(r);setTimeout(function(){i.removeClass(r,"_1ut2");setTimeout(j.remove.bind(null,s),m+m);},m+n);},highlightPermanent:function(r){var s=p();j.appendContent(r,s);setTimeout(i.addClass.bind(null,r,"_1ut2"),0);return s;},scrollTo:function(r){setTimeout(k.scrollTo.bind(null,r),0);}};f.exports=q;},null);
__d('FbFeedKeyboardController',['CSS','DOM','DOMQuery','FbFeedHighlight','FeedBaseKeyboardController','Focus','JSXDOM','Parent','csx','cx','ge','getActiveElement','isElementNode'],function a(b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t){if(c.__markCompiled)c.__markCompiled();var u,v;function w(z){if(z.previousElementSibling)return z.previousElementSibling;z=z.previousSibling;while(z&&!t(z))z=z.previousSibling;return z||null;}function x(z){if(z.nextElementSibling)return z.nextElementSibling;z=z.nextSibling;while(z&&!t(z))z=z.nextSibling;return z||null;}u=babelHelpers.inherits(y,l);v=u&&u.prototype;y.prototype.getStories=function(z){'use strict';return j.scry(z||this.root,"._5jmm");};y.prototype.isHoldoutStory=function(z){'use strict';return !!z&&h.hasClass(z,'holdoutAdStory');};y.prototype.isRelevantStory=function(z){'use strict';return t(z)&&!this.isHoldoutStory(z);};y.prototype.isStory=function(z){'use strict';return h.hasClass(z,"_5jmm");};y.prototype.clickLike=function(){'use strict';var z=this.$FbFeedKeyboardController1();this.clickElement(z,'.UFILikeLink');if(z!==this.selected)return null;var aa=this.getParentStory(s());if(aa){var ba=j.scry(aa,'.UFILikeLink');for(var ca=0;ca<ba.length;ca++)if(!h.hasClass(ba[ca],'accessible_elem'))m.setWithoutOutline(ba[ca]);}};y.prototype.clickComment=function(){'use strict';this.clickElement(this.$FbFeedKeyboardController1(),'.comment_link');};y.prototype.clickShare=function(){'use strict';this.click('.share_action_link');};y.prototype.clickSeeMore=function(){'use strict';this.click('.see_more_link');};y.prototype.clickLeft=function(){'use strict';this.click("._1mri");};y.prototype.clickRight=function(){'use strict';this.click("._2fu-");};y.prototype.openAttachment=function(){'use strict';this.click("._5dec","a._52c6","._4-eo",'.uiVideoThumb');};y.prototype.getHeadline=function(z){'use strict';return j.scry(z,"h5._5pbw")[0];};y.prototype.$FbFeedKeyboardController2=function(z){'use strict';var aa=o.bySelector(z,"._5pcb"),ba=r('pagelet_soft_permalink_posts');return !!(aa||ba&&i.contains(ba,z));};y.prototype.getPreviousSibling=function(z){'use strict';var aa=w(z);if(aa&&this.getParentStory(aa))return aa;aa=null;if(this.$FbFeedKeyboardController2(z)){var ba=this.getStories(this.root),ca=ba.indexOf(z);while(ca>-1){if(ca===0){aa=r('pagelet_composer');aa=aa&&o.bySelector(aa,"._5jmm");}else if(ca>0){aa=ba[ca-1];if(aa.offsetHeight>0)break;}ca--;}}return aa||this.selected;};y.prototype.getPreviousStory=function(z){'use strict';var aa=this.getPreviousSibling(z);while(aa&&!this.isStory(aa))aa=this.getPreviousSibling(aa);return aa;};y.prototype.getParentStory=function(z){'use strict';return o.bySelector(z,"._5jmm");};y.prototype.getNextSibling=function(z){'use strict';var aa=x(z);if(aa&&this.getParentStory(aa))return aa;aa=null;if(this.$FbFeedKeyboardController2(z)){var ba=this.getStories(this.root),ca=ba.indexOf(z);if(ca>-1){aa=ba[++ca];while(aa&&aa.offsetHeight===0)aa=ba[++ca];}}else if(r('pagelet_composer',z))aa=j.scry(document,"div._5pcb ._5jmm")[0];return aa||this.selected;};y.prototype.getNextStory=function(z){'use strict';var aa=this.getNextSibling(z);while(aa&&!this.isStory(aa))aa=this.getNextSibling(aa);return aa;};y.prototype.setSelected=function(z,aa){'use strict';if(z){var ba="_5qdu",ca=j.scry(z,"._5qdu");if(!ca.length&&aa)i.prependContent(z,n.div({className:ba}));}if(aa){this.selected&&this.setTabindexOnStory(this.selected,'-1');this.selected&&h.removeClass(this.selected,"_5qdv");this.selected=z;z&&this.setTabindexOnStory(z,'0');z&&h.addClass(z,"_5qdv");k.highlightSingle(z);}};y.prototype.$FbFeedKeyboardController1=function(){'use strict';var z=i.scry(this.selected,"._1qch");if(z.length>0)return i.scry(this.selected,"._3el7")[0];return this.selected;};y.init=function(z){'use strict';new y(z);};function y(){'use strict';u.apply(this,arguments);}f.exports=y;},null);
__d('FbFeedViewportTracking',['Arbiter','LitestandMessages','LitestandStream','StreamViewportTracking','csx'],function a(b,c,d,e,f,g,h,i,j,k,l){if(c.__markCompiled)c.__markCompiled();var m,n;m=babelHelpers.inherits(o,k);n=m&&m.prototype;o.prototype.initSubscriptions=function(){'use strict';this.subscriptions.addSubscriptions(h.subscribe([i.STORIES_INSERTED],this.invalidateAllStoriesCache.bind(this)),h.subscribe(i.LEAVE_HOME,this.updateTimeTrackingData.bind(this,true)));};o.prototype.getStorySelector=function(){'use strict';return "._5jmm";};o.prototype.getStream=function(){'use strict';return j.getStreamRoot();};o.prototype.getSessionID=function(){'use strict';return j.getFeedStreamID();};o.init=function(p){'use strict';o.instance=new o();o.instance.init(p);};o.getInstance=function(){'use strict';return o.instance;};function o(){'use strict';m.apply(this,arguments);}f.exports=o;},null);
__d('TypeaheadRegulateMemorializedUsers',['TokenizeUtil'],function a(b,c,d,e,f,g,h){if(c.__markCompiled)c.__markCompiled();function i(j){'use strict';this._typeahead=j;}i.prototype._filter=function(j,k){'use strict';if(j.type!=='user'||!j.memorialized)return true;var l=h.parse(j.text).tokens;if(l.length===1&&h.isExactMatch(k,j.text))return true;var m=this._typeahead.getData().getTextToIndex(j),n=h.parse(k).tokens;return n.length>1&&h.isQueryMatch(k,m);};i.prototype.enable=function(){'use strict';this._filterRegistry=this._typeahead.getData().addFilter(this._filter.bind(this));};i.prototype.disable=function(){'use strict';this._filterRegistry.remove();this._filterRegistry=null;};Object.assign(i.prototype,{_filterRegistry:null});f.exports=i;},null);
__d('legacy:RegulateMemorializedUsersTypeaheadBehavior',['TypeaheadRegulateMemorializedUsers'],function a(b,c,d,e,f,g,h){if(c.__markCompiled)c.__markCompiled();if(!b.TypeaheadBehaviors)b.TypeaheadBehaviors={};b.TypeaheadBehaviors.regulateMemorializedUsers=function(i){i.enableBehavior(h);};},3);
__d('XUIBadge',['CSS','DOM','cx','invariant'],function a(b,c,d,e,f,g,h,i,j,k){if(c.__markCompiled)c.__markCompiled();function l(n){return parseInt(n,10)===n;}function m(n){'use strict';this.target=n.target;this.count=n.count;this.maxcount=n.maxcount;}m.prototype.getCount=function(){'use strict';return this.count;};m.prototype.setCount=function(n){'use strict';!l(n)?k(0):undefined;!(n>=0)?k(0):undefined;this.count=n;h.conditionClass(this.target,'hidden_elem',this.count===0);if(n>this.maxcount){i.setContent(this.target,this.maxcount+'+');h.addClass(this.target,"_5ugi");}else{i.setContent(this.target,n);h.removeClass(this.target,"_5ugi");}};m.prototype.setLegacyContent=function(n){'use strict';if(typeof n==='string'){h.conditionClass(this.target,'hidden_elem',n==0);i.setContent(this.target,n);h.removeClass(this.target,"_5ugi");}else this.setCount(n);};m.prototype.increment=function(){'use strict';this.setCount(this.getCount()+1);};f.exports=m;},null);
__d("XBrowserPushDisabledController",["XController"],function a(b,c,d,e,f,g){c.__markCompiled&&c.__markCompiled();f.exports=c("XController").create("\/notifications\/client\/push\/disabled\/",{});},null);
__d("XBrowserPushXOutController",["XController"],function a(b,c,d,e,f,g){c.__markCompiled&&c.__markCompiled();f.exports=c("XController").create("\/notifications\/client\/push\/xout\/",{});},null);
__d("XEventRelatedEventsPivotController",["XController"],function a(b,c,d,e,f,g){c.__markCompiled&&c.__markCompiled();f.exports=c("XController").create("\/events\/async\/related_events_pivot\/",{event_id:{type:"Int",required:true},attachment_id:{type:"String",required:true}});},null);
__d("XFeedAdsChainingController",["XController"],function a(b,c,d,e,f,g){c.__markCompiled&&c.__markCompiled();f.exports=c("XController").create("\/feed\/ads_chaining\/",{actor_id:{type:"String",required:true},ft_id:{type:"String"},origin:{type:"String",required:true},ei:{type:"String",required:true},data_ownerid:{type:"String",required:true}});},null);
__d("XPubcontentFeedChainingController",["XController"],function a(b,c,d,e,f,g){c.__markCompiled&&c.__markCompiled();f.exports=c("XController").create("\/pubcontent\/feed_chaining\/",{actor_id:{type:"String",required:true},content_id:{type:"String"},ft_id:{type:"String"},origin:{type:"String",required:true}});},null);
__d("XPubcontentInlineStoryPivotChainingController",["XController"],function a(b,c,d,e,f,g){c.__markCompiled&&c.__markCompiled();f.exports=c("XController").create("\/pubcontent\/inline_story_pivot_chaining\/",{origin:{type:"String",required:true},storyid:{type:"String"},ftid:{type:"String"}});},null);
__d("XPubcontentRelatedShareChainingController",["XController"],function a(b,c,d,e,f,g){c.__markCompiled&&c.__markCompiled();f.exports=c("XController").create("\/pubcontent\/related_share\/",{attachment_div_id:{type:"String",required:true},global_share_id:{type:"Int",required:true},video_div_id:{type:"String"},link_url:{type:"String"},qid:{type:"String"},mf_story_key:{type:"String"},share_id:{type:"String"},is_auto_expand:{type:"Bool",defaultValue:false}});},null);
__d("XPubcontentRelatedVideoChainingController",["XController"],function a(b,c,d,e,f,g){c.__markCompiled&&c.__markCompiled();f.exports=c("XController").create("\/pubcontent\/related_video\/",{attachment_div_id:{type:"String",required:true},fbvideo_id:{type:"Int",required:true},qid:{type:"String"},mf_story_key:{type:"String"}});},null);
__d("XPubcontentTopicChainingController",["XController"],function a(b,c,d,e,f,g){c.__markCompiled&&c.__markCompiled();f.exports=c("XController").create("\/pubcontent\/topic_chaining\/",{pivotal_topic_ids:{type:"IntVector",defaultValue:[]}});},null);
__d("XPushRegisterServiceWorkerController",["XController"],function a(b,c,d,e,f,g){c.__markCompiled&&c.__markCompiled();f.exports=c("XController").create("\/push\/register\/service_worker\/",{});},null);
__d("XRelatedGamesChainingController",["XController"],function a(b,c,d,e,f,g){c.__markCompiled&&c.__markCompiled();f.exports=c("XController").create("\/games\/async\/related_games\/",{attachment_div_id:{type:"String",required:true},app_id:{type:"Int",required:true}});},null);
__d("XSearchRelatedPostsPivotController",["XController"],function a(b,c,d,e,f,g){c.__markCompiled&&c.__markCompiled();f.exports=c("XController").create("\/search\/async\/related_posts_pivot\/",{origin:{type:"String",required:true},content_id:{type:"String",required:true}});},null);